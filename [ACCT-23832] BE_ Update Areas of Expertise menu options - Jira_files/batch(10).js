WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'jira.webresources:data-sets', location = '/includes/ajs/contentretriever/ProgressiveDataSet.js' */
AJS.namespace("JIRA.ProgressiveDataSet",null,require("aui/progressive-data-set"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/UncomplicatedInlineLayer.js' */
define("jira/mention/uncomplicated-inline-layer",["jira/ajs/layer/inline-layer","jira/ajs/contentretriever/content-retriever","jquery"],(function(n,e,t){"use strict";return n.extend({init:function(t){t||(t={});t.contentRetriever=new e;n.prototype.init.call(this,t)},content:function(){arguments.length&&(this.$content=arguments[0]);return this.$content},refreshContent:function(n){this.layer().empty().append(this.content());t.isFunction(n)&&n.call(this);this.contentChange();this.setPosition()}})}));AJS.namespace("JIRA.UncomplicatedInlineLayer",null,require("jira/mention/uncomplicated-inline-layer"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/Mention.Group.js' */
define("jira/mention/mention-group",["jira/ajs/group"],(function(t){"use strict";return t.extend({_makeSelection:function(t){if(this.items&&this.items[this.index]){this.items[this.index].trigger("accept");t.preventDefault()}},shiftFocus:function(i){t.prototype.shiftFocus.call(this,i);this.items[this.index]&&(this.highlighted=this.items[this.index])},keys:{Up:function(t){this.shiftFocus(-1);t.preventDefault()},Down:function(t){this.shiftFocus(1);t.preventDefault()},Return:function(t){this._makeSelection(t)},Tab:function(t){this._makeSelection(t)}}})}));AJS.namespace("JIRA.MentionGroup",null,require("jira/mention/mention-group"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/Mention.js' */
define("jira/mention/mention",["jira/util/key-code","jira/ajs/control","jira/dialog/dialog-stack","jira/mention/mention-user","jira/mention/mention-group","jira/mention/mention-matcher","jira/mention/scroll-pusher","jira/mention/contextual-mention-analytics-event","jira/mention/uncomplicated-inline-layer","jira/ajs/layer/inline-layer/standard-positioning","jira/ajs/layer/inline-layer/window-positioning","jira/ajs/dropdown/dropdown-list-item","jira/util/events","aui/progressive-data-set","jquery","underscore","wrm/context-path","jira/util/logger"],(function(e,t,n,r,i,s,o,a,u,l,c,h,f,d,m,g,p,y){"use strict";var v=!1,_={};function C(e,t){var n="";e&&(n=(e instanceof m?e.get(0):e).querySelector("a").getAttribute(t));return n}function w(e){return C(e,"rel")}function E(e,t){var n=I(e.get("highestIssueInvolvementRank"),t.get("highestIssueInvolvementRank"),(function(e,t){return e-t}));0===n&&0===(n=I(e.get("latestCommentCreationTime"),t.get("latestCommentCreationTime"),(function(e,t){return t-e})))&&(n=e.get("displayName").localeCompare(t.get("displayName")));return n}function I(e,t,n){return void 0!==e?void 0!==t?n(e,t):-1:void 0!==t?1:0}function x(e){return!!e}function S(e,t){return t?p()+"/rest/internal/2/users/mention":x(e)?p()+"/rest/internal/2/user/mention/search":p()+"/rest/api/2/user/viewissue/search"}function A(e,t){return t||x(e)?"query":"username"}return t.extend({CLASS_SIGNATURE:"AJS_MENTION",lastInvalidUsername:"",lastRequestMatch:!0,lastValidUsername:"",init:function(e,t){this.useNewEndpoint=t;var n=function(e,t){return{model:r,comparator:E,queryEndpoint:S(e,t),queryParamKey:A(e,t)}}(e,t);this.listController=new i;this.isRolesEnabled=x(e);this.dataSource=new d([],g.extend({queryData:this._getQueryParams.bind(this),matcher:function(){return!1}},n));this.dataSource.shouldGetMoreResults=function(){return!0};this.fetchUserNames=g.debounce(this.dataSource.query,175);this.dataSource.bind("respond",function(e){var t=this,n=e.query;if(n&&v){var r=(this.dataSource.findQueryCache(n)||[]).slice(0,5).filter((function(e){return e})).map((function(e){return t.dataSource.findWhere({name:e})}));if(r.length){this.lastInvalidUsername="";this.lastValidUsername=n;this.lastRequestMatch=!0}else{(!this.lastInvalidUsername||n.length<=this.lastInvalidUsername.length)&&(this.lastInvalidUsername=n);this.lastRequestMatch=!1}var i=this.generateSuggestions(r,n);this.updateSuggestions(i);y.trace("mention.suggestions.updated")}}.bind(this));this.dataSource.bind("activity",function(e){e.activity?this.layerController._showLoading():this.layerController._hideLoading()}.bind(this))},updateSuggestions:function(e){var t=this;this.layerController&&requestAnimationFrame((function(){t.layerController.content(e);t.layerController.show();t.layerController.refreshContent()}))},_getQueryParams:function(){return this.restParams},_getIssueKey:function(){return this.$textarea.attr("data-issuekey")},_getProjectKey:function(){return this.$textarea.attr("data-projectkey")},_getMultipleProjectKeys:function(){return this.$textarea.attr("data-project-keys")},_setQueryParams:function(){var e={maxResults:5},t=n.current&&"create-issue-dialog"===n.current.options.id;if(this.useNewEndpoint){if(this._getMultipleProjectKeys())e.projectKeys=this._getMultipleProjectKeys();else if(this.isRolesEnabled){e.includeInvolvement=!0;e.issueKey=t?void 0:this._getIssueKey()}else e.projectKeys=this._getProjectKey();this.restParams=e}else{e.issueKey=t?void 0:this._getIssueKey();e.projectKey=this._getProjectKey();this.restParams=e}},_composeCustomEventForFollowScroll:function(e){e=e||{};var t=this.$textarea.attr("follow-scroll");t&&t.length&&(e[t]={scroll:function(){this.setPosition()}});return e},_getMentionsOffsetTarget:function(){var e=this;try{var t=function(){try{var t=e._getEditorAPI();return t&&t.phantomCaret.queryPhantomCaretInDOM()}catch(e){return}}();return t?m(t):this.$textarea}catch(e){console.error(e);return this.$textarea}},textarea:function(e){var t=this;if(!e)return this.$textarea;this.$textarea=m(e);m("#mentionDropDown").remove();if(this.$textarea.attr("push-scroll"))var r=new l,i=o(this.$textarea,10);var s=new c;s.setInversePositioningIfNotFit(!0);this.layerController=new u({offsetTarget:this._getMentionsOffsetTarget(),allowDownsize:!0,positioningController:r||s,customEvents:this._composeCustomEventForFollowScroll(),width:function(){return t.$textarea.width()}});this.layerController.bind("showLayer",(function(){t.listController.trigger("focus");t._assignEvents("win",window)})).bind("hideLayer",(function(){t.listController.trigger("blur");t._unassignEvents("win",window);i&&i.reset()})).bind("contentChanged",(function(){if(t.layerController.$content){var e,n=t.listController.index,r=t.listController.highlighted||t.listController.items[n],i=r?w(r.$element):"";t.listController.removeAllItems();t.layerController.$content.off("click.jiraMentions");t.layerController.$content.on("click.jiraMentions","li",(function(e){var n=e.currentTarget;t._acceptSuggestion(n);e.preventDefault()}));t.layerController.$content.find("li").each((function(){var n=w(this),r=new h({element:this,autoScroll:!0});n===i&&(e=r);t.listController.addItem(r)}));t.listController.prepareForInput();e?e.trigger("focus"):t.listController.shiftFocus(0)}})).bind("setLayerPosition",(function(e,t,r){if(n.current&&n.current.$form){var s=n.current.$popup.find(".buttons-container:visible");s.length&&t.top>s.offset().top&&(t.top=s.offset().top)}t.left<0&&(t.left=0);t.left+r.layer().width()>m(window).width()&&(t.left=Math.max(m(window).width()-r.layer().width(),0));i&&i.push(t.top+r.layer().outerHeight(!0))}));this.layerController.layer().attr("id","mentionDropDown");this._assignEvents("inlineLayer",t.layerController.layer());this._assignEvents("textarea",t.$textarea);this._setQueryParams();this._seedData().then((function(e){var n=[];n.push.apply(n,e);t.dataSource.add(n)}))},generateSuggestions:function(e,t,n){var r=function(e){var r={text:e};if(!n&&e&&e.length){var i=this._indexOfFirstMatch(e.toLowerCase(),t.toLowerCase());if(-1!==i){var s=i+t.length;r={prefix:e.substring(0,i),match:e.substring(i,s),suffix:e.substring(s)}}}return r}.bind(this),i=g.map(e,(function(e){var t=e.toJSON();t.username=t.name;t.displayName=r(t.displayName);t.name=r(t.name);t.iconType="rounded";t.issueRoles=g.map(t.roles,(function(e){return r(e.label)}));return t}));return m(JIRA.Templates.mentionsSuggestions({suggestions:i,query:t,activity:this.dataSource.activeQueryCount>0,isRolesEnabled:this.isRolesEnabled,useDefaultAvatar:this.useNewEndpoint}))},_indexOfFirstMatch:function(e,t){for(var n,r=/ |@|\.|-|"|,|'|\(/,i=0;-1!==n;){if(0===e.indexOf(t))return i;if(-1===(n=e.search(r)))return-1;i=i+n+1;e=e.substring(n+1)}},_seedData:function(){var e,t=this._getQueryParams().issueKey;if(t){_[t]||(_[t]=m.ajax({method:"GET",url:p()+(this.useNewEndpoint?"/rest/internal/2/users/mention":"/rest/internal/2/user/mention/search"),data:this._getQueryParams(),dataType:"json",contentType:"application/json; charset=UTF-8"}));e=_[t].promise()}else e=(new m.Deferred).reject();return e},_acceptSuggestion:function(e){this._hide();a.fireUserMayAcceptSuggestionByUsingContextualMentionEvent(this._getCurrentUserName());this._replaceCurrentUserName(w(e),C(e,"data-displayname"));this.listController.removeAllItems();v=!1},_replaceCurrentUserName:function(e){var t=this._rawInputValue(),n=this._getCaretPosition(),r=t.substr(0,n),i=s.getLastWordBoundaryIndex(r,!0),o=t.substr(0,i+1).replace(/\r\n/g,"\n"),a="[~"+e+"]",u=t.substr(n);this._rawInputValue([o,a,u].join(""));this._setCursorPosition(o.length+a.length)},_setCursorPosition:function(e){var t=this.$textarea.get(0);if(t.setSelectionRange){t.focus();t.setSelectionRange(e,e)}else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0);n.moveEnd("character",e);n.moveStart("character",e);n.select()}},_getCaretPosition:function(){var e,t,n,r,i=this.$textarea.get(0),s=this._rawInputValue();if("number"==typeof i.selectionStart)return i.selectionStart;if(document.selection&&i.createTextRange){if(e=document.selection.createRange()){(r=i.createTextRange()).moveToBookmark(e.getBookmark());if(r.compareEndPoints("StartToEnd",i.createTextRange())>=0)return s.length;n=s.replace(/\r\n/g,"\n");t=r.moveStart("character",-s.length);return n.slice(0,-t).split("\n").length-1-t}return s.length}return 0},_rawInputValue:function(){var e=this.$textarea.get(0);"string"==typeof arguments[0]&&(e.value=arguments[0]);return e.value},_getCurrentUserName:function(){return this.currentUserName},_hide:function(){this.layerController.hide()},_show:function(){this.layerController.show()},_keyUp:function(){var e=this._getCaretPosition(),t=this._getUserNameFromInput(e),n=m.trim(t||"");if(this._isNewRequestRequired(n)){this.fetchUserNames(n);v=!0}else if(this._showHintSuggestions(t)){var r=this.dataSource.first(5),i=this.generateSuggestions(r,n,!0);this.updateSuggestions(i);v=!0}else if(!this._keepSuggestWindowOpen(n)){this._hide();v=!1}this.lastQuery=n;delete this.willCheck},_showHintSuggestions:function(e){return"string"==typeof e&&0===e.length},_keepSuggestWindowOpen:function(e){return!!e&&(!!this.layerController.isVisible()&&(this.dataSource.activeQueryCount||this.lastRequestMatch))},_isNewRequestRequired:function(e){if(!e)return!1;if((e=m.trim(e))===this.lastQuery)return!1;if(this.lastInvalidUsername){if(0===e.indexOf(this.lastInvalidUsername)&&this.lastInvalidUsername.length<e.length)return!1}else if(!this.lastRequestMatch&&e===this.lastValidUsername)return!0;return!0},_getUserNameFromInput:function(e){"number"!=typeof e&&(e=this._getCaretPosition());this.currentUserName=s.getUserNameFromCurrentWord(this._rawInputValue(),e);return this.currentUserName},_getEditorAPI:function(){try{return require("wiki-edit/api")}catch(e){return null}},_events:{win:{resize:function(){this.layerController.setWidth(this.$textarea.width())}},textarea:{keydown:function(t){if(t.keyCode===e.ESCAPE){if(this.layerController.isVisible()){n.current&&f.one("Dialog.beforeHide",(function(e){e.preventDefault()}));this.$textarea.one("keyup",(function(t){if(t.keyCode===e.ESCAPE){t.stopPropagation();f.trigger("Mention.afterHide")}}))}}else if(!this.willCheck){this.willCheck=g.defer(g.bind(this._keyUp,this));g.defer(g.bind((function(){var e=this._getUserNameFromInput(this._getCaretPosition());a.fireContextualMentionIsBeingLookedUpAnalyticsEvent(e,t.keyCode,t.ctrlKey,t.metaKey)}),this))}},focus:function(){this._keyUp()},mouseup:function(){this._keyUp()},blur:function(){this.listController.removeAllItems();this.lastQuery=this.lastValidUsername=this.lastInvalidUsername=""}},inlineLayer:{mousedown:function(e){e.preventDefault()}}}})}));define("jira/mention/mention-user",["jira/backbone-1.3.3","underscore"],(function(e,t){"use strict";return e.Model.extend({idAttribute:"name",initialize:function(){this.on("change:issueInvolvements",(function(e,n){var r=t.union(e.previous("issueInvolvements"),n);e.attributes.issueInvolvements=t.uniq(r,!1,(function(e){return e.id}))}))},parse:function(e){e.issueInvolvements||(e.issueInvolvements=[]);return e},toJSON:function(){var e=t.clone(this.attributes);e.roles=e.issueInvolvements;delete e.issueInvolvements;return e}})}));define("jira/mention/mention-matcher",["jquery"],(function(e){"use strict";return{AT_USERNAME_START_REGEX:/^@(.*)/i,AT_USERNAME_REGEX:/[^\[]@(.*)/i,WIKI_MARKUP_REGEX:/\[[~@]+([^~@]*)/i,ACCEPTED_USER_REGEX:/\[~[^~\]]*\]/i,WORD_LIMIT:3,getUserNameFromCurrentWord:function(t,n){var r,i=t.substr(0,n),s=this.getLastWordBoundaryIndex(i,!1),o=i.charAt(s-1),a=null;if(!o||!/\w/i.test(o)){r=this._removeAcceptedUsernames(i.substr(s));if(/[\r\n]/.test(r))return null;e.each([this.AT_USERNAME_START_REGEX,this.AT_USERNAME_REGEX,this.WIKI_MARKUP_REGEX],(function(e,t){var n=t.exec(r);if(n){a=n[1];return!1}}))}return null!=a&&this.lengthWithinLimit(a,this.WORD_LIMIT)?a:null},lengthWithinLimit:function(t,n){return e.trim(t).split(/\s+/).length<=~~n},getLastWordBoundaryIndex:function(e,t){var n=e.lastIndexOf("@"),r=e.lastIndexOf("[~");if(t){n-=1;r-=1}return n>r?n:r},_removeAcceptedUsernames:function(e){var t=this.ACCEPTED_USER_REGEX.exec(e);return t?e.split(t)[1]:e}}}));define("jira/mention/scroll-pusher",["jquery"],(function(e){"use strict";return function(t,n){n=n||0;var r,i=e(t.attr("push-scroll"));return{push:function(e,t){void 0===t&&(t=n);var s=e-(i.offset().top+i.outerHeight());if(s+t>0){r||(r=i.height());i.height(i.height()+s+t)}},reset:function(){r&&i.height(r)}}}}));define("jira/mention/contextual-mention-analytics-event",["jira/util/key-code","jira/analytics","underscore"],(function(e,t,n){"use strict";var r=/^(assi(gnee?)|repo(rter?))$/,i=n.debounce((function(n,i,s,o){var a=function(t){return t===e.BACKSPACE}(i)||function(e,t,n){return e==="A".charCodeAt()&&(t||n)||t||n}(i,s,o),u=r.test(n);!1===a&&u&&t.send({name:"issue.comment.contextualMention.lookup"})}),500);return{fireAcceptedContextualMentionAnalyticsEvent:function(){t.send({name:"issue.comment.contextualMention.accepted"})},fireContextualMentionIsBeingLookedUpAnalyticsEvent:function(e,t,n,r){i(e,t,n,r)},fireUserMayAcceptSuggestionByUsingContextualMentionEvent:function(e){n.any(["assignee","reporter"],(function(n){if(0===n.indexOf(e)&&n!==e){t.send({name:"issue.comment.contextualMention.mayAccepted"});return!0}}))}}}));AJS.namespace("JIRA.MentionUserModel",null,require("jira/mention/mention-user"));AJS.namespace("JIRA.Mention",null,require("jira/mention/mention"));AJS.namespace("JIRA.Mention.Matcher",null,require("jira/mention/mention-matcher"));AJS.namespace("JIRA.Mention.ScrollPusher",null,require("jira/mention/scroll-pusher"));AJS.namespace("JIRA.Mention.ContextualMentionAnalyticsEvent",null,require("jira/mention/contextual-mention-analytics-event"));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/Mention.soy' */
// This file was automatically generated from Mention.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Templates.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Templates == 'undefined') { JIRA.Templates = {}; }


JIRA.Templates.mentionsSuggestions = function(opt_data, opt_ignored) {
  var output = '<div class="aui-list">';
  if (opt_data.suggestions.length > 0) {
    output += '<ul class="aui-list-section aui-last">';
    var suggestionList7 = opt_data.suggestions;
    var suggestionListLen7 = suggestionList7.length;
    for (var suggestionIndex7 = 0; suggestionIndex7 < suggestionListLen7; suggestionIndex7++) {
      var suggestionData7 = suggestionList7[suggestionIndex7];
      output += '<li class="aui-list-item jira-mention-suggestion"><a class="aui-list-item-link aui-iconised-link" rel="' + soy.$$escapeHtml(suggestionData7.username) + '"' + ((suggestionData7.displayName.text) ? ' data-displayname="' + soy.$$escapeHtml(suggestionData7.displayName.text) + '"' : (suggestionData7.displayName.match) ? ' data-displayname="' + soy.$$escapeHtml(suggestionData7.displayName.prefix) + soy.$$escapeHtml(suggestionData7.displayName.match) + soy.$$escapeHtml(suggestionData7.displayName.suffix) + '"' : '');
      if (suggestionData7.roles) {
        output += ' data-issue-roles="';
        var roleList25 = suggestionData7.roles;
        var roleListLen25 = roleList25.length;
        for (var roleIndex25 = 0; roleIndex25 < roleListLen25; roleIndex25++) {
          var roleData25 = roleList25[roleIndex25];
          output += soy.$$escapeHtml(roleData25.id) + ' ';
        }
        output += '"';
      }
      output += ' href="#" >' + JIRA.Templates.highlitEntry(soy.$$augmentMap(suggestionData7, {useDefaultAvatar: opt_data.useDefaultAvatar})) + '</a></li>';
    }
    output += '</ul>';
  } else {
    output += JIRA.Templates.noSuggestions({activity: opt_data.activity, query: '' + soy.$$escapeHtml(opt_data.query)});
  }
  output += ((opt_data.isRolesEnabled) ? '<div class="aui-list-section-footer">' + soy.$$escapeHtml(AJS.format('Try typing @{0} or @{1}','assignee','reporter')) + '</div>' : '') + '</div>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.mentionsSuggestions.soyTemplateName = 'JIRA.Templates.mentionsSuggestions';
}


JIRA.Templates.noSuggestions = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.query.length == 0) ? '<div class="no-suggestions">' + soy.$$escapeHtml('Type to start searching.') + '</div>' : (opt_data.activity) ? '<div class="no-suggestions searching">' + soy.$$filterNoAutoescape(AJS.format('Searching for {0}{1}{2}...','<strong>',opt_data.query,'</strong>')) + '</div>' : '<div class="no-suggestions">' + soy.$$filterNoAutoescape(AJS.format('Found no matching users for {0}{1}{2}.','<strong>',opt_data.query,'</strong>')) + '</div>');
};
if (goog.DEBUG) {
  JIRA.Templates.noSuggestions.soyTemplateName = 'JIRA.Templates.noSuggestions';
}


JIRA.Templates.highlitEntry = function(opt_data, opt_ignored) {
  return '<span class="jira-mention-suggestion-user"><img class="icon rounded" src="' + ((opt_data.useDefaultAvatar) ? soy.$$escapeHtml(opt_data.avatarUrl) : soy.$$escapeHtml(opt_data.avatarUrls['16x16'])) + '" alt="' + soy.$$escapeHtml(opt_data.displayName) + '" /><span class="jira-mention-suggestion-user-name">' + JIRA.Templates.highlightMention({match: opt_data.displayName}) + ((opt_data.emailAddress) ? ' - ' + soy.$$escapeHtml(opt_data.emailAddress) : '') + JIRA.Templates.highlightMention({prefix: ' (', match: opt_data.name, suffix: ')'}) + '</span></span>' + ((opt_data.issueRoles) ? JIRA.Templates.renderIssueRoles(opt_data) : '');
};
if (goog.DEBUG) {
  JIRA.Templates.highlitEntry.soyTemplateName = 'JIRA.Templates.highlitEntry';
}


JIRA.Templates.highlightMention = function(opt_data, opt_ignored) {
  return '' + ((opt_data.match.text || opt_data.match.match) ? ((opt_data.prefix) ? soy.$$escapeHtml(opt_data.prefix) : '') + ((opt_data.match.match) ? soy.$$escapeHtml(opt_data.match.prefix) + '<mark>' + soy.$$escapeHtml(opt_data.match.match) + '</mark>' + soy.$$escapeHtml(opt_data.match.suffix) : soy.$$escapeHtml(opt_data.match.text)) + ((opt_data.suffix) ? soy.$$escapeHtml(opt_data.suffix) : '') : '');
};
if (goog.DEBUG) {
  JIRA.Templates.highlightMention.soyTemplateName = 'JIRA.Templates.highlightMention';
}


JIRA.Templates.renderIssueRoles = function(opt_data, opt_ignored) {
  var output = '<span class="jira-mention-issue-roles">';
  var roleList110 = opt_data.issueRoles;
  var roleListLen110 = roleList110.length;
  for (var roleIndex110 = 0; roleIndex110 < roleListLen110; roleIndex110++) {
    var roleData110 = roleList110[roleIndex110];
    output += ' <span class="aui-lozenge aui-lozenge-complete' + ((! roleData110.match) ? ' aui-lozenge-subtle' : '') + '">' + JIRA.Templates.highlightMention({prefix: '', match: roleData110, suffix: ''}) + '</span>';
  }
  output += '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Templates.renderIssueRoles.soyTemplateName = 'JIRA.Templates.renderIssueRoles';
}

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'jira.webresources:mentions-feature', location = '/includes/jira/mention/Mention.Element.js' */
define("jira/mention/mention-element",["jira/mention/mention","jira/skate"],(function(e,t){"use strict";function n(t){var n=t.getAttribute("data-issuekey"),i="true"===t.getAttribute("data-use-new-endpoint");t._controller||(t._controller=new e(n,i));t._controller.textarea(t)}return t("mentionable",{type:t.type.CLASSNAME,created:function(){},attached:function(e){document.activeElement===e&&n(e)},events:{focus:function(e){n(e)}}})}));
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:rte-saving-kb-shortcuts', location = 'js/editor-saving-kb-shortcuts.js' */
define("jira/editor/saving-kb-shortcuts",["jquery","jira/editor/analytics","jira/util/navigator","jira/util/data/meta","jira/util/formatter"],function(e,f,c,g,h){function k(a){return(a.ctrlKey||c.isMac()&&a.metaKey)&&(13===a.keyCode||!c.isMac()&&10===a.keyCode)}function l(a){return d&&d===a.keyCode?m.every(function(b){return a[b]}):!1}var d=function(){var a="s";return a&&1===a.length?a.toUpperCase().charCodeAt(0):0}(),m=function(){return(g.get("keyboard-accesskey-modifier")||
"").split("+").map(function(a){return a.trim().toLowerCase()+"Key"})}();return{enable:function(a){a.getInstance().relayEvent("keydown",function(b){if(k(b)||l(b))b.preventDefault(),a.serialize().then(function(){f.sendEvent("editor.instance.submit");e(a.$textarea.prop("form")).submit()})},!0)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:schema-builder', location = 'js/editor-schema-builder.js' */
define("jira/editor/schema-builder",["jira/editor/tinymce","jquery","underscore","jira/util/logger"],function(n,l,d,f){function p(a,c,b){var e=(new n.html.Schema({schema:b})).elements;e.img.attributesRequired=["src"];e.img.attributes.imagetext={};e.img.attributesOrder.push("imagetext");return a.map(function(a){var b=e[a];if(!b)return!1;var d=b.removeEmptyAttrs?"!":"",k="";b.paddEmpty?k="#":b.removeEmpty&&(k="-");var q=b.attributesOrder.map(function(a){var c="";-1!==(b.attributesRequired||[]).indexOf(a)&&
(c="!");return c+a}).filter(function(a){return-1===c.indexOf(a)});return k+a+d+"["+q.join("|")+"]"}).filter(function(a){return!!a})}function r(a){return d.isArray(a)?d.every(a,function(a){return"string"===typeof a}):!1===a||void 0===a}function t(a){return d.isArray(a)?d.every(a,function(a){return"string"===typeof a}):void 0===a}var b=function(){this.noBreak=[];this.noNest=[];this.customElementChildren={};this.customElementAttrs={};this.validChildren=[];this.unwantedAttributes=[];this.extendedValidElements=
[];this.baseSchema="html5";this.validElements=[]};b.prototype.withCustomElement=function(a,c,b){if(!("string"===typeof a&&0<a.indexOf("-")))return f.error("Could not add custom element: incorrect `name` given:",a,"(see https://www.w3.org/TR/custom-elements/#valid-custom-element-name)"),this;if(!r(c))return f.error("Could not add custom element: incorrect `children` given:",c),this;if(!t(b))return f.error("Could not add custom element: incorrect `attributes` given:",b),this;!1===c?c=[]:void 0===c?
c=["p","#comment"]:c.push("#comment");b||(b=[]);this.customElementChildren[a]=d.uniq(c);this.customElementAttrs[a]=d.uniq(b);return this};b.prototype.withBaseSchema=function(a){this.baseSchema=a;return this};b.prototype.withValidElements=function(a){this.validElements=a;return this};b.prototype.withNoBreak=function(a){this.noBreak.push.apply(this.noBreak,a);return this};b.prototype.withNoSelfNest=function(a){this.noNest.push.apply(this.noNest,a.map(function(a){return[a,a]}));return this};b.prototype.setValidChildren=
function(a,b){this.validChildren.push(a+"["+b+"]");return this};b.prototype.withExtendedValidElements=function(a){this.extendedValidElements.push.apply(this.extendedValidElements,a);return this};b.prototype.withNoNest=function(a){this.noNest.push.apply(this.noNest,a);return this};b.prototype.withUnwantedAttributes=function(a){this.unwantedAttributes.push.apply(this.unwantedAttributes,a);return this};b.prototype.build=function(){function a(a,b){h.push("-"+a+"["+b+"]")}var b=this.baseSchema,e=[],h=
[],f=[],g=[],m={};this.noBreak.forEach(function(b){a(b,"br")});this.noNest.forEach(function(b){a.apply(null,b)});e.push.apply(e,Object.keys(this.customElementChildren));l.each(this.customElementChildren,function(a,b){m[a]=b.reduce(function(a,b){a[b]={};return a},{})});h.push.apply(h,this.validChildren);f=p(this.validElements,this.unwantedAttributes,b);g.push.apply(g,d.map(this.customElementAttrs,function(a,b){return b+(a.length?"["+a.join("|")+"]":"")}));g.push.apply(g,this.extendedValidElements);
return{getValidChildren:function(){return h.join(",")},getValidElements:function(){return f.join(",")},getExtendedValidElements:function(){return g.join(",")},getCustomElements:function(){return e.join(",")},getType:function(){return b},fixChildren:function(a){l.extend((a||{}).children,m)}}};return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:schema-builder', location = 'js/editor-supported-operations.js' */
define("jira/richeditor/editor-supported-operations",["underscore"],function(c){function b(a,d){var b={bold:["strong","b"],italic:["em","i"],underline:["ins","u"],"bullet-list":["li","ul"],"numbered-list":["li","ol"],paragraph:[],"paragraph-quote":["blockquote"],"block-quote":["blockquote"],monospace:["samp","tt","code"],"delete":["del"],superscript:["sup"],subscript:["sub"],color:["font"],icon:["img"],attachment:["a","img","sup"],code:["pre"],panel:["b"],noformat:["pre"],table:"table thead tbody tr th td tfoot caption colgroup col".split(" "),
undo:[],redo:[]};a=c.map(a,function(a){return b[a]||[a]});a.push(d||[]);d=c.flatten(a);return c.uniq(d)}var e="bold italic underline bullet-list numbered-list h1 h2 h3 h4 h5 h6 paragraph paragraph-quote block-quote monospace delete superscript subscript cite hr color icon attachment code panel noformat table undo redo".split(" "),f=b(e,["br","span","a","p","div"]);return{getWikiOperations:function(){return e},getRequiredHtmlTags:function(){return f},mapWikiOperationToHtmlTags:b}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:html-browser-converter', location = 'js/util/html-browser-converter.js' */
define("jira/editor/util/html-browser-converter",[],function(){return{convert:function(b){if(!b)return"";try{const a=document.createElement("template");a.innerHTML=b;return a.innerHTML}catch(a){return""}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:schema', location = 'js/editor-schema.js' */
define("jira/editor/schema","jira/editor/schema-builder jira/richeditor/editor-supported-operations jira/editor/tinymce jira/editor/util/html-browser-converter jira/util/formatter jira/featureflags/feature-manager jquery".split(" "),function(h,n,e,p,q,r,k){function t(a,b){return`<span
                    title="${"Bidirectional characters change the order that text is rendered. This could be used to obscure malicious code."}"
                    contenteditable="false"
                    class="bidi-unicode"
                    data-bidi-character-code="${b.charCodeAt(0).toString(16).padStart(4,"0").toUpperCase()}"
                >${b}</span>`}function l(a,b){"textContent"in document.body&&(a=a.replace(/(<br>|<br \/>)/g,"\n"));a=k("\x3cdiv\x3e").addClass("richeditor-sanitize").append(a)[0];a=AJS.escapeHTML(a.textContent||a.innerText);const d=r.isFeatureEnabled("jira.richeditor.bidi.warning");return b&&d?a.replace(/([\u2066-\u2069\u202A-\u202E])/g,t):a}var m="strong b em i tt code samp sub sup del cite panel-title".split(" "),u=[["td","table"],["th","table"],["td","p"],["th","p"]],f=[],v=["strong/b"];f.push("xml:lang");
f.push("xml:space");var g={getSchemaSpecBuilder:function(a){void 0===a&&(a=new h);return a.withValidElements(n.getRequiredHtmlTags()).withNoBreak(m).withNoSelfNest(m).withNoNest(u).withUnwantedAttributes(f).withExtendedValidElements(v).withCustomElement("panel-title",["span","#text"],["style"]).setValidChildren("pre","br|span|#text|pre|p|panel-title")},getPasteSchemaSpecBuilder:function(a){void 0===a&&(a=g.getSchemaSpecBuilder());return a.withUnwantedAttributes(["contenteditable"])},getPasteInsidePreSchemaSpecBuilder:function(a){void 0===
a&&(a=new h);return a.withValidElements(["br","span","p","pre"]).withUnwantedAttributes(["style"])},getSchemaFromSpec:function(a){var b=new e.html.Schema({schema:a.getType(),custom_elements:a.getCustomElements(),valid_children:a.getValidChildren(),valid_elements:a.getValidElements(),extended_valid_elements:a.getExtendedValidElements()});a.fixChildren(b);return b},sanitizeHtml:function(a,b,d){var c=k(b.selection.getStart()).add(b.selection.getEnd()).add(b.selection.getNode());a=p.convert(a);c.is("pre, pre \x3e *")&&
(a=c.clone().html(l(a,!0)).prop("outerHTML"));c.is("panel-title, panel-title \x3e *")&&(a=l(a,!1));c=g.getSchemaFromSpec(d);d=new e.html.DomParser(b.settings,c);b=new e.html.Serializer(b.settings,c);a=d.parse(a,{forced_root_block:void 0});return b.serialize(a)}};return g});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:i18n', location = '/js/editor-i18n.js' */
define("jira/editor/i18n",["jira/editor/tinymce"],function(a){a.addI18n("en",{Cut:"Cut","Header 2":"Header 2","Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":"Your browser doesn\u0027t support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.",Div:"Div",Paste:"Paste",Close:"Close",
"Font Family":"Font Family",Pre:"Pre","Align right":"Align right","New document":"New document",Blockquote:"Blockquote","Numbered list":"Numbered list","Increase indent":"Increase indent",Formats:"Formats",
Headers:"Headers","Select all":"Select all","Header 3":"Header 3",Blocks:"Blocks",Undo:"Undo",Strikethrough:"Strikethrough","Bullet list":"Bullet list","Header 1":"Header 1",Superscript:"Superscript",
"Clear formatting":"Clear formatting","Font Sizes":"Font Sizes",Subscript:"Subscript","Header 6":"Header 6",Redo:"Redo",Paragraph:"Paragraph",Ok:"Ok",Bold:"Bold",Code:"Code",
Italic:"Italic","Align center":"Align center","Header 5":"Header 5","Decrease indent":"Decrease indent","Header 4":"Header 4","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.",Underline:"Underline",
Cancel:"Cancel",Justify:"Justify",Inline:"Inline",Copy:"Copy","Align left":"Align left","Visual aids":"Visual aids","Lower Greek":"Lower Greek",Square:"Square",Default:"Default",
"Lower Alpha":"Lower Alpha",Circle:"Circle",Disc:"Disc","Upper Alpha":"Upper Alpha","Upper Roman":"Upper Roman","Lower Roman":"Lower Roman",Name:"Name",Anchor:"Anchor","You have unsaved changes are you sure you want to navigate away?":"You have unsaved changes are you sure you want to navigate away?",
"Restore last draft":"Restore last draft","Special character":"Special character","Source code":"Source code","Right to left":"Right to left","Left to right":"Left to right",Emoticons:"Emoticons",Robots:"Robots","Document properties":"Document properties",
Title:"Title",Keywords:"Keywords",Encoding:"Encoding",Description:"Description",Author:"Author",Fullscreen:"Fullscreen","Horizontal line":"Horizontal line","Horizontal space":"Horizontal space","Insert/edit image":"Insert/edit image",
General:"General",Advanced:"Advanced",Source:"Source",Border:"Border","Constrain proportions":"Constrain proportions","Vertical space":"Vertical space","Image description":"Image description",Style:"Style",
Dimensions:"Dimensions","Insert image":"Insert image","Insert date/time":"Insert date/time","Remove link":"Remove link",Url:"Url","Text to display":"Text to display",Anchors:"Anchors","Insert link":"Insert link",
"New window":"New window",None:"None","The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":"The URL you entered seems to be an external link. Do you want to add the required http:// prefix?",Target:"Target","The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?","Insert/edit link":"Insert/edit link",
"Insert/edit video":"Insert/edit video",Poster:"Poster","Alternative source":"Alternative source","Paste your embed code below:":"Paste your embed code below:","Insert video":"Insert video",Embed:"Embed","Nonbreaking space":"Nonbreaking space","Page break":"Page break",
"Paste as text":"Paste as text",Preview:"Preview",Print:"Print",Save:"Save","Could not find the specified string.":"Could not find the specified string.",Replace:"Replace",Next:"Next","Whole words":"Whole words",
"Find and replace":"Find and replace","Replace with":"Replace with",Find:"Find","Replace all":"Replace all","Match case":"Match case",Prev:"Prev",Spellcheck:"Spellcheck",Finish:"Finish","Ignore all":"Ignore all",
Ignore:"Ignore","Insert row before":"Insert row before",Rows:"Rows",Height:"Height","Paste row after":"Paste row after",Alignment:"Alignment","Column group":"Column group",Row:"Row","Insert column before":"Insert column before",
"Split cell":"Split cell","Cell padding":"Cell padding","Cell spacing":"Cell spacing","Row type":"Row type","Insert table":"Insert table",Body:"Body",Caption:"Caption",Footer:"Footer","Delete row":"Delete row",
"Paste row before":"Paste row before",Scope:"Scope","Delete table":"Delete table","Header cell":"Header cell",Column:"Column",Cell:"Cell",Header:"Header","Cell type":"Cell type","Copy row":"Copy row",
"Row properties":"Row properties","Table properties":"Table properties","Row group":"Row group",Right:"Right","Insert column after":"Insert column after",Cols:"Cols","Insert row after":"Insert row after",Width:"Width",
"Cell properties":"Cell properties",Left:"Left","Cut row":"Cut row","Delete column":"Delete column",Center:"Center","Merge cells":"Merge cells","Insert template":"Insert template",Templates:"Templates",
"Background color":"Background color","Text color":"Text color","Show blocks":"Show blocks","Show invisible characters":"Show invisible characters","Words: {0}":"Words: {0}",Insert:"Insert",File:"File",Edit:"Edit",
"Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"Content editor",Tools:"Tools",View:"View",Table:"Table",Format:"Format"})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:wrm', location = 'js/editor-wrm.js' */
define("jira/editor/wrm",["exports","wrm/data"],function(a,c){var b=c.claim("com.atlassian.jira.plugins.jira-editor-plugin:wrm.editor-data")||{};a.isAttachmentsAllowed=function(){return b.allowedAttachments};a.getResources=function(){return b.resources};a.getConverters=function(){return b.converters}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter-util', location = '/js/converter/util/color-converter.js' */
define("jira/editor/converter/util/color-converter",["exports"],function(b){b.colorToHex=function(a){if("#"===a.substr(0,1))return a;a=/(.*?)rgb\((\d+), (\d+), (\d+)\)/.exec(a);var b=[a[2],a[3],a[4]].map(function(a){return("00"+parseInt(a).toString(16)).slice(-2)});return a[1]+"#"+b.join("")}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter-util', location = '/js/converter/util/strings.js' */
define("jira/editor/converter/util/strings",["jira/editor/util/strings","exports","jquery","underscore"],function(g,c,f,d){c.asBooleanOrString=function(a){var b=a?a.toLowerCase():"";"true"===b?a=!0:"false"===b&&(a=!1);return a};c.startsWith=function(a,b){return d.isEmpty(a)||d.isEmpty(b)?!1:0===a.indexOf(b)};c.endsWith=function(a,b){return d.isEmpty(a)||d.isEmpty(b)?!1:a.indexOf(b)+b.length===a.length};c.substringAfter=function(a,b){if(d.isEmpty(a))return a;if(d.isEmpty(b))return"";var c=a.indexOf(b);
return 0>c?"":a.substring(c+b.length)};c.substringBefore=function(a,b){if(d.isEmpty(a))return a;if(d.isEmpty(b))return"";b=a.indexOf(b);return 0>b?"":a.substring(0,b)};c.contains=function(a,b){return d.isEmpty(a)?!1:0<=a.indexOf(b)};c.repeat=function(a,b){return d.isEmpty(a)?"":Array(b+1).join(a)};c.length=function(a){return d.isEmpty(a)?0:a.length};c.replace=function(a,b,c){if(d.isEmpty(a)||d.isEmpty(b))return"";"undefined"===typeof c&&(c="");var e;for(e=a.indexOf(b);0<=e;){var h=a.substring(0,e);
a=a.substring(e+b.length);a=h+c+a;e+=c.length;e=a.indexOf(b,e)}return a.substring(e,a.length)};c.hashCode=function(a){var b=0;if(!a)return"";for(var c=0;c<a.length;c+=1){var d=a.charCodeAt(c);b=31*b+d;b|=0}return""+b};c.resolveUrl=function(a,b){if(a){b=f(document.createElement("base")).prop("href",b).appendTo("head");try{return f(document.createElement("a")).prop("href",a).prop("href")}finally{b.remove()}}};c.getBaseUrl=function(){return document.location.origin+document.location.pathname};c.getContextUrl=
function(){return document.location.origin+AJS.contextPath()};c.getFilenameFromHref=function(a,b){var c=a.split("/");a=c[c.length-1];b?(b=a.indexOf("_"),0<b&&(a=a.substring(b+1))):(b=c[c.length-2]+"_",0===a.indexOf(b)&&(a=a.substring(b.length)));a=a.replace(/\+/g," ");return decodeURIComponent(a)};c.isAttachmentPath=function(a){return c.contains(a,"/secure/attachment/")};c.isTemporaryAttachmentPath=function(a){return c.contains(a,"/secure/temporaryattachment/")};c.isThumbnailPath=function(a){return c.contains(a,
"/secure/thumbnail/")};c.isEmotePath=function(a){return c.contains(a,"/images/icons/emoticons/")};c.getFilenameFromError=function(a){return g.getFilenameFromError(a)}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter-util', location = '/js/converter/util/uri.js' */
define("jira/editor/converter/util/uri",["exports","atlassian/libs/uri-1.14.1"],function(b,c){b.decodeUri=function(a){return c.decodeQuery(a||"",!0)};b.encodeUri=function(a){return c.encodeQuery(a||"",!0)}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter-util', location = '/js/converter/util/rte-strings.js' */
define("jira/editor/converter/util/rte-strings",["exports","underscore"],function(exports,_){exports.isWhitespace=function(str){if(_.isEmpty(str))return false;var whitespaceMap={"\t":1,"\n":1," ":1,"\t":1,"\n":1,"\r":1,"\f":1,"\u200b":1};var onlyWhitespaces=true;_.each(str,function(ch){onlyWhitespaces=onlyWhitespaces&&ch in whitespaceMap});return onlyWhitespaces};exports.trim=function(str){if(_.isEmpty(str))return"";return this.trimLeading(this.trimTrailing(str))};exports.trimTrailing=function(str){if(_.isEmpty(str))return"";
var i;for(i=str.length-1;i>=0;i--)if(!this.isWhitespace(str[i]))break;return str.substring(0,i+1)};exports.trimLeading=function(str){if(_.isEmpty(str))return"";var i;for(i=0;i<str.length;i++)if(!this.isWhitespace(str[i]))break;return str.substring(i,str.length)};exports.parseHtml=function(html){var parser=new DOMParser;var dom=parser.parseFromString(html,"text/html").body;return dom}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:context-detector', location = 'js/context-detector.js' */
define("jira/editor/context-detector",["jira/editor/converter/util/rte-strings","underscore","jquery"],function(d,e,b){return{detectPre:function(a){return 0<b(a||{}).closest("pre,.code.panel,.preformatted.panel,.panelHeader,panel-title").length},detectTable:function(a){return 0<b(a||{}).closest("table").length},detectA:function(a){return 0<b(a||{}).closest("a").length},detectPreWithinSelection:function(a){try{var c=0<b((e.isString(a)?d.parseHtml(a):a)||{}).find("pre,.code.panel,.preformatted.panel,.panelHeader,panel-title").length}catch(f){c=
!1}return c}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:context-manager', location = 'js/context-manager.js' */
define("jira/editor/context-manager",["jira/editor/context-detector","jira/backbone-1.3.3","underscore-1.8.3"],function(d,e,c){var a=function(b){this._disableStates={all:null,table:null,a:null};this._tagList=c.difference(Object.keys(this._disableStates),"all");this._editorInstance=b;b.on("selection:update",function(b){var a=b.insidePreformatted||b.preformattedSelected;this._setDisable(a,"all");this._setDisable(a||b.insideTable,"table");this._setDisable(a||b.insideA,"a")}.bind(this));b.on("tabs:changed",
function(){this._setDisable(!1,"all");this._setDisable(!1,"table");this._setDisable(!1,"a")}.bind(this));c.extend(this,e.Events)};a.prototype._setDisable=function(b,a){this._disableStates[a]!==b&&(this._disableStates[a]=b,this.trigger("change:"+a,{disableState:b}),"all"===a&&this._tagList.forEach(function(a){this._setDisable(b,a)},this))};a.prototype.isPreContextActive=function(){return!0===this._disableStates.all};a.prototype.isContextActive=function(a){return!0===this._disableStates[a]};a.prototype.getPasteSchemaForContext=
function(){return d.detectPre(this._editorInstance.editor.selection.getNode())?this._editorInstance.pasteInsidePreSchemaSpec:this._editorInstance.pasteSchemaSpec};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:selection', location = 'js/editor-selection.js' */
define("jira/editor/selection",["jira/editor/constants"],function(h){function k(b,a){b=b.match(a);return null!==b?b[0]:""}var c=function(b){this.editor=b};c.prototype.trimSelection=function(){var b=!1,a=this.editor.selection.getRng();if(a.collapsed)return!1;if(!a.toString().trim())return a.collapse(!0),this.editor.selection.setRng(a),this.editor.focus(),!0;var e=a.startContainer,c=a.startOffset,f=a.endContainer,l=a.endOffset;if(e&&e.nodeType===Node.TEXT_NODE){var g=e.nodeValue.substring(c),d=k(g,
h.LEFT_WHITESPACE_MATCHER);d&&(b=!0,g.length===d.length?a.setStartAfter(e):a.setStart(e,c+d.length))}f&&f.nodeType===Node.TEXT_NODE&&(g=f.nodeValue.substring(0,l),d=k(g,h.RIGHT_WHITESPACE_MATCHER))&&(b=!0,g.length===d.length?a.setEndBefore(f):a.setEnd(f,l-d.length));b&&this.editor.selection.setRng(a);return b};c.prototype.hasSelection=function(){return!this.editor.selection.getRng().collapsed};return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:instance', location = 'js/editor-instance.js' */
define("jira/editor/instance","jira/dialog/dialog jira/editor/analytics jira/editor/analytics-shortcuts jira/util/navigator jira/editor/tinymce jira/editor/context-manager jira/editor/context-detector jira/editor/schema jira/editor/selection wiki-edit/SpeechRecognition wiki-edit/PhantomCaret jira/util/logger jquery jira/backbone-1.3.3 underscore-1.8.3 wrm/context-path".split(" "),function(h,d,q,e,m,r,g,t,u,v,k,f,n,w,l,x){var c=function(a,b){this.element=a;this.options=l.extend({},b)};l.extend(c.prototype,
w.Events);c.prototype.init=function(a){this.editor=a;this.operationOverride={};this.analyticsShortcuts=new q(this.editor);this.selection=new u(this.editor);this.editor.on("NodeChange",function(a){var b=d.startMeasure();a&&("img"===a.element.nodeName.toLowerCase()&&this.editor.fire("content"),a=n(a.element),this.trigger("selection:update",{insidePreformatted:g.detectPre(a),preformattedSelected:g.detectPreWithinSelection(this.editor.selection.getContent()),insideTable:g.detectTable(a),insideA:g.detectA(a)}),
b.measure("nodechange"))}.bind(this));this.editor.on("change SetContent blur",this._onChange.bind(this));this.editor.on("keyup",l.debounce(this._onChange.bind(this),1E3));this.editor.on("init",function(a){a=a.target.formatter.get("removeformat");0<a.length&&"object"===typeof a[0]&&(a[0].selector+=",tt")});this.editor.on("input click",function(){const b=a.selection.getRng().getBoundingClientRect();k.setPhantomCaretPosition(b.top);k.setCaretHeight(b.height);k.mountPhantomCaret(a.contentAreaContainer.closest(".wiki-edit-content"))});
a.on("keydown",function(b){if(!b.isDefaultPrevented()){var c=n(a.selection.getStart());b.keyCode!==m.util.VK.ENTER||b.shiftKey||!c.is("th, td, th *, td *")||c.is("li")||(b.preventDefault(),a.execCommand("InsertLineBreak",!1,b));h.current&&27===b.keyCode&&h.current.hide(!0,{reason:h.HIDE_REASON.cancel});b.keyCode===m.util.VK.ENTER&&(c.is("panel-title, panel-title *")||c.parent().hasClass("panelHeader"))&&b.preventDefault()}});d.sendEvent("editor.instance.init");d.sendEvent("bundled.editor.instance.init");
var b=/(Edge)\/(\d+)\.(\d+)/.test(e._getUserAgent())?"edge":e.isIE()?"ie":e.isChrome()?"chrome":e.isMozilla()?"firefox":e.isSafari()?"safari":"";b&&d.sendEvent("editor.instance.init."+b);this.contextManager=new r(this);a.contextManager=this.contextManager};c.prototype.getId=function(){return this.editor.id};c.prototype.relayEvent=function(a,b,c){this.editor.on(a,function(a){b(a)},c)};c.prototype.getAllowedOperations=function(){return"paragraph h1 h2 h3 h4 h5 h6 monospace paragraph-quote block-quote delete superscript subscript cite monospace-inline :) :( :P :D ;) (y) (n) (i) (/) (x) (!) (+) (-) (?) (on) (off) (*) (*r) (*g) (*b) (*y) bold italic underline color bullet-list numbered-list mention table code noformat panel hr speech link link-mail link-anchor link-attachment image image-attachment attachment editorInsertContent editorInsertContentInNewLine editorReplaceContent editorReplaceContentInNewLine".split(" ")};
c.prototype._isOperationSupported=function(a){return 0<this.getAllowedOperations().filter(function(b){return b instanceof Object?b.name===a:b===a}).length};c.prototype._assertOperationIsSupported=function(a){this._isOperationSupported(a)||f.error("Operation not supported:",a)};c.prototype._selectedTextSanitized=function(){return t.sanitizeHtml(this.editor.selection.getContent(),this.editor,this.pasteInsidePreSchemaSpec)};c.prototype.executeOperation=function(a,b){this._assertOperationIsSupported(a);
var c=this._mapOperationNameToTinymce(a),p=this.operationOverride[a];if(p)return d.sendEvent("editor.instance.operation."+a),p(b),!0;if("editorReplaceContentInNewLine"===a)this.editor.execCommand("mceReplaceContent",!1,"\x3cbr /\x3e"+b.content);else if("editorReplaceContent"===a)this.editor.execCommand("mceReplaceContent",!1,b.content);else if("editorInsertContentInNewLine"===a)this.editor.insertContent("\x3cbr /\x3e"+b.content);else if("editorInsertContent"===a)this.editor.insertContent(b.content);
else if("hr"===a)this.editor.insertContent("\x3chr /\x3e");else if("color"===a)this.editor.execCommand("ForeColor",!0,b);else if(-1<"h1 h2 h3 h4 h5 h6 paragraph paragraph-quote block-quote monospace monospace-inline cite".split(" ").indexOf(a))this.editor.execCommand("mceToggleFormat",!0,c);else if(-1<"bold italic underline delete superscript subscript".split(" ").indexOf(a)){if(this.selection.trimSelection())if(this.selection.hasSelection())d.sendEvent("editor.instance.selection.trimmed",{op:a});
else return d.sendEvent("editor.instance.selection.collapsed",{op:a}),!1;this.editor.execCommand(c,!0)}else if(-1<["bullet-list","numbered-list"].indexOf(a))this.editor.execCommand(c,!0);else if(this._emoticonSourceMap(a))b=(AJS&&AJS.contextPath?AJS.contextPath():"")+"/images/icons/emoticons/"+this._emoticonSourceMap(a),this.editor.insertContent('\x3cimg class\x3d"emoticon" src\x3d"'+b+'" height\x3d"16" width\x3d"16" align\x3d"absmiddle" alt\x3d"" border\x3d"0"\x3e');else if("link"===a)b=this._selectedTextSanitized()||
"link title",this.editor.selection.setContent("["+b+"|http://example.com]");else if("link-anchor"===a)b=this._selectedTextSanitized()||"anchor",this.editor.selection.setContent("[#"+b+"]");else if("link-mail"===a)b=this._selectedTextSanitized()||"mail@example.com",this.editor.selection.setContent("[mailto:"+b+"]");else if("mention"===a)b=this._selectedTextSanitized()||"Mention someone by typing their name...",
this.editor.selection.setContent("@"),c=this.getSelectionStart(),this.editor.selection.setContent(b),this.setSelectionStartWithOffset(c,1);else if("attachment"===a&&b.attachment)"image"===b.attachment.type?(c=b.attachment.href||x()+"/images/icons/attach/image.gif",b.attachment.thumbnailable&&(c=c.replace("/attachment/","/thumbnail/")),b=JIRA.Editor.Tags.Templates.attachedImage({source:c,filename:b.attachment.name})):b=JIRA.Editor.Tags.Templates.attachedFile({title:b.attachment.name,href:b.attachment.href,
filename:b.attachment.name}),this.editor.insertContent(b);else if("code"===a)b=this._selectedTextSanitized()||"// code placeholder"+"\n",this.editor.selection.setContent('\x3cpre class\x3d"code panel" data-language\x3d"code-java"\x3e'+b+"\x3c/pre\x3e");else if("panel"===a)b=this.editor.selection.getContent()||"Some text with a title",this.editor.selection.setContent('\x3cdiv class\x3d"plain panel" style\x3d"border-width: 1px;"\x3e\x3cpanel-title\x3e'+
"My title"+"\x3c/panel-title\x3e\x3cp\x3e"+b+"\x3c/p\x3e\x3c/div\x3e");else if("noformat"===a)b=this._selectedTextSanitized()||"*no* further _formatting_ is done here",this.editor.selection.setContent('\x3cpre class\x3d"noformat panel"\x3e'+b+"\x3c/pre\x3e");else if("table"===a)b=this.editor.selection.getContent()||"Col"+" A1",this.editor.selection.setContent('\x3cdiv class\x3d"table-wrap"\x3e\x3ctable class\x3d"confluenceTable mce-item-table" data-mce-selected\x3d"1"\x3e\x3ctbody\x3e\x3ctr\x3e\x3cth class\x3d"confluenceTh"\x3e'+
"Heading"+' 1\x3c/th\x3e\x3cth class\x3d"confluenceTh"\x3e'+"Heading"+' 2\x3c/th\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd class\x3d"confluenceTd"\x3e'+b+'\x3c/td\x3e\x3ctd class\x3d"confluenceTd"\x3eCol A2\x3c/td\x3e\x3c/tr\x3e\x3c/tbody\x3e\x3c/table\x3e\x3c/div\x3e'),d.sendEvent("editor.instance.table.toolbar");else if("speech"===a)v.start(null,this);else return-1<["link-attachment",
"image","image-attachment"].indexOf(a)?f.warn("Not supported yet "+a):f.warn("Unsupported operation "+a),!1;d.sendEvent("editor.instance.operation."+a);this.trigger("content");f.trace("jira.editor.operation.executed");return!0};c.prototype._mapOperationNameToTinymce=function(a){var b={bold:"Bold",italic:"Italic",underline:"Underline","bullet-list":"InsertUnorderedList","numbered-list":"InsertOrderedList",blockquote:"mceBlockQuote",paragraph:"p","paragraph-quote":"blockquote","block-quote":"blockquote",
monospace:"samp","monospace-inline":"samp-inline","delete":"strikethrough",superscript:"superscript",subscript:"subscript"};return a in b?b[a]:a};c.prototype._emoticonSourceMap=function(a){var b={":)":"smile.png",":(":"sad.png",":P":"tongue.png",":D":"biggrin.png",";)":"wink.png","(y)":"thumbs_up.png","(n)":"thumbs_down.png","(i)":"information.png","(/)":"check.png","(x)":"error.png","(!)":"warning.png","(+)":"add.png","(-)":"forbidden.png","(?)":"help_16.png","(on)":"lightbulb_on.png","(off)":"lightbulb.png",
"(*)":"star_yellow.png","(*r)":"star_red.png","(*g)":"star_green.png","(*b)":"star_blue.png","(*y)":"star_yellow.png","(flag)":"flag.png","(flagoff)":"flag_grey.png"};if(a in b)return b[a]};c.prototype.focus=function(){if(!this.editor.initialized||this.editor.removed||this.editor.destroyed)return f.warn("bypassing `editor-instance.focus` because the editor instance hasn't initialized yet or already removed"),this;this.editor.focus();this.editor.nodeChanged();return this};c.prototype.destroy=function(){this.editor.contextManager=
null;this.editor.remove();d.sendEvent("editor.instance.destroy");d.sendEvent("bundled.editor.instance.destroy")};c.prototype.setContent=function(a,b,c){var d={};b&&(d={format:"raw"});d.no_events=c;this.editor.setContent(a||"",d);this.lastContent=this.getContent();c||this.trigger("content")};c.prototype.replaceSelection=function(a){this.editor.selection.setContent(a);this.trigger("content")};c.prototype.selectAll=function(){this.editor.selection.select(this.editor.getBody(),!0)};c.prototype.getSelectionStart=
function(){return this.editor.selection.getRng()};c.prototype.setSelectionStart=function(a){var b=this.editor.selection.getRng();b.setStart(a.startContainer,a.startOffset);this.editor.selection.setRng(b)};c.prototype.setSelectionStartWithOffset=function(a,b){var c=this.editor.selection.getRng();c.setStart(a.startContainer.firstChild,b);this.editor.selection.setRng(c)};c.prototype.getContent=function(a){var b={};a&&(b={format:"raw"});return this.editor.getContent(b)};c.prototype._onChange=function(){if(!this.editor.destroyed){var a=
this.getContent(),b=a!==this.lastContent;this.lastContent=a;!this.hidden&&b&&this.trigger("content",this.getContent())}};c.prototype.getSelectedContent=function(a){return a?this.editor.selection.getContent({format:"text"}):this.editor.selection.getContent()};c.prototype.addShortcut=function(a,b){this.editor.addShortcut(a,"",b)};c.prototype.removeShortcut=function(a){this.editor.shortcuts.remove(a)};c.prototype.addOperationOverride=function(a,b){this._assertOperationIsSupported(a);this.operationOverride[a]=
b};c.prototype.removeOperationOverride=function(a){this._assertOperationIsSupported(a);delete this.operationOverrideoperationOverride[a]};c.prototype.hide=function(){this.hidden=!0;this.editor.hide()};c.prototype.show=function(){this.editor.show();delete this.hidden};c.prototype.isVisible=function(){return!this.editor.isHidden()};c.prototype.switchMode=function(a){this.trigger("switchMode",a)};c.prototype.enable=function(){this.editor.setProgressState(!1)};c.prototype.disable=function(){this.editor.setProgressState(!0)};
return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:instance', location = 'js/editor-resources.js' */
define("jira/editor/resources",["jira/editor/tinymce","jira/editor/wrm","wrm/require","jquery"],function(f,g,d,e){function h(b){return"object"===typeof b&&b.length?b.map(function(a){return a.replace(",","%2C")}):[]}var c={},k={};c.loadPlugins=function(b){b=b.filter(function(a){return a.resource}).map(function(a){f.PluginManager.urls[a.name]=a.resource;return"wr!"+a.resource});return 0<b.length?d(b):(new e.Deferred).resolve()};c.require=function(b){return d(b.filter(function(a){return!k[a]}).map(function(a){return"wr!"+
a}))};c.loadCssResources=function(){return(new e.Deferred).resolve(h(g.getResources())).promise()};return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:api', location = 'js/editor-create.js' */
define("jira/editor/create","jira/editor/instance jira/editor/resources jira/editor/schema jira/editor/customizer jira/editor/height-helper jira/util/navigator jira/editor/tinymce jquery underscore".split(" "),function(l,k,g,m,n,p,h,f,q){function r(a,c,e){var d=a.build();c.schema=d.getType();c.custom_elements=d.getCustomElements();c.valid_children=d.getValidChildren();c.valid_elements=d.getValidElements();c.extended_valid_elements=d.getExtendedValidElements();e.schemaSpec=d;e.pasteSchemaSpec=g.getPasteSchemaSpecBuilder(a).build();
e.pasteInsidePreSchemaSpec=g.getPasteInsidePreSchemaSpecBuilder().build()}var b=function(a){this.element=a;this.settings={toolbar:!1,menubar:!1,elementpath:!1};this.plugins=[]};b.prototype.build=function(){var a=new f.Deferred,c=this,e=new l(c.element),d=new n(this.element),b=q.extend(this.settings,{plugins:["autoresize","lists","table","help"],language:"en",content_style:p.isIE()?"body#tinymce {min-height: 10px}":"",autoresize_on_init:!0,resize:!0,max_height:d.getMaxHeight()+-2,min_height:d.getMinHeight()+
-2,autoresize_bottom_margin:0,allow_conditional_comments:!1,object_resizing:"img:not(.emoticon)",end_container_on_empty_block:!0,browser_spellcheck:!0,table_toolbar:"tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",hidden_input:!1,target:this.element,autoresize_overflow_padding:8,relative_urls:!1,convert_urls:!1,branding:!1,formats:{underline:[{inline:"ins",remove:"all"},{inline:"u",remove:"all"},{inline:"span",styles:{textDecoration:"underline"},
exact:!0}],strikethrough:[{inline:"del",remove:"all"},{inline:"strike",remove:"all"},{inline:"span",styles:{textDecoration:"line-through"},exact:!0}]},setup:function(b){a.notify(e);e.init(b);b.on("init",function(){b.getContainer().classList.add("jira-editor-container");e.schemaSpec.fixChildren(b.schema);if(this.settings&&this.settings.target){var c=this.settings.target.$textarea.attr("id");c&&(c=f("label[for\x3d"+c+"]").text())&&this.$().attr("aria-label",c+", "+this.$().attr("aria-label"))}a.resolve(e)});
b.on("focus",function(){f(c.element).trigger("click").trigger("focusin")})}});f.when(k.loadCssResources(),k.loadPlugins(this.plugins)).then(function(c){this.plugins.forEach(function(a){require(a.name).configure(e,b)},this);var d=g.getSchemaSpecBuilder();m.getCustomizeSettingCallbacks().forEach(function(a){a(b,h,d)});r(d,b,e);b.content_css=c;"interactive"===document.readyState&&(h.dom.EventUtils.Event.domLoaded=!0);document.body.contains(this.element)?h.init(b):a.reject()}.bind(this));return a.promise()};
b.prototype.withElement=function(a){this.element=a;return this};b.prototype.withPlugin=function(a,b){this.plugins.push({name:a,resource:b});return this};b.prototype.withMeta=function(a){this.meta=a;return this};return{builder:function(a){return new b(a)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:renderer', location = '/js/converter/html-renderer.js' */
define("jira/editor/html-renderer",["wrm/context-path","jquery","underscore"],function(c,d,e){return{renderMarkup:function(a,b){b=b||{};a=e.extend({rendererType:"atlassian-wiki-renderer",unrenderedMarkup:a,forWysiwyg:!0},b);return d.ajax({url:c()+"/rest/api/1.0/render",contentType:"application/json",type:"POST",data:JSON.stringify(a),dataType:"html"})}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:mentions', location = 'js/plugins/mentions/mentions-util.js' */
define("jira/editor/plugins/mentions/mentions-util",["jquery","underscore"],function(f,g){return{isMentionNode:function(a){return a?f(a).is("a.user-hover"):!1},isCaretAfterMention:function(a){return null!=this.getMentionBeforeCaret(a)},getMentionBeforeCaret:function(a){a=this.getPreviousNode(a).node;return this.isMentionNode(a)?a:null},getPreviousNode:function(a){var c=function(a){if(a.nodeType===Node.TEXT_NODE)return a.nodeValue.length;if(a.nodeType===Node.ELEMENT_NODE)return a.childNodes.length},
b=a.getSelection();a=b.anchorNode;var d=b.anchorOffset,e={node:a,offset:b.anchorOffset};if(b.isCollapsed&&a)if(a.nodeType===Node.ELEMENT_NODE&&a.childNodes){if(d=b.anchorOffset-1,0>d?(a=a.childNodes[0],b=this._getPreviousSiblingSkipEmptyTextNodes(a,0)):(b=d===a.childNodes.length-1,a=a.childNodes[d],d=c(a),b=this._getPreviousSiblingSkipEmptyTextNodes(a,d,b)),b)return{node:b,offset:c(b)}}else if(a.nodeType===Node.TEXT_NODE&&(b=this._getPreviousSiblingSkipEmptyTextNodes(a,d)))return{node:b,offset:b===
a?d:c(b)};return e},_getPreviousSiblingSkipEmptyTextNodes:function(a,c,b){for(b=b||!1;(b=this._isContentBeforeCursorEmpty(a,c,b)).outcome;)a=a.previousSibling,c=void 0,b=b.relaxed;return a},_isContentBeforeCursorEmpty:function(a,c,b){var d={outcome:!0,relaxed:!1},e={outcome:!0,relaxed:!0};if(a&&a.nodeType===Node.TEXT_NODE){g.isUndefined(c)&&(c=a.nodeValue.length);if(0===c||1===c&&this._isEmptyCharacter(a.nodeValue.charCodeAt(0))&&1===a.nodeValue.length)return d;if(b&&1===c&&" "===a.nodeValue)return e}return{outcome:!1,
relaxed:!1}},_isEmptyCharacter:function(a){return 8203===a||65279===a},selectMention:function(a,c,b){c&&(c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation());b.selection.select(a)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:mentions', location = 'js/plugins/mentions/mention.js' */
define("jira/editor/plugins/mentions/mention-rte",["jira/mention/mention-matcher","jquery","jira/mention/mention","underscore","jira/editor/plugins/mentions/mentions-util"],function(f,h,g,k,l){return g.extend({init:function(a,b,d,c){g.prototype.init.call(this,a,c);this.editor=b;this.skipProcessing=d},_replaceCurrentUserName:function(a,b){this._selectMentionText()&&this.editor.execCommand("mceInsertContent",!1,this._renderMentionLink(a,b))},_selectMentionText:function(){var a=this._getDocument(),b=
this._getSelection();if(b&&b.isCollapsed){var d=this._getNodeForUsernameRetrieval(),c=this._getPreviousSiblingsTextNodes(d.node);if(0<c.length){b=c[0];var e=c[c.length-1];d=d.offset;c=this._getStringFormPreviousSiblingsTextNodes(c,d);c=f.getLastWordBoundaryIndex(c,!0);a=a.createRange();a.setStart(b,c+1);a.setEnd(e,d);this.editor.selection.setRng(a);return!0}}else return!1},_renderMentionLink:function(a,b){return JIRA.Editor.Tags.Templates.mentionlink({username:a,displayname:b})},_getUserNameFromInput:function(){if(k.isFunction(this.skipProcessing)&&
this.skipProcessing())return null;var a=this._getSelection();if(a&&a.isCollapsed){a=this._getNodeForUsernameRetrieval();var b=this._getPreviousSiblingsTextNodes(a.node);a=this._getStringFormPreviousSiblingsTextNodes(b,a.offset);return this.currentUserName=f.getUserNameFromCurrentWord(a,a.length)}return null},_getStringFormPreviousSiblingsTextNodes:function(a,b){for(var d="",c=0;c<a.length;c+=1){var e=a[c];d=c===a.length-1?d+e.nodeValue.substring(0,b):d+e.nodeValue}return d},_getPreviousSiblingsTextNodes:function(a){var b=
[];if(a&&a.nodeType===Node.TEXT_NODE)for(;a;a=a.previousSibling)if(a.nodeType===Node.TEXT_NODE){if(b.unshift(a),0<=a.nodeValue.indexOf("@")||0<=a.nodeValue.indexOf("[~"))return b}else break;return[]},_getNodeForUsernameRetrieval:function(){return l.getPreviousNode(this._getDocument())},_getSelection:function(){if(this.$textarea){var a=this.$textarea.get(0);if(a&&a.ownerDocument)return a.ownerDocument.getSelection()}return null},_getDocument:function(){return this.$textarea.get(0).ownerDocument},_getOffsetTarget:function(){return h(this.editor.getContainer())}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:mentions-plugin', location = 'js/plugins/mentions/jira-mentions-plugin.js' */
define("jira/editor/plugins/mentions/jira-mentions",["jira/editor/tinymce","jquery","jira/editor/plugins/mentions/mention-rte","jira/editor/plugins/mentions/mentions-util"],function(e,d,h,f){var g={9:"Tab",13:"Return",27:"Esc",38:"Up",40:"Down"},k=function(b){var a=new d.Event("aui:keydown");a.key=g[b.which];a.shiftKey=b.shiftKey;a.ctrlKey=b.ctrlKey;a.altKey=b.altKey;a.target=b.target;arguments[0]=a;d.event.trigger(a,arguments,document,!0)},l=function(b,a){var c=a.$textarea.get(0).ownerDocument;a.mentioningInProgress=
!1;a.layerController.bind("showLayer",function(){a.mentioningInProgress=!0}).bind("hideLayer",function(){a.mentioningInProgress=!1});b.on("keydown",function(b){if(b.which in g&&!0===a.mentioningInProgress)b.preventDefault(),b.stopPropagation(),k(b);else if(8===b.keyCode&&f.isCaretAfterMention(c)){var d=f.getMentionBeforeCaret(c);f.selectMention(d,b,this)}},!0)};e.create("tinymce.plugins.jira.JiraMentions",{init:function(b){var a=b.settings;if(a.jiramentions.mentionable)b.on("init",function(){var c=
b.getBody(),e=function(){var a=b.selection.getSel();if((a=a?d(a.anchorNode):null)&&(0<a.parents("pre").length||0<a.parents("div.panelHeader,panel-title").length))return!0},f=a.jiramentions.issuekey,g=a.jiramentions.projectkey;d(c).attr("data-issuekey",f);d(c).attr("data-projectkey",g);c._controller||(c._controller=new h(f,b,e,a.jiramentions.useNewEndpoint));c._controller.textarea(c);l(b,c._controller)})}});e.PluginManager.add("jira.jiramentions",e.plugins.jira.JiraMentions);e.PluginManager.urls["jira.jiramentions"]=
!0;return{configure:function(b,a){a.plugins.push("jira.jiramentions");var c=b.element.$textarea.data();a.jiramentions={issuekey:c.issuekey,projectkey:c.projectkey,mentionable:b.element.$textarea.hasClass("mentionable"),useNewEndpoint:c.useNewEndpoint}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:polyfil-string-ends-with', location = '/js/polyfills/stringEndsWithPolyfill.js' */
String.prototype.endsWith||(String.prototype.endsWith=function(b,a){if(void 0===a||a>this.length)a=this.length;return this.substring(a-b.length,a)===b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:resources', location = 'js/plugins/paste-plugin.js' */
define("jira/editor/plugins/paste","jira/editor/tinymce jira/editor/converter/util/strings jira/editor/schema jira/editor/analytics jquery wrm/context-path dndattachment/ctrlv/utility dndattachment/ctrlv/base64decode jira/editor/wrm jira/flag jira/util/formatter".split(" "),function(f,h,w,g,l,x,m,y,n,q,r){var z=n.isAttachmentsAllowed();f.create("tinymce.plugins.jira.Paste",{});f.PluginManager.add("jira.paste",f.plugins.jira.Paste);f.PluginManager.urls["jira.paste"]=!0;return{configure:function(e,
d){function f(b){var a=e.editor;if(a&&a.editorUpload&&a.editorUpload.blobCache)return a.editorUpload.blobCache.getByUri(b)}function p(b,a){b=m.convertBlobToImage(b,a);m.dropFileToElement(b,e.element.$textarea)||(console.warn("Uploading attachment failed. Check 'allow attachment' setting."),q.showWarningMsg("","Adding attachments is not supported for this screen.",{close:"auto"}),e.editor.dom.remove(e.editor.dom.select('img[data-filename\x3d"'+a+'"]')))}function n(b,a){var c=new XMLHttpRequest;
c.open("GET",b,!0);c.responseType="blob";c.onload=function(b){p(this.response,a)};c.send()}var A={upload:function(){}},t={upload:function(b,a){g.sendEvent("editor.instance.paste.addimage.nocache.http");n(b,a)}},u={upload:function(b,a){g.sendEvent("editor.instance.paste.addimage.nocache.image");a:{if(b){var c=b.split(",")[0].split(":");if(1<c.length){c=c[1].split(";")[0];break a}}c=void 0}c=c||"image/png";p(new Blob([y.decodeBase64DataUri(b)],{type:c}),a)}},v={upload:function(b,a){(b=f(b,e.editor))?
(g.sendEvent("editor.instance.paste.addimage.cache"),p(b.blob(),a)):console.warn("no cached blob found in cache")}};d.plugins.push("paste");d.paste_data_images=!0;d.paste_preprocess=function(b,a){b=e.contextManager.getPasteSchemaForContext();a.content=w.sanitizeHtml(a.content,e.editor,b)};d.paste_postprocess=function(b,a){g.sendEvent("editor.instance.paste");b=l(a.node).find("img:first-child:last-child");if(1===b.length&&b.is("img"))if(a=b[0].src,b.hasClass("emoticon")&&h.startsWith(a,document.location.origin+
x()+"/images/icons/emoticons/"))g.sendEvent("editor.instance.paste.emoticon");else{g.sendEvent("editor.instance.paste.image");var c=a;if(h.isAttachmentPath(a)||h.isThumbnailPath(a))c=h.getFilenameFromHref(a);var d={source:a,filename:c,width:b.attr("width"),height:b.attr("height"),id:b.attr("id"),vspace:b.attr("vspace")};var k=f(a,e.editor)?v:a.match(/^((data|blob):http)|(blob:)/)?t:a.match(/^(data|blob):image/)?u:A;k===u||k===t||k===v?z?(c=m.generateFileName()+".png",k.upload(a,c),d.filename=c,a=
JIRA.Editor.Tags.Templates.image(d),b.replaceWith(l(a))):(q.showWarningMsg("","Adding attachments has been disabled by your Jira administrator.",{close:"auto"}),b.remove()):(a=JIRA.Editor.Tags.Templates.image(d),b.replaceWith(l(a)))}else g.sendEvent("editor.instance.paste.other")};return d}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:resources', location = 'js/plugins/wiki-autoformat/wiki-autoformat-plugin.js' */
define("jira/editor/plugins/wiki-autoformat","jira/editor/tinymce jira/editor/analytics jquery jira/util/version jira/featureflags/feature-manager jira/editor/html-renderer jira/util/logger jira/editor/converter/handlers/bidi-unicode-to-span-handler".split(" "),function(m,h,l,y,r,z,A,B){function u(c){return l("\x3cdiv\x3e\x3c/div\x3e").append(c.cloneNode(!0)).html()}function C(c,a,f){if(!a)throw Error("text node is null");a.nodeType!==Node.TEXT_NODE&&(a=a.childNodes[f-1],f=a.length);for(;a&&a.nodeType===
Node.TEXT_NODE;a=a.previousSibling){-1===f&&(f=a.nodeValue.length);if(f>c)return{container:a,offset:f-c};if(f===c){f=0;for(c=a.parentNode;a=a.previousSibling;)f++;return{container:c,offset:f}}c-=f;f=-1}return null}function v(c){if(!c||!c.collapsed)throw Error("range is null or not collapsed");var a=c.startContainer;var f=c.startOffset;if(a.nodeType===Node.ELEMENT_NODE&&0<f)if(a=a.childNodes[c.startOffset-1],a.nodeType===Node.TEXT_NODE)f=a.nodeValue.length;else return"";else if(a.nodeType!==Node.TEXT_NODE)return"";
c=a.nodeValue.substring(0,f);for(a=a.previousSibling;a&&a.nodeType===Node.TEXT_NODE;a=a.previousSibling)c=a.nodeValue+c;return c}function k(c,a,f,d="",b=!1){return{handles:function(a,f){"string"===typeof d?d=[d]:d&&d.length||(d=[]);f=a.selection.getRng();if(!f.collapsed)return!1;a=a.contextManager;var e=a.isPreContextActive();if(b&&!e||!b&&e)return h.sendEvent("editor.instance.autoformat.prevented",{context:"pre"}),!1;e=0;for(var n=d.length;e<n;++e)if(a.isContextActive(d[e]))return h.sendEvent("editor.instance.autoformat.prevented",
{context:d[e]}),!1;return c.test(v(f))},execute:function(b,d){var e=1;var n=t(d);32===n?b.execCommand("mceInsertContent",!1,"\x26nbsp;"):b.execCommand("mceInsertContent",!1,String.fromCharCode(n));n=b.selection.getRng();var p=v(n);"|"===p[p.length-1]&&(p+=" ",e=0);p=c.exec(p.substring(0,p.length-1));e=C(p[1].length+e,n.commonAncestorContainer,n.startOffset);n.setStart(e.container,e.offset);l(n.commonAncestorContainer);b.selection.setRng(n);a(p,b.selection.getRng(),d);b.selection.getRng();if(f)return d.preventDefault(),
d.stopPropagation(),m.dom.Event.cancel(d),!1}}}function D(c,a,f,d="",b=!1){return{handles:function(a,f){"string"===typeof d?d=[d]:d&&d.length||(d=[]);var e=a.contextManager;a=l(a.selection.getStart()).add(a.selection.getEnd()).add(a.selection.getNode());a=e.isPreContextActive()&&a.is("pre, pre \x3e *");if(b&&!a||!b&&a)return h.sendEvent("editor.instance.autoformat.prevented",{context:"pre"}),!1;a=0;for(var n=d.length;a<n;++a)if(e.isContextActive(d[a]))return h.sendEvent("editor.instance.autoformat.prevented",
{context:d[a]}),!1;return f===c},execute:function(c,b){var e=t(b);32===e?c.execCommand("mceInsertContent",!1,"\x26nbsp;"):c.execCommand("mceInsertContent",!1,a(c,e));if(f)return b.preventDefault(),b.stopPropagation(),m.dom.Event.cancel(b),!1}}}function t(c){return"beforeinput"===c.type?c.data.charCodeAt(0):l.browser.msie?c.keyCode:c.which}function x(){this.handlers={}}function E(c){function a(a,b,p,f,g,h){a=a.charCodeAt(0);var e=AJS.contextPath()+"/images/icons/emoticons/"+g;b=k(b,function(){var a=
c.dom.createHTML("img",{src:e,alt:c.translate(f),title:m.translate(f),border:0,"class":"emoticon emoticon-"+p,"data-emoticon-name":p,align:"absmiddle"});c.execCommand("mceInsertContent",!1,a,{skip_undo:!0})},!0);this.imagePath=e;d.registerHandler(a,b)}function f(a,b){var e=c.formatter.get(a)[0];e=c.dom.create(e.inline,{style:e.styles,class:e.classes&&0<e.classes.length?e.classes.join(" "):""});e.appendChild(document.createTextNode(b+"{$caret}"));c.execCommand("mceInsertContent",!1,u(e),{skip_undo:!0});
c.formatter.remove(a)}var d=new x,b=y.isGreaterThanOrEqualTo("7.0")?"png":"gif";b=[new a(")",g._REGEXES_EMOTICON.SMILE,"smile","emotions_dlg.smile","smile."+b),new a("(",g._REGEXES_EMOTICON.SAD,"sad","emotions_dlg.sad","sad."+b),new a("P",g._REGEXES_EMOTICON.CHEEKY,"tongue","emotions_dlg.tongue","tongue."+b),new a("p",g._REGEXES_EMOTICON.CHEEKY_2,"cheeky","emotions_dlg.tongue","tongue."+b),new a("D",g._REGEXES_EMOTICON.LAUGH,"biggrin","emotions_dlg.biggrin","biggrin."+b),new a(")",g._REGEXES_EMOTICON.WINK,
"wink","emotions_dlg.wink","wink."+b),new a(")",g._REGEXES_EMOTICON.THUMBS_UP,"thumbs_up","emotions_dlg.thumbs_up","thumbs_up."+b),new a(")",g._REGEXES_EMOTICON.THUMBS_DOWN,"thumbs_down","emotions_dlg.thumbs_down","thumbs_down."+b),new a(")",g._REGEXES_EMOTICON.INFORMATION,"information","emotions_dlg.information","information."+b),new a(")",g._REGEXES_EMOTICON.TICK,"check","emotions_dlg.check","check."+b),new a(")",g._REGEXES_EMOTICON.CROSS,"error","emotions_dlg.error","error."+b),new a(")",g._REGEXES_EMOTICON.WARNING,
"warning","emotions_dlg.warning","warning."+b),new a(")",g._REGEXES_EMOTICON.PLUS,"add","emotions_dlg.add","add."+b),new a(")",g._REGEXES_EMOTICON.MINUS,"forbidden","emotions_dlg.forbidden","forbidden."+b),new a(")",g._REGEXES_EMOTICON.QUESTION,"help_16","emotions_dlg.help_16","help_16."+b),new a(")",g._REGEXES_EMOTICON.LIGHT_ON,"lightbulb_on","emotions_dlg.lightbulb_on","lightbulb_on."+b),new a(")",g._REGEXES_EMOTICON.LIGHT_OFF,"lightbulb","emotions_dlg.lightbulb","lightbulb."+b),new a(")",g._REGEXES_EMOTICON.YELLOW_STAR,
"star_yellow","emotions_dlg.star_yellow","star_yellow."+b),new a(")",g._REGEXES_EMOTICON.YELLOW_STAR_2,"star_yellow","emotions_dlg.star_yellow","star_yellow."+b),new a(")",g._REGEXES_EMOTICON.RED_STAR,"star_red","emotions_dlg.star_red","star_red."+b),new a(")",g._REGEXES_EMOTICON.GREEN_STAR,"star_green","emotions_dlg.star_green","star_green."+b),new a(")",g._REGEXES_EMOTICON.BLUE_STAR,"star_blue","emotions_dlg.star_blue","star_blue."+b),new a(")",g._REGEXES_EMOTICON.FLAG,"flag","emotions_dlg.flag",
"flag."+b),new a(")",g._REGEXES_EMOTICON.FLAG_OFF,"flag_grey","emotions_dlg.flag_grey","flag_grey."+b)];for(var w=[],q=0;q<b.length;q++)w[q]=new Image,w[q].src=b[q].imagePath;l.each({"*":"bold",_:"italic","~":"subscript","^":"superscript","+":"underline","-":"strikethrough"},function(a,c){var e=new RegExp("(?:[\\s\\xA0\\u200b\\uFEFF]+|^)(\\"+a+"(?\x3d[^\\s"+a+"])([^"+a+"]*?[^\\s]))$");d.registerHandler(a.charCodeAt(0),k(e,function(a){f(c,a[2]);h.sendEvent("editor.instance.autoformat.format")},!0))});
c.formatter.register("samp-inline",{inline:"span",classes:"monospace"});b=/(?:[\s\xA0\u200b]+|^)({{(?=[^\s])([^}]*?[^\s])})$/;r.isFeatureEnabled("jira.renderer.consider.variable.format")&&(b=/(?:^|[^$])(?:[\s\xA0\u200b]+|^)({{(?=[^\s])([^}]*?[^\s])})$/);d.registerHandler(125,k(b,function(a){f("samp-inline",a[2]);h.sendEvent("editor.instance.autoformat.inlinecode")},!0));c.formatter.register("cite",{inline:"cite"});d.registerHandler(63,k(/(?:[\s\xA0\u200b]+|^)(\?\?(?=[^\s])([^\?]*?[^\s])\?)$/,function(a){f("cite",
a[2]);h.sendEvent("editor.instance.autoformat.cite")},!0));for(q=1;6>=q;q++)(function(a){d.registerHandler(32,k(new RegExp("^\\u200b?(h"+a+"\\.)$"),function(){c.execCommand("formatBlock",!1,"h"+a,{skip_undo:!0});h.sendEvent("editor.instance.autoformat.header")},!0))})(q);d.registerHandler(32,k(/^\u200b?(bq\.)$/,function(){c.execCommand("formatBlock",!1,"blockquote",{skip_undo:!0});h.sendEvent("editor.instance.autoformat.bq")},!0));d.registerHandler(32,k(/[^-]*[\s](\-\-\-?)$/,function(a){c.execCommand("mceInsertContent",
!1,2===a[1].length?"\u2013":"\u2014",{skip_undo:!0});h.sendEvent("editor.instance.autoformat.dash")},!1));b=k(/(([^\s-]+)(\-\-\-?)([^\s-]+))$/,function(a){c.execCommand("mceInsertContent",!1,a[2]+(2===a[3].length?"\u2013":"\u2014")+a[4],{skip_undo:!0})},!1);d.registerHandler(32,b);d.registerHandler(m.util.VK.ENTER,b);b=k(/^\u200b?(\-\-\-\-)$/,function(){c.execCommand("mceInsertContent",!1,"\x3chr /\x3e",{skip_undo:!0});h.sendEvent("editor.instance.autoformat.hr")},!0);d.registerHandler(32,b);d.registerHandler(m.util.VK.ENTER,
b);b=/(\{code)$/;r.isFeatureEnabled("jira.renderer.consider.variable.format")&&(b=/(?:^|[^$])(\{code)$/);d.registerHandler(125,k(b,function(){c.execCommand("mceInsertContent",!1,'\x3cdiv class\x3d"code panel" style\x3d"border-width: 1px;"\x3e\x3cdiv class\x3d"codeContent panelContent"\x3e\x3cpre class\x3d"code-java"\x3e{$caret} \x3c/pre\x3e\x3c/div\x3e\x3c/div\x3e');h.sendEvent("editor.instance.autoformat.code")},!0));b=/(\{panel)$/;r.isFeatureEnabled("jira.renderer.consider.variable.format")&&(b=
/(?:^|[^$])(\{panel)$/);d.registerHandler(125,k(b,function(){c.execCommand("mceInsertContent",!1,'\x3cdiv class\x3d"plain panel"\x3e\x3cpanel-title\x3e'+"My title"+"\x3c/panel-title\x3e\x3cp\x3e{$caret} \x3c/p\x3e\x3c/div\x3e");h.sendEvent("editor.instance.autoformat.panel")},!0));b=/(\{noformat)$/;r.isFeatureEnabled("jira.renderer.consider.variable.format")&&(b=/(?:^|[^$])(\{noformat)$/);d.registerHandler(125,k(b,function(){c.execCommand("mceInsertContent",
!1,'\x3cdiv class\x3d"preformatted panel" style\x3d"border-width: 1px;"\x3e\x3cdiv class\x3d"preformattedContent panelContent"\x3e\x3cpre\x3e{$caret} \x3c/pre\x3e\x3c/div\x3e\x3c/div\x3e');h.sendEvent("editor.instance.autoformat.noformat")},!0));d.registerHandler(m.util.VK.ENTER,k(/(^\u200b?\|\|\s*(?:[^|]*\s?\|\|\s?)+$)/,function(a){var b="\x3ctable class\x3d'confluenceTable'\x3e\x3ctr\x3e",e="",d=!0;a=l(a[1].slice(2,-2).split("||")).map(function(a){a=l.trim(this);d=d&&""===a;return a});d&&(a[0]=
"editor.autoformat.sampletext.firstcell");for(var f=0,g=a.length;f<g;f++)b+="\x3cth class\x3d'confluenceTh'\x3e"+a[f]+"\x3c/th\x3e",e+="\x3ctd class\x3d'confluenceTd'\x3e\x26#x200b;\x3c/td\x3e";c.execCommand("mceInsertContent",!1,b+("\x3c/tr\x3e\x3ctr\x3e"+e+"\x3c/tr\x3e\x3c/table\x3e"),{skip_undo:!0});c.selection.select(l(c.selection.getRng().commonAncestorContainer).parents("table").find(d?"th":"td")[0].childNodes[0]);l(c.selection.getRng().startContainer).parent().closest('[contenteditable\x3d"true"]').focus();
h.sendEvent("editor.instance.table.autoformat.plain")},!0,"table"));d.registerHandler(m.util.VK.ENTER,k(/(^\u200b?\|\s?(?:[^|]*\s?\|\s?)+$)/,function(a){var b="\x3ctable class\x3d'confluenceTable'\x3e\x3ctr\x3e",e=!0;a=l(a[1].slice(1,-1).split("|")).map(function(a){a=l.trim(this);e=e&&""===a;return a});e&&(a[0]="editor.autoformat.sampletext.firstcell");for(var d=0,f=a.length;d<f;d++)b+="\x3ctd class\x3d'confluenceTd'\x3e"+a[d]+"\x3c/td\x3e";c.execCommand("mceInsertContent",!1,b+
"\x3c/tr\x3e\x3c/table\x3e",{skip_undo:!0});e&&c.selection.select(l(c.selection.getRng().commonAncestorContainer).parents("table").find("td")[0].childNodes[0]);l(c.selection.getRng().startContainer).parent().closest('[contenteditable\x3d"true"]').focus();h.sendEvent("editor.instance.table.autoformat")},!0,"table"));l.each({"]":/(?:\s|^)((\[[^\[^\]]+))$/,"\r":/(?:\s|^)((\[[^\[^\]]+)(?:\]))$/," ":/(?:\s|^)((\[[^\[^\]]+)(?:\]))$/},function(a,b){d.registerHandler(a.charCodeAt(0),k(b,function(a,b){a=a[1]+
(a[1].endsWith("]")?"":"]");z.renderMarkup(a,c.settings.target.getRenderParams()).then(function(a){a=l((new DOMParser).parseFromString(a,"text/html").body).find("p").unwrap().html();c.execCommand("mceInsertContent",!1,a,{skip_undo:!0});h.sendEvent("editor.instance.autoformat.wikilink")})},!0))});b=k(/\b(((https?|ftp):\/\/|(www\.))[\w\.\$\-_\+!\*'\(\),/\?:@=&%#~;\[\]]+)$/,function(a){var b=c.dom.create("a",{href:a[3]?a[1]:"http://"+a[1]});b.appendChild(document.createTextNode(a[1]));c.execCommand("mceInsertContent",
!1,u(b),{skip_undo:!0});c.getDoc().execCommand("unlink",!1,{});h.sendEvent("editor.instance.autoformat.autolink")},!1,"a");d.registerHandler(32,b);d.registerHandler(m.util.VK.ENTER,b);b=k(/\b((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)$/i,
function(a){var b=c.dom.create("a",{href:"mailto:"+a[1]});b.appendChild(document.createTextNode(a[1]));c.execCommand("mceInsertContent",!1,u(b),{skip_undo:!0});c.getDoc().execCommand("unlink",!1,{})},!1,"a");d.registerHandler(32,b);d.registerHandler(m.util.VK.ENTER,b);b=function(a,b){a=k(a,function(a,d,e){a=b;e&&" "===e.key&&(e.preventDefault(),a=`${b} `);c.execCommand("mceInsertContent",!1,a,{skip_undo:!0});h.sendEvent("editor.instance.autoformat.quickcorrect")},!1);d.registerHandler(32,a);d.registerHandler(m.util.VK.ENTER,
a)};b(/(?:\b|^)(jira)$/i,"Jira");b(/(?:\b|^)(bitbucket|[Bb]itBucket)$/,"Bitbucket");b(/(?:\b|^)(atlassian)$/,"Atlassian");b(/(?:\b|^)([Hh]ipchat)$/,"HipChat");r.isFeatureEnabled("jira.richeditor.bidi.warning")&&(new B(c,d,D)).registerHandlers();c.on("keydown",function(a){var b=t(a);if(b===m.util.VK.ENTER)return d.executeHandlers(b,c,a)},!0);c.on("keypress",function(a){return d.executeHandlers(t(a),c,a)},!0);c.on("beforeinput",function(a){if(null!==a&&"insertText"===a.inputType)return d.executeHandlers(t(a),
c,a)},!0)}var g={_REGEXES_EMOTICON:{SMILE:/\B(:-?)$/,SAD:/\B(:-?)$/,CHEEKY:/\B(:-?)$/,CHEEKY_2:/\B(:-?)$/,LAUGH:/\B(:-?)$/,WINK:/\B(;-?)$/,THUMBS_UP:/\B(\(y)$/,THUMBS_DOWN:/\B(\(n)$/,INFORMATION:/\B(\(i)$/,TICK:/\B(\(\/)$/,CROSS:/\B(\(x)$/,WARNING:/\B(\(!)$/,PLUS:/\B(\(\+)$/,MINUS:/\B(\(-)$/,QUESTION:/\B(\(\?)$/,LIGHT_ON:/\B(\(on)$/,LIGHT_OFF:/\B(\(off)$/,YELLOW_STAR:/\B(\(\*)$/,YELLOW_STAR_2:/\B(\(\*y)$/,RED_STAR:/\B(\(\*r)$/,GREEN_STAR:/\B(\(\*g)$/,BLUE_STAR:/\B(\(\*b)$/,FLAG:/\B(\(flag)$/,FLAG_OFF:/\B(\(flagoff)$/,
HEART:/\B(<)$/,BROKEN_HEAR:/\B(<\/)$/}};x.prototype={registerHandler:function(c,a){this.handlers[c]||(this.handlers[c]=[]);this.handlers[c].push(a)},executeHandlers:function(c,a,f){var d=!0;l.each(this.handlers[c]||[],function(b,g){if(g.handles(a,c))return d=g.execute(a,f),A.trace("jira.editor.wiki.autoformatted"),!1});return d}};m.create("tinymce.plugins.jira.WikiAutoFormat",{init:function(c){c.on("init",function(){E(c)})}});m.PluginManager.add("jira.wikiautoformat",m.plugins.jira.WikiAutoFormat);
m.PluginManager.urls["jira.wikiautoformat"]=!0;return{configure:function(c,a){a.plugins.push("jira.wikiautoformat")}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:resources', location = 'js/plugins/wiki-autoformat/bidi-unicode-to-span-handler.js' */
define("jira/editor/converter/handlers/bidi-unicode-to-span-handler",["jira/util/formatter"],function(b){const c=[8294,8295,8296,8297,8234,8235,8236,8237,8238];class d{constructor(a,e,b){this.editor=a;this.handlerManager=e;this.handlerCreator=b}registerHandlers(){this.editor&&this.handlerManager&&this.handlerCreator&&c.forEach(a=>{this._biDiCharHandler(a)})}_getBiDiSpan(a){return this.editor.dom.createHTML("span",{contentEditable:"false",title:"Bidirectional characters change the order that text is rendered. This could be used to obscure malicious code.",
"class":"bidi-unicode","data-bidi-character-code":a.toString(16).padStart(4,"0").toUpperCase()},String.fromCharCode(a))}_biDiCharHandler(a){const b=this.handlerCreator(a,()=>this._getBiDiSpan(a),!0,"",!0);this.handlerManager.registerHandler(a,b)}}return d});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:resources', location = 'js/plugins/prevent-default-plugin.js' */
define("jira/editor/plugins/prevent-default",["jira/editor/tinymce","jquery"],function(a,d){a.create("tinymce.plugins.jira.PreventDefaultPlugin",{init:function(a){var c=a.settings;a.on("init",function(){var b=a.getBody()._controller;if(b&&b.$textarea&&b.$textarea.get(0)&&(b=b.$textarea.get(0).ownerDocument)){var e=c.preventdefault.selector;d(b).on("click",e,function(a){a.preventDefault()})}})}});a.PluginManager.add("jira.preventdefault",a.plugins.jira.PreventDefaultPlugin);a.PluginManager.urls["jira.preventdefault"]=
!0;return{configure:function(a,c){c.plugins.push("jira.preventdefault");c.preventdefault={selector:"a[contenteditable\x3dfalse]"}}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:resources', location = 'js/plugins/editor-content-postprocess-plugin.js' */
define("jira/editor/plugins/editor-content-postprocess",["jira/editor/tinymce","jira/editor/converter/util/strings","jira/editor/util/temporaryAttachment","jira/editor/analytics"],function(e,g,h,k){var c=function(b,f){return 0<=(b&&b.attr("class")||"").indexOf(f)},l=function(b){b.parser.addAttributeFilter("class",function(b){for(var a=b.length,d;a--;)d=b[a],c(d,"user-hover")&&(d.attr("contenteditable","false"),d.attr("tabindex","-1"))})},m=function(b){b.parser.addNodeFilter("h1,h2,h3,h4,h5,h6",function(b){for(var a=
function(a,d){var b=[];for(a=a.firstChild;a;a=a.next)a.name!==d||a.firstChild||b.push(a);return b},d=b.length,c;d--;)c=b[d],a(c,"a").filter(function(a){return"undefined"!==typeof a.attr("name")}).forEach(function(a){a.remove()})})},n=function(b){b.parser.addNodeFilter("div,pre",function(b){b.forEach(function(a){a.parent&&"pre"===a.parent.name&&"panel-title"!==a.name&&a.unwrap();a.attr("class")||"pre"!==a.name||a.unwrap();if(c(a,"panel")&&!c(a,"panelHeader")&&!c(a,"panelContent")){c(a,"preformatted")&&
a.attr("class","noformat panel");a.lastChild&&a.lastChild.firstChild&&/^code/.test(a.lastChild.firstChild.attr("class"))&&(a.attr("data-language",a.lastChild.firstChild.attr("class")),a.attr("class","code panel"));var b=a.firstChild;if(c(b,"panelHeader")){var f=b.attr("style");b.firstChild.unwrap();b.name="panel-title";b.attr("class",f)}b=a.lastChild;if(c(b,"panel")||c(b,"panelContent"))b.attr("style"),(c(a,"noformat")||c(a,"code"))&&b.firstChild.unwrap(),b.unwrap();c(a,"noformat")||c(a,"code")?a.name=
"pre":a.attr("class","plain panel")}})})},p=function(b){b.parser.addNodeFilter("img",function(c){if(0!==c.length){var a=h.getFormToken(b.getContainer());a?c.filter(function(b){b=b.attr("src");return g.isTemporaryAttachmentPath(b)?!g.contains(b,"/secure/temporaryattachment/"+a):!1}).forEach(function(a){a.remove();k.sendEvent("editor.plugin.content-postprocess.temporary-attachment.removed")}):console.warn("formToken not found, skipping invalid temporary attachment content post processing")}})};e.create("tinymce.plugins.jira.EditorContentPostprocess",
{init:function(b){b.on("PreInit",function(){p(b);l(b);m(b);n(b)})}});e.PluginManager.add("jira.editorcontentpostprocess",e.plugins.jira.EditorContentPostprocess);e.PluginManager.urls["jira.editorcontentpostprocess"]=!0;return{configure:function(b,c){c.plugins.push("jira.editorcontentpostprocess");c.editor_content_postprocess={};return c}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/node-handler.js' */
define("jira/editor/converter/handlers/node-handler","jira/editor/converter/util/strings jira/editor/converter/util/rte-strings jira/editor/converter/new-lines/new-lines jira/editor/constants jira/lib/class underscore jquery".split(" "),function(n,l,e,g,p,k,f){var h={},m=[],b=p.extend({init:function(a){this.node=a},before:function(){return new b.EmptyHandler},processText:function(){return""},after:function(){return new b.EmptyHandler},children:function(){var a=[],b=this.node.childNodes,d=k.filter(b,
function(a,c){a=this.createChildHandler(a,c,b.length);return""===a.processText()?!0:l.isWhitespace(a.processText())&&n.contains(a.processText(),"\n")&&!a.preformatted?!1:!0},this);k.each(d,function(b,c){a.push(this.createBeforeChild(b,c,d.length));a.push(this.createChildHandler(b,c,d.length));a.push(this.createAfterChild(b,c,d.length))},this);return a},createBeforeChild:function(a,c,d){return new b.EmptyHandler},createAfterChild:function(a,c,d){return new b.EmptyHandler},createChildHandler:function(a,
c,d){return b.createHandler(a)},newLinesBefore:function(){var a=b._isBlock(this.node.parentNode)||f(this.node).parents().is("th, td");return!b._isBlock(this.node)||f(this.node).is(":first-child")&&a?e.empty():e.single(!0)},newLinesAfter:function(){return e.empty()},getPreviousSibling:function(){return this.node.previousSibling},getNextSibling:function(){return this.node.nextSibling},isNextSiblingBreakLine:function(){return"BR"===this.node.nextSibling.tagName},isPreviousSiblingBreakLine:function(){return"BR"===
this.node.previousSibling.tagName},previousSiblingEndsWithWhitespace:function(){return this.getPreviousSibling().textContent.match(g.RIGHT_WHITESPACE_MATCHER)},nextSiblingStartsWithWhitespace:function(){return this.getNextSibling().textContent.match(g.LEFT_WHITESPACE_MATCHER)},endsWithWhitespace:function(){return this.node.textContent.match(g.RIGHT_WHITESPACE_MATCHER)},startsWithWhitespace:function(){return this.node.textContent.match(g.LEFT_WHITESPACE_MATCHER)},shouldUseAlternativeSyntax:function(){return!this.startsWithWhitespace()&&
this.getPreviousSibling()&&!this.isPreviousSiblingBreakLine()&&!this.previousSiblingEndsWithWhitespace()||!this.endsWithWhitespace()&&this.getNextSibling()&&!this.isNextSiblingBreakLine()&&!this.nextSiblingStartsWithWhitespace()?!0:!1}});b.EmptyHandler=b.extend({init:function(a){this.node=a},before:function(){throw void 0;},after:function(){throw void 0;},processText:function(){return""},children:function(){return[]}});b.addHandler=function(a,b){a=a.toLowerCase();h[a]=b;m.push(a)};b.getHandler=function(a){var c=
a.nodeName.toLowerCase();return h[(c+"."+(a.className||"")).toLowerCase()]||h[c]||m.reduce(function(b,c){return b||f(a).is(c)&&h[c]},null)||b};b.createHandler=function(a){return new (b.getHandler(a))(a)};b.isInsideTable=function(a){return 0<f(a).parents("td").length||0<f(a).parents("th").length};b.singleNewLineExceptTable=function(a,c){return b.isInsideTable(a)?e.empty():e.single(c)};b._isBlock=k.memoize(function(a){if(!a||!a.tagName)return!1;var b=document.createElement("div");a=document.createElement(a.tagName);
b.appendChild(a);document.body.appendChild(b);try{return"block"===window.getComputedStyle(a).display}finally{document.body.removeChild(b)}},function(a){return a&&a.tagName?a.tagName:""});b.isEmptyTextNode=function(a){return a?a.nodeType===Node.TEXT_NODE&&""===l.trim(a.nodeValue):!1};return b});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/empty-handler.js' */
define("jira/editor/converter/handlers/empty-handler",["jira/editor/converter/handlers/node-handler"],function(a){return a.EmptyHandler});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/block-handler.js' */
define("jira/editor/converter/handlers/block-handler","jira/editor/converter/handlers/node-handler jira/editor/converter/handlers/text-handler jira/editor/converter/new-lines/new-lines jira/editor/converter/util/strings jira/editor/converter/util/color-converter jira/editor/converter/handlers/bidi-unicode-handler jquery".split(" "),function(b,c,d,f,e,l,g){const m=/^[a-zA-Z]+$/;var k=b.extend({init:function(a){this.wrapperNode=a;this.node=a.querySelector(".panelContent")||a;this.nodeHeader=a.querySelector("panel-title")||
a.querySelector(".panelHeader");this.attrs=this.getAttrs();g(this.node).is(".panelContent")&&this.workaroundTypingOutsideWrapper()},workaroundTypingOutsideWrapper:function(){var a=g(this.wrapperNode);a.find("\x3e p").before('\x3cbr data-mce-bogus\x3d"1"\x3e');this.node?a.find("\x3e :not(div.preformattedContent.panelContent, div.codeContent.panelContent, div.panelHeader, div.panelContent)").detach().appendTo(this.node):this.node=this.wrapperNode},getAttrs:function(){var a=[];this.nodeHeader&&(this.nodeHeader.textContent&&
a.push("title\x3d"+this.nodeHeader.textContent),this.nodeHeader.style.borderBottomStyle&&a.push("borderStyle\x3d"+this.nodeHeader.style.borderBottomStyle),this.nodeHeader.style.borderBottomWidth&&"1px"!==this.nodeHeader.style.borderBottomWidth&&a.push("borderWidth\x3d"+this.nodeHeader.style.borderBottomWidth),this.nodeHeader.style.borderBottomColor&&a.push(`borderColor=${this._getProperColorValue(this.nodeHeader.style.borderBottomColor)}`),this.nodeHeader.style.backgroundColor&&a.push(`titleBGColor=${this._getProperColorValue(this.nodeHeader.style.backgroundColor)}`));
this.wrapperNode&&this.wrapperNode.style.backgroundColor&&a.push("bgColor\x3d"+e.colorToHex(this.wrapperNode.style.backgroundColor));return 0<a.length?a.join("|"):""},_getProperColorValue:function(a){return this._isNamedColor(a)?a:e.colorToHex(a)},_isNamedColor:function(a){return m.test(a)},createChildHandler:function(a,d,e){return a.nodeType===Node.TEXT_NODE?c.createPreformattedTextHandler(a):"BR"===a.tagName?c.newlineHandler():"IMG"===a.tagName?f.startsWith(a.src,"data")||f.startsWith(a.src,"blob")?
(a=document.createTextNode("(attachment)"),c.createTextHandler(a)):b.createHandler(a):"SPAN"===a.nodeName&&"bidi-unicode"===a.className?new l(a):"PRE"===a.tagName?new h(a):"PANEL-TITLE"===a.tagName?new b.EmptyHandler(a):new h(a)},children:function(){var a=b.prototype.children.apply(this,arguments);a.unshift(d.single(!0));return a},newLinesBefore:function(){return b.singleNewLineExceptTable(this.wrapperNode,!0)},newLinesAfter:function(){return b.singleNewLineExceptTable(this.wrapperNode,!0)}}),h=b.extend({createChildHandler:k.prototype.createChildHandler,
newLinesBefore:function(){return d.empty()},before:function(){return new b.EmptyHandler},after:function(){return new b.EmptyHandler}});return k});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/text-handler.js' */
define("jira/editor/converter/handlers/text-handler",["jira/featureflags/feature-manager","jira/editor/converter/util/strings","jira/editor/converter/util/rte-strings","jira/editor/converter/handlers/node-handler","jira/editor/context-detector"],function(d,e,f,g,h){var c=g.extend({init:function(a){this.node=a;this.preformatted=this.node.preformatted},processText:function(){var a=this.node.textContent||"";if(this.node.preformatted)return a;f.isWhitespace(a)||(a=this.trimNewlines(a));a=d.isFeatureEnabled("jira.renderer.consider.variable.format")?
a.replace(/([^$])({[^}]+})/g,"$1\\$2").replace(/(\$)({[^}]+)$/g,"$1\\$2"):a.replace(/{/g,"\\{");h.detectTable(this.node)&&(a=e.replace(a,"|","\\|"));return a},children:function(){return[]},trimNewlines:function(a){var b;for(b=0;b<a.length&&f.isWhitespace(a[b]);b++);var c;for(c=a.length-1;0<=c&&f.isWhitespace(a[c]);c--);var d=a.substring(0,b);b=a.substring(b,c+1);a=a.substring(c+1);return e.replace(d,"\n","")+b+e.replace(a,"\n","")}});c.createTextHandler=function(a){var b=a;a instanceof Node&&(b=a.textContent);
return new c({textContent:b||""})};c.createPreformattedTextHandler=function(a){var b=a;a instanceof Node&&(b=a.textContent);return new c({textContent:b||"",preformatted:!0})};c.newlineHandler=function(){return new c({textContent:"\n",preformatted:!0})};return c});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/heading-handler.js' */
define("jira/editor/converter/handlers/heading-handler",["jira/editor/converter/handlers/node-handler","jira/editor/converter/handlers/text-handler","jira/editor/converter/handlers/empty-handler"],function(b,d,e){var c={H1:"h1. ",H2:"h2. ",H3:"h3. ",H4:"h4. ",H5:"h5. ",H6:"h6. "};return b.extend({init:function(a){this.node=a},newLinesBefore:function(){return b.singleNewLineExceptTable(this.node,!0)},before:function(){var a=this.node.tagName;return a in c?d.createTextHandler(c[a]):new e},newLinesAfter:function(){return b.singleNewLineExceptTable(this.node)}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/bold-handler.js' */
define("jira/editor/converter/handlers/bold-handler",["jira/editor/converter/handlers/node-handler","jira/editor/converter/handlers/text-handler","jira/editor/converter/factories/whitespace-extractor"],function(a,b,c){a=a.extend({init:function(a){this.node=a;this.marker=this.shouldUseAlternativeSyntax()?"{*}":"*"},before:function(){return b.createTextHandler(this.marker)},after:function(){return b.createTextHandler(this.marker)}});return c(a)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/emphasis-handler.js' */
define("jira/editor/converter/handlers/emphasis-handler",["jira/editor/converter/handlers/node-handler","jira/editor/converter/handlers/text-handler","jira/editor/converter/factories/whitespace-extractor"],function(a,b,c){a=a.extend({init:function(a){this.node=a;this.marker=this.shouldUseAlternativeSyntax()?"{_}":"_"},before:function(){return b.createTextHandler(this.marker)},after:function(){return b.createTextHandler(this.marker)}});return c(a)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/monospaced-handler.js' */
define("jira/editor/converter/handlers/monospaced-handler",["jira/editor/converter/handlers/node-handler","jira/editor/converter/handlers/text-handler","jira/editor/converter/factories/whitespace-extractor"],function(c,b){return c.extend({init:function(a){this.node=a;this.openingMarker=(a=this.shouldUseAlternativeSyntax())?"{{{}":"{{";this.closingMarker=a?"{}}}":"}}"},before:function(){return b.createPreformattedTextHandler(this.openingMarker)},after:function(){return b.createPreformattedTextHandler(this.closingMarker)}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/link-handler.js' */
define("jira/editor/converter/handlers/link-handler","jira/editor/converter/handlers/node-handler jira/editor/converter/handlers/text-handler jira/editor/converter/handlers/image-handler jira/editor/converter/handlers/empty-handler jira/editor/converter/handlers/superscript-handler jira/editor/converter/util/strings jira/editor/converter/util/uri jquery".split(" "),function(k,b,l,f,m,c,h,e){var d=k.extend({init:function(a){this.node=a;var g=this.node.getAttribute("href"),b=c.resolveUrl(g,c.getBaseUrl()),
f=a.getAttribute("data-filename");d.isAnchor(g)?b=g:d.isAttachment(b)||f?(this.attachment=f||c.getFilenameFromHref(b),e(a).find("\x3e:first-child:last-child").is("img")&&(this.imageAttachment=this.attachment)):d.isIssue(b,a.classList)?this.issueKey=c.substringAfter(b,c.getContextUrl()+"/browse/"):d.isProfile(b,a)?this.username=h.decodeUri(c.substringAfter(b,"ViewProfile.jspa?name\x3d")):d.isWiki(b,a)&&(this.wikiLink=e(a).text());this.href=b},before:function(){var a=e(this.node.previousSibling).is("a")?
" ":"";return this.imageAttachment?b.createTextHandler(a+"!"):this.attachment?b.createTextHandler(a+"[^"):this.issueKey?new f:this.username?b.createTextHandler(a+"[~"):this.href||this.wikiLink?b.createTextHandler(a+"["):new f},children:function(){return this.imageAttachment?[b.createTextHandler(""+this.imageAttachment)]:this.attachment?[b.createTextHandler(""+this.attachment)]:this.username?[b.createTextHandler(""+this.username)]:d.isAnchor(this.href,this.node)?b.createTextHandler(this.href):d.isMailto(this.href,
this.node)?this._filterMailtoChildren(this._super()):this._super()},after:function(){if(this.imageAttachment){var a=l.getAttrs(e(this.node).find("\x3e img")[0]);return b.createTextHandler(a+"!")}return this.attachment||this.wikiLink?b.createTextHandler("]"):this.issueKey?new f:this.username?b.createTextHandler("]"):this.href?this.href===e(this.node).text()||d.isAnchor(this.href,this.node)?b.createTextHandler("]"):b.createTextHandler("|"+this.href+"]"):new f},_filterMailtoChildren:function(a){3<=a.length&&
a[a.length-2]instanceof m&&(a=a.splice(0,a.length-3));return a}});d.isAttachment=function(a){/^\//.test(a)&&(a=window.location.origin+a);return c.startsWith(a,c.getContextUrl()+"/secure/attachment/")||c.startsWith(a,"../secure/attachment/")};d.isIssue=function(a,b){/^\//.test(a)&&(a=window.location.origin+a);b=!b||!b.contains("external-link");return c.startsWith(a,c.getContextUrl()+"/browse/")&&!c.contains(a,"?")&&b};d.isProfile=function(a,b){return c.contains(a,"ViewProfile.jspa?name\x3d")&&e(b).is(".user-hover")};
d.isWiki=function(a,b){return c.contains(a,"/wiki/display/")&&c.endsWith(h.decodeUri(a),"/"+e(b).text())};d.isMailto=function(a,b){return c.startsWith(a,"mailto:")};d.isAnchor=function(a,b){return c.startsWith(a,"#")&&(!b||a==="#"+e(b).text())};return d});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/linebreak-handler.js' */
define("jira/editor/converter/handlers/linebreak-handler",["jira/editor/converter/handlers/node-handler","jira/editor/converter/handlers/text-handler","jquery"],function(a,b,c){return a.extend({init:function(a){this.node=a},before:function(){return new a.EmptyHandler},children:function(){return new a.EmptyHandler},after:function(){return this.node.previousSibling||this.node.nextSibling||!c(this.node).parent().is("td, th")?this.node.previousSibling&&"BR"===this.node.previousSibling.tagName&&c(this.node).parent().is("td, th")?
new b({textContent:decodeURI("%C2%A0")+"\n",preformatted:!0}):b.newlineHandler():b.createTextHandler(" ")}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/image-handler.js' */
define("jira/editor/converter/handlers/image-handler","jira/editor/converter/handlers/node-handler jira/editor/converter/handlers/text-handler jira/editor/converter/handlers/empty-handler jquery jira/editor/converter/util/strings wrm/context-path".split(" "),function(h,d,e,k,c,l){var f=h.extend({init:function(a){this.node=a;this.imageType=this._getImageType(a)},_getImageType:function(a){if(this.node.getAttribute("imagetext"))return"placeholder";var b=this.node.getAttribute("data-image-type");if(b)return b;
if(b=this.node.getAttribute("src"))return c.isEmotePath(b)&&a.classList.contains("emoticon")?c.contains(b,"/images/icons/mail_small")&&this.$(a).parents("a").is(".external-link")?void 0:"emote":c.isAttachmentPath(b)||c.isThumbnailPath(b)||b.match(/^((data|blob):http)|(data:image)/)?"attachment-image":c.isTemporaryAttachmentPath(b)?"temporary-attachment-image":"external-image"},before:function(){var a=this.node.previousSibling;a=a&&a.nodeType===Node.TEXT_NODE&&!c.endsWith(a.textContent," ")?" ":"";
return this.imageType&&"emote"!==this.imageType?d.createTextHandler(a+"!"):new e},children:function(){return this.imageType?d.createTextHandler(this._getImageSource()):new e},after:function(){var a=this.node.nextSibling;a=a&&a.nodeType===Node.TEXT_NODE&&!c.startsWith(a.textContent," ")?" ":"";return this.imageType&&"emote"!==this.imageType?d.createTextHandler("!"+a):new e},_getImageSource:function(){if("placeholder"===this.imageType)return this.node.getAttribute("imagetext");if("emote"===this.imageType){var a=
this.node.getAttribute("src"),b=c.substringAfter(a,"/images/icons/emoticons/").replace(/\.(png|gif)$/,"");if(b in g)return g[b];if(c.startsWith(a,l()))return"!"+document.location.origin+a+"!"}else if("attachment-image"===this.imageType||"temporary-attachment-image"===this.imageType||"external-image"===this.imageType)return a=this.node.getAttribute("data-filename")||this.node.getAttribute("href")||this.node.getAttribute("src"),"attachment-image"===this.imageType?a=c.getFilenameFromHref(a):"temporary-attachment-image"!==
this.imageType||this.node.getAttribute("data-filename")||(a=c.getFilenameFromHref(a,!0)),(b=f.getAttrs(this.node))?a+b:a}});f.getAttrs=function(a){if(k(a).is("img.emoticon"))return"";var b=[];a.width&&b.push("width\x3d"+a.width);a.height&&b.push("height\x3d"+a.height);a.id&&b.push("id\x3d"+a.id);a.vspace&&b.push("vspace\x3d"+a.vspace);a.align?b.push("align\x3d"+a.align):a.style.textAlign?b.push("align\x3d"+a.style.textAlign):a.style["float"]&&b.push("align\x3d"+a.style["float"]);c.isThumbnailPath(a.getAttribute("src"))&&
b.push("thumbnail");return 0<b.length?"|"+b.join(","):""};var g={smile:":)",sad:":(",tongue:":P",biggrin:":D",wink:";)",thumbs_up:"(y)",thumbs_down:"(n)",information:"(i)",check:"(/)",error:"(x)",warning:"(!)",add:"(+)",forbidden:"(-)",help_16:"(?)",lightbulb_on:"(on)",lightbulb:"(off)",star_yellow:"(*)",star_red:"(*r)",star_green:"(*g)",star_blue:"(*b)",flag:"(flag)",flag_grey:"(flagoff)"};return f});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/code-block-handler.js' */
define("jira/editor/converter/handlers/code-block-handler",["jira/editor/converter/handlers/block-handler","jira/editor/converter/handlers/text-handler","jquery"],function(d,b,c){return d.extend({init:function(a){this._super(a);this.language=this.getLanguage()},getLanguage:function(){var a=c(this.node).is("pre")?this.node:this.node.querySelector("pre");return(a=c(a).attr("data-language"))?a.replace("code-",""):""},before:function(){var a=[];this.language&&a.push(this.language);this.attrs&&a.push(this.attrs);
a=a.length?":"+a.join("|"):"";return b.createPreformattedTextHandler("{code"+a+"}")},after:function(){return b.createPreformattedTextHandler("{code}")}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/noformat-handler.js' */
define("jira/editor/converter/handlers/noformat-handler",["jira/editor/converter/handlers/block-handler","jira/editor/converter/handlers/text-handler"],function(b,a){return b.extend({before:function(){return a.createPreformattedTextHandler("{noformat"+(this.attrs?":"+this.attrs:"")+"}")},after:function(){return a.createPreformattedTextHandler("{noformat}")}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/list-type-matcher.js' */
define("jira/editor/converter/handlers/list-type-matcher",["jquery","underscore"],function(d,c){var a={selectorBulletMap:{}};a.selectorBulletMap["ul:not(.alternate)"]="*";a.selectorBulletMap["ul.alternate"]="-";a.selectorBulletMap.ol="#";a.DEFAULT_DECORATOR="*";a.matchBullet=function(b){return c.find(a.selectorBulletMap,function(a,c){return d(b).is(c)})};a.getBulletDecorator=function(b){return a.matchBullet(b)||a.DEFAULT_DECORATOR};a.isListNode=function(b){return null!=a.matchBullet(b)};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/list-handler.js' */
define("jira/editor/converter/handlers/list-handler","jira/editor/converter/handlers/node-handler jira/editor/converter/handlers/text-handler jira/editor/converter/handlers/empty-handler jira/editor/converter/handlers/list-type-matcher jquery jira/editor/converter/new-lines/new-lines jira/editor/context-detector".split(" "),function(d,f,e,g,h,c,k){return d.extend({init:function(a,b){this.node=a;this.type=this.node.getAttribute("type");this.depth="undefined"===typeof b?0:b;this.bulletDecorator=g.getBulletDecorator(a)},
createChildHandler:function(a){var b=d.getHandler(a);return"LI"===a.tagName?new b(a,this.depth,this.bulletDecorator):new b(a)},before:function(){return new e},newLinesBefore:function(){return 0===this.depth&&k.detectTable(this.node)&&this.node.previousSibling&&!d.isEmptyTextNode(this.node.previousSibling)?c.single(!0):c.empty()},newLinesAfter:function(){return 0!==this.depth||h(this.node).is(":last-child")?c.empty():new c(2,!0)},createAfterChild:function(a,b,c){return b!==c-1?f.newlineHandler():new e}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/list-item-handler.js' */
define("jira/editor/converter/handlers/list-item-handler",["jira/editor/converter/handlers/node-handler","jira/editor/converter/handlers/text-handler","jira/editor/converter/handlers/empty-handler","jira/editor/converter/handlers/list-type-matcher","jira/editor/converter/util/strings"],function(d,e,f,g,h){return d.extend({init:function(a,b,c){this.node=a;this.depth="undefined"===typeof b?0:b;this.bulletDecorator=c},before:function(){var a=h.repeat(this.bulletDecorator,this.depth+1);return e.createTextHandler(" "+
a+" ")},after:function(){return new f},createBeforeChild:function(a,b,c){return g.isListNode(a)?e.newlineHandler():new f},createChildHandler:function(a,b,c){b=d.getHandler(a);return g.isListNode(a)?new b(a,this.depth+1):new b(a)}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/table-handler.js' */
define("jira/editor/converter/handlers/table-handler",["jira/editor/converter/handlers/node-handler","jira/editor/context-detector","jira/editor/converter/new-lines/new-lines"],function(b,c,d){return b.extend({init:function(a){this.node=a},newLinesBefore:function(){var a=c.detectTable(this.node.previousElementSibling);return d.single(!a)}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/table-row-handler.js' */
define("jira/editor/converter/handlers/table-row-handler",["jira/editor/converter/handlers/node-handler","jira/editor/converter/handlers/text-handler","jira/editor/converter/handlers/empty-handler","jira/editor/converter/new-lines/new-lines"],function(e,b,f,g){return e.extend({init:function(a){this.node=a},createBeforeChild:function(a,c,d){return"TH"===a.tagName?b.createTextHandler("||"):b.createTextHandler("|")},newLinesAfter:function(){return g.single()},createAfterChild:function(a,c,d){return c===
d-1?"TH"===a.tagName?b.createTextHandler("||"):b.createTextHandler("|"):new f}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/table-data-handler.js' */
define("jira/editor/converter/handlers/table-data-handler",["jira/editor/converter/handlers/node-handler"],function(a){return a.extend({init:function(a){this.node=a}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/paragraph-handler.js' */
define("jira/editor/converter/handlers/paragraph-handler",["jira/editor/converter/handlers/node-handler","jira/editor/converter/handlers/empty-handler","jira/editor/converter/new-lines/new-lines","jquery"],function(c,d,a,b){return c.extend({init:function(a){this.node=a},newLinesBefore:function(){return null===this.node.previousElementSibling&&b(this.node).parents().is("td, th, .panelContent, .panel")?a.empty():null!==this.node.previousElementSibling?a.single():a.empty()},newLinesAfter:function(){return b(this.node).is(":last-child")&&
b(this.node).parents().is("td, th")?a.empty():a.single(b(this.node).parents().is("td, th"))},before:function(){return new d}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/quote-handler.js' */
define("jira/editor/converter/handlers/quote-handler",["jira/editor/converter/handlers/node-handler","jira/editor/converter/handlers/text-handler"],function(b,a){return b.extend({init:function(a){this.node=a},before:function(){return a.createPreformattedTextHandler("{quote}")},after:function(){return a.createPreformattedTextHandler("{quote}")}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/panel-handler.js' */
define("jira/editor/converter/handlers/panel-handler",["jira/editor/converter/handlers/node-handler","jira/editor/converter/handlers/text-handler","jira/editor/converter/handlers/block-handler"],function(c,b,d){return d.extend({init:function(a){a.firstChild&&a.className===a.firstChild.className&&(a=a.firstChild);this.node=a;this._super(a)},before:function(){return b.createPreformattedTextHandler("{panel"+(this.attrs?":"+this.attrs:"")+"}")},createChildHandler:function(){return c.prototype.createChildHandler.apply(this,
arguments)},after:function(){return b.createPreformattedTextHandler("{panel}")}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/span-handler.js' */
define("jira/editor/converter/handlers/span-handler","jira/editor/converter/handlers/node-handler jira/editor/converter/handlers/text-handler jira/editor/converter/handlers/empty-handler jira/editor/converter/util/strings jira/editor/converter/util/color-converter jquery".split(" "),function(f,b,d,c,g,h){var e={white:"#FFFFFF",silver:"#C0C0C0",gray:"#808080",black:"#000000",red:"#FF0000",maroon:"#800000",yellow:"#FFFF00",olive:"#808000",lime:"#00FF00",green:"#008000",aqua:"#00FFFF",teal:"#008080",
blue:"#0000FF",navy:"#000080",purple:"#800080",orange:"#FFA500",brown:"#AA4B00",mahogany:"#C04000",pink:"#FFC0CB","yellow orche":"#CF912A",harlequin:"#3FFF00",mauvelous:"#EF98AA","dark red":"#8B0000",saffron:"#F4C430",sepia:"#704214",fuchsia:"#FF00FF",magenta:"#FF00FF",marsala:"#955251",indigo:"#000080"};return f.extend({init:function(a){this.node=a;this.$node=h(this.node);this.node.getAttribute("href");"underline"===this.getStyle(this.node,"textDecoration")?this.decorator="underline":"error"===this.node.className?
(a=this.$node.text(),c.getFilenameFromError(a)&&(this.decorator="attachment-error")):0<c.length(this.getStyle(this.node,"color"))?(a=this.getStyle(this.node,"color").toLowerCase(),c.contains(a,"rgb")?this.color=g.colorToHex(a):c.contains(a,"#")?this.color=a:a in e&&(this.color=e[a.toLowerCase()]),void 0!==this.color&&(this.decorator="color")):"jira-issue-macro"===this.node.className&&this.$node.attr("data-jira-key")&&(this.decorator="jira-issue-macro")},before:function(){return"attachment-error"===
this.decorator?b.createTextHandler("!"):"underline"===this.decorator?b.createTextHandler("+"):"color"===this.decorator?b.createPreformattedTextHandler("{color:"+this.color+"}"):new d},after:function(){return"attachment-error"===this.decorator?b.createTextHandler("!"):"underline"===this.decorator?b.createTextHandler("+"):"color"===this.decorator?b.createPreformattedTextHandler("{color}"):new d},children:function(){if("attachment-error"===this.decorator){var a=c.getFilenameFromError(this.$node.text());
return[b.createTextHandler(a)]}return"jira-issue-macro"===this.decorator?b.createTextHandler(this.$node.attr("data-jira-key")):this._super()},getStyle:function(a,b){if(b in this.node.style)return this.node.style[b]}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/strikethrough-handler.js' */
define("jira/editor/converter/handlers/strikethrough-handler","jira/editor/converter/handlers/node-handler jira/editor/converter/handlers/text-handler jira/editor/converter/handlers/link-handler jira/editor/converter/handlers/empty-handler jira/editor/converter/factories/whitespace-extractor jquery".split(" "),function(a,b,e,c,f,d){a=a.extend({init:function(a){this.node=a;this.marker=this.shouldUseAlternativeSyntax()?"{-}":"-";d(a.parentNode).is("a[data-issue-key]")&&(this.isIssue=e.isIssue(d(a.parentNode).attr("href")))},
before:function(){return this.isIssue?new c:b.createTextHandler(this.marker)},after:function(){return this.isIssue?new c:b.createTextHandler(this.marker)}});return f(a)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/superscript-handler.js' */
define("jira/editor/converter/handlers/superscript-handler","jira/editor/converter/handlers/node-handler jira/editor/converter/handlers/text-handler jira/editor/converter/handlers/empty-handler jira/editor/converter/util/strings jira/editor/converter/factories/whitespace-extractor jquery".split(" "),function(a,b,c,e,f,d){a=a.extend({init:function(a){this.node=a;this.marker=this.shouldUseAlternativeSyntax()?"{^}":"^";d(this.node).parents("a").is(".external-link")&&e.endsWith(d(this.node).children().attr("src"),
"images/icons/mail_small.gif")&&(this.dontExpand=!0)},before:function(){return this.dontExpand?new c:b.createTextHandler(this.marker)},after:function(){return this.dontExpand?new c:b.createTextHandler(this.marker)}});return f(a)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/subscript-handler.js' */
define("jira/editor/converter/handlers/subscript-handler",["jira/editor/converter/handlers/node-handler","jira/editor/converter/handlers/text-handler","jira/editor/converter/factories/whitespace-extractor"],function(a,b,c){a=a.extend({init:function(a){this.node=a;this.marker=this.shouldUseAlternativeSyntax()?"{~}":"~"},before:function(){return b.createTextHandler(this.marker)},after:function(){return b.createTextHandler(this.marker)}});return c(a)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/underline-handler.js' */
define("jira/editor/converter/handlers/underline-handler",["jira/editor/converter/handlers/node-handler","jira/editor/converter/handlers/text-handler","jira/editor/converter/factories/whitespace-extractor"],function(a,b,c){a=a.extend({init:function(a){this.node=a;this.marker=this.shouldUseAlternativeSyntax()?"{+}":"+"},before:function(){return b.createTextHandler(this.marker)},after:function(){return b.createTextHandler(this.marker)}});return c(a)});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/hr-handler.js' */
define("jira/editor/converter/handlers/hr-handler",["jira/editor/converter/handlers/node-handler","jira/editor/converter/handlers/text-handler","jira/editor/converter/handlers/empty-handler"],function(b,c,a){return b.extend({init:function(a){this.node=a},before:function(){return new a},children:function(){return[new c({textContent:"----",preformatted:!0})]},after:function(){return new a}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/cite-handler.js' */
define("jira/editor/converter/handlers/cite-handler",["jira/editor/converter/handlers/node-handler","jira/editor/converter/handlers/text-handler"],function(b,a){return b.extend({init:function(a){this.node=a},before:function(){return a.createTextHandler("??")},after:function(){return a.createTextHandler("??")}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/external-handler.js' */
define("jira/editor/converter/handlers/external-handler",["jira/editor/converter/handlers/node-handler","jira/editor/converter/handlers/text-handler","jira/editor/converter/new-lines/new-lines","jira/editor/converter","underscore"],function(e,f,c,g,h){var d=e.extend({init:function(a){this.node=a},children:function(){var a=this.external(this.getParams());return[f.createPreformattedTextHandler(a)]},getParams:function(){return Object.create(Object.prototype,{node:{value:this.node},innerMarkup:{get:function(){return g.handleMarkup(this.node.innerHTML)}}})}});
d.forConverter=function(a){var b=AJS.namespace(a["function"]);h.isFunction(b)?e.addHandler(a.selector,d.extend({external:b})):console.error(a["function"]," is not a function, this macro won't be supported by converter: ",a.selector," - it may result in data loss.")};d.Legacy=f.extend({init:function(a){this.node=a},processText:function(){var a=this.node.getAttribute("data-original-text"),b=this.node.getAttribute("data-command");return(a||"")+(this.node.innerText||this.node.textContent)+(b&&"{"+b+"}")},
newLinesBefore:function(){return"true"===this.node.getAttribute("data-new-line-before")?c.single(!0):c.empty()},newLinesAfter:function(){return"true"===this.node.getAttribute("data-new-line-after")?c.single(!0):c.empty()}});return d});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handler-mapper.js' */
define("jira/editor/converter/handler-mapper","jira/editor/converter/handlers/node-handler jira/editor/converter/handlers/text-handler jira/editor/converter/handlers/heading-handler jira/editor/converter/handlers/bold-handler jira/editor/converter/handlers/emphasis-handler jira/editor/converter/handlers/monospaced-handler jira/editor/converter/handlers/linebreak-handler jira/editor/converter/handlers/link-handler jira/editor/converter/handlers/image-handler jira/editor/converter/handlers/code-block-handler jira/editor/converter/handlers/noformat-handler jira/editor/converter/handlers/list-handler jira/editor/converter/handlers/list-item-handler jira/editor/converter/handlers/paragraph-handler jira/editor/converter/handlers/strikethrough-handler jira/editor/converter/handlers/superscript-handler jira/editor/converter/handlers/subscript-handler jira/editor/converter/handlers/underline-handler jira/editor/converter/handlers/quote-handler jira/editor/converter/handlers/panel-handler jira/editor/converter/handlers/span-handler jira/editor/converter/handlers/table-handler jira/editor/converter/handlers/table-row-handler jira/editor/converter/handlers/table-data-handler jira/editor/converter/handlers/hr-handler jira/editor/converter/handlers/cite-handler jira/editor/wrm".split(" "),
function(a,q,b,d,e,c,r,t,u,f,g,h,v,w,x,y,z,k,A,l,B,C,m,n,D,E,F){return{registerHandlers:function(){var p=require("jira/editor/converter/handlers/external-handler");F.getConverters().forEach(p.forConverter);a.addHandler("pre.external-macro",p.Legacy);a.addHandler("H1",b);a.addHandler("H2",b);a.addHandler("H3",b);a.addHandler("H4",b);a.addHandler("H5",b);a.addHandler("H6",b);a.addHandler("A",t);a.addHandler("B",d);a.addHandler("STRONG",d);a.addHandler("BR",r);a.addHandler("EM",e);a.addHandler("I",e);
a.addHandler("IMG",u);a.addHandler("TT",c);a.addHandler("CODE",c);a.addHandler("SAMP",c);a.addHandler("SPAN.monospace",c);a.addHandler("DIV.preformatted panel",g);a.addHandler("PRE.noformat panel",g);a.addHandler("DIV.code panel",f);a.addHandler("PRE.code panel",f);a.addHandler("PANEL-TITLE",a.EmptyHandler);a.addHandler("UL",h);a.addHandler("OL",h);a.addHandler("LI",v);a.addHandler("P",w);a.addHandler("DEL",x);a.addHandler("SUB",z);a.addHandler("SUP",y);a.addHandler("INS",k);a.addHandler("U",k);a.addHandler("TABLE",
C);a.addHandler("TR",m);a.addHandler("CAPTION",m);a.addHandler("TD",n);a.addHandler("TH",n);a.addHandler("SPAN",B);a.addHandler("BLOCKQUOTE",A);a.addHandler("DIV.panel",l);a.addHandler("PRE.panel",l);a.addHandler("HR",D);a.addHandler("CITE",E);a.addHandler("#text",q)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/factories/whitespace-extractor.js' */
define("jira/editor/converter/factories/whitespace-extractor",["jira/editor/constants","jira/editor/converter/handlers/text-handler","jira/editor/converter/factories/left-trim","jira/editor/converter/factories/right-trim"],function(d,c,f,g){function e(b,a){b=(b&&b.textContent||"").match(a);return null!==b?b[0]:null}return function(b){return b.extend({init:function(a){this._super(a);this.leftWhitespaces=e(a.firstChild,d.LEFT_WHITESPACE_MATCHER);this.rightWhitespaces=e(a.lastChild,d.RIGHT_WHITESPACE_MATCHER);
this.leftTrimChildren=!!this.leftWhitespaces;this.rightTrimChildren=!!this.rightWhitespaces},before:function(){var a=this._super();return this._extractLeftSpaces(a)||a},after:function(){var a=this._super();return this._extractRightSpaces(a)||a},createChildHandler:function(a,b,c){a=this._super(a,b,c);this.leftTrimChildren&&0===b&&(a=f(a));this.rightTrimChildren&&c-1===b&&(a=g(a));return a},_extractLeftSpaces:function(a){return this.leftTrimChildren?(a.preformatted?c.createPreformattedTextHandler:c.createTextHandler)(this.leftWhitespaces+
a.processText()):null},_extractRightSpaces:function(a){return this.rightTrimChildren?(a.preformatted?c.createPreformattedTextHandler:c.createTextHandler)(a.processText()+this.rightWhitespaces):null}})}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/factories/left-trim.js' */
define("jira/editor/converter/factories/left-trim",["jira/editor/constants"],function(c){return function e(f){var a=Object.create(f);a.createChildHandler=function(b,d,c){b=Object.getPrototypeOf(a).createChildHandler.call(this,b,d,c);0===d&&(b=e(b));return b};a.processText=function(){return Object.getPrototypeOf(a).processText.call(this).replace(c.LEFT_WHITESPACE_MATCHER,"")};a._extractLeftSpaces=function(){};return a}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/factories/right-trim.js' */
define("jira/editor/converter/factories/right-trim",["jira/editor/constants"],function(e){return function f(g){var a=Object.create(g);a.createChildHandler=function(b,c,d){b=Object.getPrototypeOf(a).createChildHandler.call(this,b,c,d);d-1===c&&(b=f(b));return b};a.processText=function(){return Object.getPrototypeOf(a).processText.call(this).replace(e.RIGHT_WHITESPACE_MATCHER,"")};a._extractRightSpaces=function(){};return a}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/new-lines/new-lines.js' */
define("jira/editor/converter/new-lines/new-lines",["jira/lib/class"],function(b){var a=b.extend({init:function(a,b){this._lines=a;this._optional=b},newLines:function(){return this._lines},optional:function(){return this._optional}});a.empty=function(){return new a(0,!0)};a.single=function(b){return new a(1,!!b)};return a});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/new-lines/new-lines-merger.js' */
define("jira/editor/converter/new-lines/new-lines-merger",["underscore","jira/editor/converter/util/strings","jira/editor/converter/new-lines/new-lines"],function(f,k,g){function h(a){var c=f.max(a.filter(function(b){return b.optional()}).map(function(b){return b.newLines()}));a=a.filter(function(b){return!b.optional()}).reduce(function(b,a){return b+a.newLines()},0);return Math.max(a,c)}return{mergeNewLines:function(a){a=f.filter(a,function(a){return a instanceof g||""!==a});for(var c=[],b=[],d=
0;d<a.length;d++){var e=a[d];e instanceof g?c.push(e):(b.push(k.repeat("\n",h(c))),b.push(e),c=[])}return b},_newLinesNumber:h}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/handlers/bidi-unicode-handler.js' */
define("jira/editor/converter/handlers/bidi-unicode-handler",["jira/editor/converter/handlers/node-handler"],function(a){return a.extend({init:function(a){this.node=a},before:function(){return new a.EmptyHandler},children:function(){return new a.EmptyHandler},processText:function(){const a=parseInt(this.node.dataset.bidiCharacterCode,16);return String.fromCharCode(a)},after:function(){return new a.EmptyHandler}})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:converter', location = '/js/converter/html-converter.js' */
define("jira/editor/converter","jquery jira/editor/converter/util/rte-strings jira/editor/converter/handlers/node-handler jira/editor/converter/handlers/empty-handler jira/editor/converter/new-lines/new-lines jira/editor/converter/new-lines/new-lines-merger jira/editor/converter/handler-mapper jira/editor/analytics jira/util/logger exports".split(" "),function(l,f,g,m,n,p,q,d,r,e){q.registerHandlers();var h=function(a){if(null==a)return"";a=[g.createHandler(a)];for(var c=[];0!==a.length;){var b=a.pop();
if(!(b instanceof m))if(b instanceof n)c.push(b);else{a.push(b.newLinesBefore());a.push(b.before());var d=b.children();a=a.concat(d);a.push(b.after());c.push(b.processText());c.push(b.newLinesAfter())}}c=p.mergeNewLines(c);return f.trim(c.reverse().join(""))};e.handleMarkup=function(a){return h(f.parseHtml(a))};e.convert=function(a){var c=new l.Deferred;d.mark("rte-convert");try{var b=f.parseHtml(a),e=b?b.getElementsByTagName("*").length:0,g=h(b);c.resolve(g);d.oneShotMeasure("rte-convert",{nodesCount:e})}catch(k){r.warn(k),
c.reject(k),d.oneShotMeasure("rte-convert",{nodesCount:-1})}return c.promise()}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:plugins', location = 'js/plugins/markup-plugin.js' */
require(["jira/editor/customizer"],function(b){b.customizeSettings(function(a){-1===a.plugins.indexOf("textpattern")&&a.plugins.push("textpattern");a.textpattern_patterns=a.textpattern_patterns||[];Array.prototype.push.apply(a.textpattern_patterns,[{start:"1. ",cmd:"InsertOrderedList"},{start:"# ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}])})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.jira.plugins.jira-editor-plugin:plugins', location = 'js/plugins/toolbar-sync-plugin.js' */
define("jira/editor/plugins/toolbar-sync",["jira/editor/tinymce"],function(d){var e=["bold","italic","underline"];d.create("tinymce.plugins.jira.ToolbarSyncPlugin",{init:function(b){var c=b.settings;b.on("NodeChange",function(){b.isHidden()||e.forEach(function(a){var d=b.queryCommandState(a);a=c.toolbarContainer.find("[data-operation\x3d"+a+"]");a.attr("aria-pressed")!==d&&a.attr("aria-pressed",d?"true":"false")})});b.on("hide",function(){e.forEach(function(a){c.toolbarContainer.find("[data-operation\x3d"+
a+"]").attr("aria-pressed",null)})});b.contextManager.on("change:all",function(a){c.toolbarContainer.find(":not(.wiki-edit-attachment-picker-trigger)[aria-disabled], [data-operation], :not(.wiki-edit-attachment-picker-trigger)[aria-controls]").attr("aria-disabled",a.disableState);!0===a.disableState?c.toolbarContainer.find(".wiki-edit-attachment-picker-trigger").attr("aria-disabled",!0):c.toolbarContainer.find(".wiki-edit-attachment-picker-trigger:not([data-attachments-disabled])").attr("aria-disabled",
!1)});b.contextManager.on("change:a",function(a){c.toolbarContainer.find("[data-operation^\x3dlink]").attr("aria-disabled",a.disableState)});b.contextManager.on("change:table",function(a){c.toolbarContainer.find("[data-operation\x3dtable]").attr("aria-disabled",a.disableState)})}});d.PluginManager.add("jira.toolbarsync",d.plugins.jira.ToolbarSyncPlugin);d.PluginManager.urls["jira.toolbarsync"]=!0;return{configure:function(b,c){c.plugins.push("jira.toolbarsync");c.toolbarContainer=b.element.getToolbarContainer()}}});
}catch(e){WRMCB(e)};