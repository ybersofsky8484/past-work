var St=Object.defineProperty;var xt=(o,e,n)=>e in o?St(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n;var Ze=(o,e,n)=>(xt(o,typeof e!="symbol"?e+"":e,n),n);import{j as r,ac as $e,b as V,C as re,s as F,u as Ge,r as m,p as Tt,a as g,B as W,ar as Ye,as as Ct,at as wt,g as Et,D as At,au as ke,R as ue,av as kt,aw as Ot,h as G,m as ee,k as Lt,l as O,K as ne,o as Oe,a6 as J,a7 as dt,ax as ct,S as Nt,ay as ut,az as jt,F as ce,aA as Mt,aB as Rt,M as Ke,V as ht,aC as _t,w as It,c as Bt,L as Dt,aD as Ht,E as Pt,aE as zt,aF as Vt,Q as Ut,P as q,q as Ve,n as Qe,I as Xe,d as Me,T as ft,ao as $t,ap as Ft,aq as Wt}from"./assets/locale-BjpK6-Ml.js";const qt=o=>r.jsxs($e,{height:135,width:1e3,...o,children:[r.jsx("rect",{x:"48.47",y:"19.2",rx:"0",ry:"0",width:"362.3855",height:"41.724000000000004"}),r.jsx("rect",{x:"48",y:"99.2",rx:"0",ry:"0",width:"162.74",height:"37.08"}),r.jsx("rect",{x:"248",y:"99.2",rx:"0",ry:"0",width:"163",height:"41"}),r.jsx("rect",{x:"448",y:"99.2",rx:"0",ry:"0",width:"162",height:"39"}),r.jsx("rect",{x:"649",y:"99.2",rx:"0",ry:"0",width:"162",height:"38"}),r.jsx("rect",{x:"849",y:"98.2",rx:"0",ry:"0",width:"161",height:"48"})]});var Y=function(){return Y=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Y.apply(this,arguments)};function Gt(o,e){var n={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&e.indexOf(t)<0&&(n[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(o);a<t.length;a++)e.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(o,t[a])&&(n[t[a]]=o[t[a]]);return n}var Yt=V(function(o){var e,n=o.palette,t=o.spacing,a=o.type,i=o.breakpoints,l={wrenchPageHeader:Y(Y({},re),{width:"100%",padding:[t[5],t[5]],fontFamily:a.fontFamily.base,"-webkit-font-smoothing":"antialiased",textAlign:function(c){var u=c.centered;return u?"center":"left"},backgroundColor:n.background.light,display:function(c){var u=c.centered;return u?"block":"flex"},flexFlow:"row wrap",justifyContent:"space-between"}),wrenchPageHeaderText:(e={flexBasis:"50%",flexGrow:1,marginRight:"1em",display:function(c){var u=c.centered;return u?"block":void 0}},e["@media (min-width: ".concat(i.lg,"px)")]={flexBasis:"30%"},e),wrenchPageHeaderAddOn:{flexGrow:0,flexShrink:1,width:function(c){var u=c.centered;return u?"100%":void 0},display:function(c){var u=c.centered;return u?"block":void 0},textAlign:function(c){var u=c.centered;return u?"center":"right"},whiteSpace:function(c){var u=c.centered;return u?"normal":void 0}},wrenchPageHeaderTitle:function(){return Y(Y({},re),{margin:0,lineHeight:1.5,fontSize:a.fontSize.pageTitle,fontWeight:a.fontWeight.regular})},wrenchPageHeaderSubtitle:function(){return Y(Y({},re),{display:"block",marginBottom:t[2],color:n.text.darkMuted,fontSize:a.fontSize.body,paddingTop:t[2]})}};return l}),Qt=function(e){var n=e.addOn,t=e.centered,a=t===void 0?!1:t,i=e.subTitle,l=e.title,c=Gt(e,["addOn","centered","subTitle","title"]),u=Yt({centered:a}),s=Ge("page-header-");return r.jsxs("div",Y({className:u.wrenchPageHeader},F(c),{children:[r.jsxs("div",{className:u.wrenchPageHeaderText,"aria-labelledby":s,children:[r.jsx("h1",{className:u.wrenchPageHeaderTitle,id:s,children:l}),i&&r.jsx("span",{className:u.wrenchPageHeaderSubtitle,children:i})]}),n&&r.jsx("div",{className:u.wrenchPageHeaderAddOn,children:n})]}))},Fe=function(){return Fe=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Fe.apply(this,arguments)};function Zt(o,e){var n={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&e.indexOf(t)<0&&(n[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(o);a<t.length;a++)e.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(o,t[a])&&(n[t[a]]=o[t[a]]);return n}var Kt=V(function(o){return{wrenchTruncation:{boxSizing:"border-box",textOverflow:function(e){var n=e.truncationPosition;return n==="end"?"ellipsis":"unset"},overflow:function(e){var n=e.truncationPosition;return n==="end"?"hidden":null},whiteSpace:function(e){var n=e.truncationPosition,t=e.numberOfLines;return n==="end"&&t===1?"nowrap":null},display:function(e){var n=e.truncationPosition,t=e.numberOfLines;return n==="end"&&t===1?"normal":"box"},WebkitBoxOrient:function(e){var n=e.truncationPosition,t=e.numberOfLines;return n==="end"&&t===1?"unset":"vertical"},WebkitLineClamp:function(e){var n=e.truncationPosition,t=e.numberOfLines;return n==="end"&&t===1?null:t}}}});function Xt(o,e){var n=m.useRef(0),t=m.useRef(null),a=m.useCallback(function(){for(var i=[],l=0;l<arguments.length;l++)i[l]=arguments[l];var c=Date.now(),u=e-(c-n.current);u<=0?(t.current&&(clearTimeout(t.current),t.current=null),n.current=c,o.apply(void 0,i)):t.current||(t.current=window.setTimeout(function(){n.current=Date.now(),t.current=null,o.apply(void 0,i)},u))},[o,e]);return m.useEffect(function(){return function(){t.current&&clearTimeout(t.current)}},[]),a}var mt=function(e){return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth},Jt=function(e,n,t,a,i){if(!i)return!1;var l=e.slice(0,a);l.endsWith(" ")&&(l=l.slice(0,-1));var c=e.slice(-a);return c.startsWith(" ")&&(c=c.slice(1)),i.textContent="".concat(l,"â€¦").concat(c),mt(i)},er=function(e,n,t,a){var i,l,c,u;if(a.textContent=e,!!mt(a)){for(var s=0,d=e.length,h=null;s<=d;){var f=Math.floor((s+d)/2),p=Jt(e,n,t,f,a);p?d=f-1:(s=f+1,((l=(i=a.textContent)===null||i===void 0?void 0:i.length)!==null&&l!==void 0?l:0)>((c=h==null?void 0:h.length)!==null&&c!==void 0?c:0)&&(h=(u=a.textContent)!==null&&u!==void 0?u:""))}a.textContent=h}},tr=function(e){var n=e.children,t=e.numberOfLines,a=t===void 0?1:t,i=e.leftOffset,l=i===void 0?5:i,c=e.rightOffset,u=c===void 0?5:c,s=e.truncationPosition,d=s===void 0?"end":s,h=e.throttleMS,f=h===void 0?50:h,p=e.suppressTitle,S=p===void 0?!1:p,T=Zt(e,["children","numberOfLines","leftOffset","rightOffset","truncationPosition","throttleMS","suppressTitle"]),k=m.useRef(null),w=Xt(er,f);m.useEffect(function(){var E=k==null?void 0:k.current;if(E){if(!ResizeObserver){E.textContent=n;return}var C;return d==="middle"?(C=new ResizeObserver(function(){w(n,l,u,E)}),C.observe(E)):E.textContent=n,function(){C==null||C.disconnect()}}},[n,l,u,k,w,d]);var N=Kt({numberOfLines:a,truncationPosition:d}).wrenchTruncation;return r.jsx("div",Fe({ref:k,className:N,title:S?void 0:n},T))};const rr=o=>Tt.sanitize(o),pt=o=>{let e=0;return o.forEach(n=>{n.status==="OPENED"&&n.message&&n.message.trim()!==""&&(e+=1),Array.isArray(n.children)&&n.status==="OPENED"&&n.message&&n.children.forEach(t=>{((t==null?void 0:t.status)==="OPENED"||t!=null&&t.message&&(t==null?void 0:t.message.trim())!=="")&&(e+=1)})}),e},Je=g.defineMessages({COMMENT_BUTTON_TITLE:{id:"CommentButton.CommentButtonTitle",defaultMessage:"Comment button",description:"[Type: attribute][Vis: low] - title attribute for comment button"},BUTTON_ARIA_LABEL:{id:"CommentButton.ButtonAriaLabel",defaultMessage:"Opens comment modal in new tab",description:"[Type: label][Vis: low] - aria label for comment button"}}),nr=({previewLink:o,logAmplitudeCTA:e})=>r.jsx(W,{"aria-label":g.t(Je.BUTTON_ARIA_LABEL),href:o,onClick:()=>e("comment"),target:"_blank",color:"muted",size:"sm","data-testid":"comment-button",tabIndex:0,children:r.jsx(Ye,{title:g.t(Je.COMMENT_BUTTON_TITLE)})});var H=function(){return H=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},H.apply(this,arguments)};function ae(o,e){var n={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&e.indexOf(t)<0&&(n[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(o);a<t.length;a++)e.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(o,t[a])&&(n[t[a]]=o[t[a]]);return n}function et(o,e,n){for(var t=0,a=e.length,i;t<a;t++)(i||!(t in e))&&(i||(i=Array.prototype.slice.call(e,0,t)),i[t]=e[t]);return o.concat(i||Array.prototype.slice.call(e))}var or=V(function(o){var e=o.palette,n={wrenchTableHeader:{position:function(t){var a=t.sticky;return a?"sticky":null},top:function(t){var a=t.sticky;return a?0:null},zIndex:function(t){var a=t.elevation,i=t.sticky;return a??i?2:null},backgroundColor:function(t){var a=t.sticky;return a?e.background.light:null},transition:"all 0.3s",boxShadow:function(t){var a=t.sticky,i=t.shadow,l=t.showHeaderShadow;if(a&&i&&l)return"1px 0 0 ".concat(e.border.muted,", 0px 2px 4px rgba(0, 0, 0, 0.14)");if(a&&i)return"1px 0 0 ".concat(e.border.muted)}}};return n}),pe=ue.createContext({density:"md",showHeaderShadow:!1,showFooterShadow:!1,showColumnShadow:!1,showColumnRightShadow:!1}),ar=function(e){var n=e.children,t=e.sticky,a=t===void 0?!1:t,i=e.shadow,l=i===void 0?!0:i,c=e.elevation,u=ae(e,["children","sticky","shadow","elevation"]),s=m.useContext(pe).showHeaderShadow,d=or({sticky:a,elevation:c,showHeaderShadow:s,shadow:l}).wrenchTableHeader;return r.jsx("thead",H({className:d},F(u),{children:n}))},sr=function(e){var n=e.children,t=ae(e,["children"]);return r.jsx("tbody",H({},F(t),{children:n}))},ir=function(e,n){return!e||typeof e!="string"?n.primary.main:e.startsWith("data-")?n.data[e.replace("data-","")]:n[e].main},lr=V(function(o){var e=o.palette,n=o.border,t=o.spacing,a={wrenchTableRow:{opacity:function(i){var l=i.disabled;return l?"0.5":null},pointerEvents:function(i){var l=i.disabled;return l?"none":null},backgroundColor:function(i){var l=i.selected;return l?e.background.main:null},"&:last-child":{"& > td":{borderBottom:"none"}},"& > td":{"&:first-child":{position:function(i){var l=i.marked;return l?"relative":null},"&:before":{content:function(i){var l=i.marked;return l?'""':null},position:function(i){var l=i.marked;return l?"absolute":null},left:function(i){var l=i.marked;return l?"0":null},top:function(i){var l=i.marked;return l?"0":null},bottom:function(i){var l=i.marked;return l?"0":null},width:function(i){var l=i.marked;return l?t[1]:null},backgroundColor:function(i){var l=i.marked,c=i.color;return l&&c?ir(c,e):"none"},borderRight:n.muted}}}}};return a}),dr=function(e){var n=e.children,t=e.color,a=e.disabled,i=a===void 0?!1:a,l=e.marked,c=l===void 0?!1:l,u=e.onClick,s=e.selected,d=s===void 0?!1:s,h=ae(e,["children","color","disabled","marked","onClick","selected"]),f=lr({color:t,disabled:i,marked:c,selected:d}).wrenchTableRow;return r.jsx("tr",H({onClick:u,className:f},F(h),{children:n}))},cr=function(e,n){var t=function(){return n==="sm"?[e[2],e[4]]:n==="lg"?[e[5],e[5]]:[e[4],e[4]]}(),a=t[0],i=t[1];return"".concat(a,"px ").concat(i,"px")},ur=V(function(o){var e=o.palette,n=o.type.fontSize,t=o.spacing,a={thTypeColor:e.text.dark,thBgColor:e.transparent.clear,bgColor:{light:e.background.light,main:e.background.main},thDividerLineColor:e.transparent.clear,tdTypeColor:e.text.dark,cellMinHeight:50,fontSize:n.bodySm},i={fontSize:a.fontSize,color:a.tdTypeColor,minHeight:a.cellMinHeight,boxShadow:"inset 0 -1px 0 0 ".concat(e.border.muted),"& > *":{verticalAlign:"middle"}},l={wrenchTableCell:H(H({},i),{backgroundColor:function(c){var u=c.backgroundColor;return a.bgColor[u]},textAlign:function(c){var u=c.numeric,s=c.align;return u?"right":s},verticalAlign:function(c){var u=c.verticalAlign;return u},fontVariantNumeric:function(c){var u=c.numeric;return u?"tabular-nums":null},width:function(c){var u=c.variant;return u?"1%":null},maxWidth:function(c){var u=c.maxWidth;return u},minWidth:function(c){var u=c.minWidth;return u},padding:function(c){var u=c.density;return cr(t,u)},paddingRight:function(c){var u=c.variant;return u==="bulkActions"?"0":void 0},whiteSpace:function(c){var u=c.noWrap;return u?"nowrap":null},"& > a":{color:e.text.link}})};return l}),hr=function(e){var n=e.children,t=e.numeric,a=t===void 0?!1:t,i=e.variant,l=e.scope,c=e.parent,u=e.color,s=e.backgroundColor,d=s===void 0?"light":s,h=e.marked,f=h===void 0?!1:h,p=e.noWrap,S=p===void 0?!1:p,T=e.maxWidth,k=e.minWidth,w=e.align,N=w===void 0?"left":w,E=e.verticalAlign,C=E===void 0?"top":E,x=ae(e,["children","numeric","variant","scope","parent","color","backgroundColor","marked","noWrap","maxWidth","minWidth","align","verticalAlign"]),y=m.useContext(pe).density,b=ur({numeric:a,variant:i,color:u,backgroundColor:d,marked:f,density:y,noWrap:S,maxWidth:T,minWidth:k,align:N,verticalAlign:C}).wrenchTableCell,v=c==="Table.Header",j=v?"th":"td",A=!l&&v?"col":l;return r.jsx(j,H({className:b,scope:A},F(x),{children:n}))},fr=function(e,n){return!e||typeof e!="string"?n.primary.main:e.startsWith("data-")?n.data[e.replace("data-","")]:n[e].main},mr=function(e,n,t){var a=function(){return n==="sm"?t?[e[2],e[2]]:[e[4],e[4]]:n==="lg"?t?[e[2],e[4]]:[e[4],e[5]]:t?[e[2],e[2]]:[e[4],e[4]]}(),i=a[0],l=a[1];return"".concat(i,"px ").concat(l,"px")},tt=function(e,n){return e?"flex-end":n==="left"?"flex-start":n==="center"?"center":"flex-end"},pr=V(function(o){var e=o.palette,n=o.type,t=n.fontWeight,a=n.fontSize,i=o.spacing,l={thTypeColor:e.background.dark,thBgColor:e.transparent.clear,thDividerLineColor:e.transparent.clear,tdTypeColor:e.text.dark,tdBgColor:e.transparent.clear,cellMinHeight:50,fontSize:a.body},c={fontSize:l.fontSize,color:l.tdTypeColor,boxShadow:"inset 0 -1px 0 0 ".concat(e.border.muted),"& > *":{verticalAlign:"middle"}},u={wrenchTableHeaderCell:H(H({},c),{padding:function(s){var d=s.density,h=s.isSortable,f=s.onClick;return mr(i,d,!!(h||f))},minHeight:l.cellMinHeight,textAlign:function(s){var d=s.numeric,h=s.align;return d?"right":h},verticalAlign:function(s){var d=s.verticalAlign;return d},fontWeight:t.medium,backgroundColor:function(s){var d=s.backgroundColor;return Et(e,d,{colorType:"background"})},color:function(s){var d=s.backgroundColor;return d!=="dark"?l.thTypeColor:e.text.light},position:function(s){var d=s.sticky,h=s.marked;return d!=null?"sticky":h?"relative":null},left:function(s){var d=s.sticky;return d==="left"?0:null},right:function(s){var d=s.sticky;return d==="right"?0:null},userSelect:function(s){var d=s.isSortable;return d?"none":null},whiteSpace:function(s){var d=s.noWrap;return d?"nowrap":null},zIndex:function(s){var d=s.elevation,h=s.sticky;return d??h?1:null},transition:"all 0.3s",maxWidth:function(s){var d=s.maxWidth;return d||void 0},minWidth:function(s){var d=s.minWidth;return d||void 0},"&:before":{content:'""',position:"absolute",left:"0",top:"0",width:"100%",height:i[1],backgroundColor:function(s){var d=s.marked,h=s.color;return d&&h?fr(h,e):"none"}},"&:after":{content:function(s){var d=s.sticky;return d?'""':void 0},position:function(s){var d=s.sticky;return d?"absolute":void 0},left:function(s){var d=s.sticky;return d==="right"?"0":null},right:function(s){var d=s.sticky;return d==="left"?"0":null},top:function(s){var d=s.sticky;return d?"0":void 0},height:function(s){var d=s.sticky;return d?"100%":void 0},width:function(s){var d=s.sticky;return d?"1px":void 0},backgroundColor:function(s){var d=s.sticky;return d?e.border.muted:void 0},boxShadow:function(s){var d=s.sticky,h=s.showColumnShadow,f=s.showColumnRightShadow;return h&&d==="left"?"2px 0 4px rgba(0, 0, 0, 0.2)":f&&d==="right"?"-2px 0 4px rgba(0, 0, 0, 0.2)":null}},"&:first-child":{borderLeft:"none"},"&:hover":{"& > button > span:last-child":{opacity:1,color:function(s){var d=s.isSorted;return d?e.text.dark:e.text.darkMuted}}}}),wrenchTableSortIcon:{display:"inline-flex",pointerEvents:"none",marginLeft:i[2],opacity:function(s){var d=s.isSorted;return d?1:.42},color:e.text.dark},wrenchTableHeaderContainer:{display:"flex",alignItems:"center",width:"100%",justifyContent:function(s){var d=s.numeric,h=s.align;return tt(d,h)}},wrenchTableHeaderText:{},wrenchTableSortButton:{border:"none",background:"none",cursor:"pointer",minHeight:function(s){var d=s.density;return d==="sm"?i[3]:i[6]},display:"flex",alignItems:"center",width:"100%",fontWeight:t.medium,color:function(s){var d=s.backgroundColor;return d!=="dark"?l.thTypeColor:e.text.light},justifyContent:function(s){var d=s.numeric,h=s.align;return tt(d,h)},padding:i[2],"&:focus":{"& > span":{opacity:1,color:function(s){var d=s.isSorted;return d?e.text.dark:e.text.darkMuted}}}},wrenchHeaderCellAddon:{marginLeft:i[2],cursor:"default",fontSize:a.body}};return u}),br=function(e){var n=e.sortDirection,t=e.wrenchTableSortIcon,a=e.sortAscendingLabel,i=e.sortDescendingLabel,l;return n==="descending"?l=r.jsx(kt,{title:a,size:"md"}):l=r.jsx(Ot,{title:i,size:"md"}),r.jsx("span",{"aria-hidden":"true",className:t,children:l})},vr=function(e){var n=e.children,t=e.numeric,a=t===void 0?!1:t,i=e.scope,l=e.parent,c=e.color,u=e.backgroundColor,s=u===void 0?"main":u,d=e.marked,h=d===void 0?!1:d,f=e.isSortable,p=f===void 0?!1:f,S=e.isSorted,T=S===void 0?!1:S,k=e.sortDirection,w=k===void 0?"ascending":k,N=e.sortAscendingLabel,E=N===void 0?"Sort rows in ascending order.":N,C=e.sortDescendingLabel,x=C===void 0?"Sort rows in descending order.":C,y=e.noWrap,b=y===void 0?!1:y;e.labelSort;var v=e.maxWidth,j=e.minWidth,A=e.sticky,B=e.shadow,R=B===void 0?!0:B,P=e.elevation,M=e.onClick,_=e.align,U=_===void 0?"left":_,$=e.verticalAlign,ye=$===void 0?"middle":$,se=e.interactiveAddon,ie=ae(e,["children","numeric","scope","parent","color","backgroundColor","marked","isSortable","isSorted","sortDirection","sortAscendingLabel","sortDescendingLabel","noWrap","labelSort","maxWidth","minWidth","sticky","shadow","elevation","onClick","align","verticalAlign","interactiveAddon"]),he=m.useContext(pe),_e=he.density,ge=he.showColumnShadow,Se=he.showColumnRightShadow,Z=pr({numeric:a,noWrap:b,maxWidth:v,minWidth:j,marked:h,color:c,isSortable:p,isSorted:T,sticky:A,shadow:R,backgroundColor:s,align:U,verticalAlign:ye,elevation:P,density:_e,onClick:M,showColumnShadow:ge,showColumnRightShadow:Se}),K=Z.wrenchTableHeaderCell,Ie=Z.wrenchTableSortIcon,Be=Z.wrenchTableSortButton,xe=Z.wrenchHeaderCellAddon,De=Z.wrenchTableHeaderContainer,Te=Z.wrenchTableHeaderText,He=l==="Table.Header",fe=!i&&He?"col":i,le=function(Ee){var z=Ee.target,X=z.closest("[data-component]");!X&&M&&M(Ee)},Ce;return p&&(Ce=w==="ascending"?E:x),r.jsx("th",H({className:K,scope:fe,"aria-sort":T?w:void 0},F(ie),{children:p||M?r.jsxs("button",{type:"button",onClick:function(we){return le(we)},"aria-describedby":T?w:void 0,className:Be,"data-column":ie["data-column"],"aria-label":Ce,children:[r.jsx("span",{"data-column":ie["data-column"],className:Te,children:n}),se&&r.jsx("span",{"data-component":"headerCellAddon",className:xe,children:se}),p&&r.jsx(br,{sortDirection:w,wrenchTableSortIcon:Ie,sortAscendingLabel:E,sortDescendingLabel:x})]}):r.jsxs("div",{className:De,children:[r.jsx("span",{className:Te,children:n}),se&&r.jsx("span",{className:xe,children:se})]})}))},yr=V(function(o){var e=o.palette,n={wrenchTableFooter:{position:function(t){var a=t.sticky;return a?"sticky":null},bottom:function(t){var a=t.sticky;return a?0:null},zIndex:function(t){var a=t.sticky;return a?1:null},backgroundColor:function(t){var a=t.sticky;return a?e.background.light:null},transition:"all 0.3s",boxShadow:function(t){var a=t.sticky,i=t.shadow,l=t.showFooterShadow;if(a&&i&&l)return"0 -1px 0 ".concat(e.border.muted,", 0px -2px 4px rgba(0, 0, 0, 0.14)");if(a&&i)return"0 -1px 0 ".concat(e.border.muted)}}};return n}),gr=function(e){var n=e.children,t=e.sticky,a=t===void 0?!1:t,i=e.shadow,l=i===void 0?!0:i,c=ae(e,["children","sticky","shadow"]),u=m.useContext(pe).showFooterShadow,s=yr({sticky:a,showFooterShadow:u,shadow:l}).wrenchTableFooter;return r.jsx("tfoot",H({className:s},F(c),{children:n}))},Sr=V(function(o){var e={wrenchTableContainer:H(H({},re),{overflowX:function(n){var t=n.xScroll;return t?"auto":null},maxHeight:function(n){var t=n.maxHeight;return t??null},overflowY:function(n){var t=n.maxHeight;return t?"auto":null},position:"relative"}),wrenchTable:function(){return H(H({},At(o)),{width:"100%",borderCollapse:"collapse",position:"relative"})}};return e}),I=function(e){var n,t,a,i=e.children,l=e.xScroll,c=l===void 0?!1:l,u=e.density,s=u===void 0?"md":u,d=e.maxHeight,h=e.showStickyShadows,f=h===void 0?!1:h,p=ae(e,["children","xScroll","density","maxHeight","showStickyShadows"]),S=m.useRef(null),T=m.useRef(null),k=m.useRef(null),w=m.useRef(null),N=m.useRef(null),E=m.useRef(null),C=ke({containerRef:S,observerOverlapRef:k,disable:!f}),x=ke({containerRef:S,observerOverlapRef:w,disable:!f}),y=ke({containerRef:S,observerOverlapRef:N,disable:!f}),b=ke({containerRef:S,observerOverlapRef:E,disable:!f}),v=Sr({xScroll:c,maxHeight:d}),j=v.wrenchTableContainer,A=v.wrenchTable,B=m.useMemo(function(){return{density:s,showHeaderShadow:C,showFooterShadow:x,showColumnShadow:y,showColumnRightShadow:b}},[s,C,x,y,b]),R=((t=(n=T.current)===null||n===void 0?void 0:n.clientWidth)!==null&&t!==void 0?t:0)-1,P=(a=T.current)===null||a===void 0?void 0:a.clientHeight,M=r.jsx("table",H({ref:f?T:null,className:A},F(p),{children:i})),_=r.jsxs(r.Fragment,{children:[r.jsx("div",{ref:k,style:{position:"absolute",left:0,width:R}}),r.jsx("div",{ref:N,style:{position:"absolute",left:0,height:P}}),M,r.jsx("div",{ref:E,style:{position:"absolute",top:0,left:R,height:P}}),r.jsx("div",{ref:w,style:{position:"absolute",left:0,width:R}})]});return r.jsx(pe.Provider,{value:B,children:r.jsx("div",{className:j,ref:f?S:null,children:f?_:M})})};I.Header=ar;I.Body=sr;I.Row=dr;I.Cell=hr;I.HeaderCell=vr;I.Footer=gr;et(et([],Ct,!0),wt);const L=Object.freeze({ANALYZE:"analyze",COLLECT:"collect",CONNECT:"connect",DESIGN:"design",EDIT:"edit",STORIES:"stories",SUMMARY:"summary",PRESENT:"present"}),oe=Object.freeze({NO_ACCESS:"NO_ACCESS",READ_ONLY:"READ_ONLY",FULL_ACCESS:"FULL_ACCESS"});oe.NO_ACCESS,oe.READ_ONLY,oe.FULL_ACCESS;function xr(){const o=m.useRef(!0);return m.useEffect(()=>()=>{o.current=!1},[]),o}const be={},Re=G`
  fragment surveyHeaderFragment on Survey {
    id
    isOwner
    title
    nickname
    questionCount
    questions {
      items {
        id
      }
    }
    links {
      summary
      edit
      preview
      previewAndScore
      collect
      connect
      analyze
      present
      design
    }
    pendingAccessRequests {
      analyze
      collect
      design
    }
    permissions {
      roles {
        analyze
        collect
        design
      }
    }
  }
`,Tr=G`
  query surveyHeaderQuery($obfuscatedId: ID!) {
    surveyByObfuscatedId(obfuscatedId: $obfuscatedId) {
      ...surveyHeaderFragment
    }
  }
  ${Re}
`;function Cr(o){const e={...be,...o};return ee(Tr,e)}const wr=G`
  mutation requestAccessMutation($surveyId: ID!, $part: PermissionPart!) {
    requestAccess(surveyId: $surveyId, part: $part) {
      success
    }
  }
`;function Er(o){const e={...be,...o};return Lt(wr,e)}const Ar=G`
  query surveyHeaderQueryWithDashboardId($dashboardId: ID!) {
    dashboard(id: $dashboardId) {
      id
      survey {
        ...surveyHeaderFragment
      }
    }
  }
  ${Re}
`;function kr(o){const e={...be,...o};return ee(Ar,e)}const Or=G`
  query surveyHeaderQueryWithCollectorId($collectorId: ID!) {
    audienceProject(collectorId: $collectorId, languageId: 1) {
      project {
        survey {
          ...surveyHeaderFragment
        }
      }
    }
  }
  ${Re}
`;function Lr(o){const e={...be,...o};return ee(Or,e)}const Nr=G`
  query surveyHeaderQueryWithCrosstabReportId($crosstabReportId: ID!) {
    crosstabReport(id: $crosstabReportId) {
      survey {
        ...surveyHeaderFragment
      }
    }
  }
  ${Re}
`;function jr(o){const e={...be,...o};return ee(Nr,e)}const Le=g.defineMessages({REQUEST_ACCESS:{id:"RequestAccessButton.RequestAccess",defaultMessage:"Request Access"},REQUEST_ACCESS_UNIFIED_NAV:{id:"RequestAccessButton.RequestAccessUnified",defaultMessage:"Request access"},PENDING:{id:"RequestAccessButton.Pending",defaultMessage:"Pending"},COMPLETED_TOAST:{id:"RequestAccessButton.Completed",defaultMessage:"Sent access request"},ERROR_TOAST:{id:"RequestAccessButton.Error",defaultMessage:"Error sending access request"}}),Mr=({surveyId:o,page:e,refetchHeader:n,onCompleted:t,onError:a})=>{const[i,{loading:l}]=Er({variables:{surveyId:o,part:e},onCompleted:async()=>{t(),n&&await n()},onError:c=>{a(c)}});return{requestAccess:i,loading:l}},Ue=({surveyId:o,page:e,level:n,pendingAccessRequest:t,amplitudeCTAName:a,refetchHeader:i,logAmplitudeCTA:l})=>{const[c,u]=m.useState(t),[s,d]=m.useState(!1),[h,f]=m.useState(!1),[p,S]=m.useState(null),T=xr(),k=m.useCallback(()=>{T.current&&(d(!0),u(!0))},[T]),w=m.useCallback(x=>{T.current&&(f(!0),S((x==null?void 0:x.message)||g.t(Le.ERROR_TOAST)),u(!1))},[T]),{requestAccess:N,loading:E}=Mr({surveyId:o,page:e,refetchHeader:i,onCompleted:k,onError:x=>w(x)}),C=()=>{!E&&!c&&N().then(()=>{l(a),l(`request ${e} access`)}).catch(w)};return m.useEffect(()=>{let x;return(s||h)&&(x=setTimeout(()=>{d(!1),f(!1)},3e3)),()=>clearTimeout(x)},[s,h]),n===oe.FULL_ACCESS?null:r.jsxs(r.Fragment,{children:[c||E?r.jsx(O,{ml:3,children:r.jsx(ne,{variant:"bodySm",color:"lightMuted",children:g.t(Le.PENDING)})}):r.jsx(W,{size:"sm",color:"link",variant:"text",onClick:C,tabIndex:0,children:g.t(Le.REQUEST_ACCESS_UNIFIED_NAV)}),r.jsx(Oe,{onClose:()=>d(!1),dismissible:!0,show:s,children:r.jsx(Oe.Title,{children:g.t(Le.COMPLETED_TOAST)})}),r.jsx(Oe,{onClose:()=>f(!1),dismissible:!0,show:h,children:r.jsx(Oe.Title,{children:p})})]})},te=g.defineMessages({REQUEST_ACCESS:{id:"RequestAccessMenu.RequestAccess",defaultMessage:"Request access",description:"[Type: Button][Vis.: Low] - A button that provides options for requesting permissions"},DESIGN_SURVEY:{id:"RequestAccessMenu.DesignSurvey",defaultMessage:"Design survey",description:"[Type: Label][Vis.: Low] - A label for the Design Survey group of permissions"},COLLECT_RESPONSES:{id:"RequestAccessMenu.CollectResponses",defaultMessage:"Collect responses",description:"[Type: Label][Vis.: Low] - A label for the Collect responses group of permissions"},ANALYZE_RESULTS:{id:"RequestAccessMenu.AnalyzeResults",defaultMessage:"Analyze results",description:"[Type: Label][Vis.: Low] - A label for the Analyze Results group of permissions"},NO_ACCESS:{id:"RequestAccessMenu.NoAccess",defaultMessage:"No access",description:"[Type: Label][Vis.: Low] - A label for the No Access permission level"},READ_ONLY:{id:"RequestAccessMenu.ReadOnly",defaultMessage:"View only",description:"[Type: Label][Vis.: Low] - A label for the View only permission level"},FULL_ACCESS:{id:"RequestAccessMenu.FullAccess",defaultMessage:"Full access",description:"[Type: Label][Vis.: Low] - A label for the Full access permission level"},SURVEY_PERMISSIONS:{id:"RequestAccessMenu.SurveyPermissions",defaultMessage:"Survey permissions",description:"[Type: Label][Vis.: Low] - A label for the Permission Levels dropdown on Survey Summary"}}),Rr=(o,e)=>{e(!o)},je=o=>{let e;switch(o){case L.SUMMARY:e=te.SURVEY_PERMISSIONS;break;case oe.FULL_ACCESS:e=te.FULL_ACCESS;break;case oe.READ_ONLY:e=te.READ_ONLY;break;default:e=te.NO_ACCESS}return g.t(e)},_r=(o,e)=>{if(!e)return null;let n;return o===L.COLLECT?n=e.collect:o===L.DESIGN||o===L.EDIT?n=e.design:o===L.ANALYZE?n=e.analyze:o===L.SUMMARY?n=L.SUMMARY:n=oe.NO_ACCESS,je(n)},Ir=({surveyId:o,showRequestAccessMenu:e,setShowRequestAccessMenu:n,activePage:t,pendingAccessRequests:a,refetchHeader:i,permissions:l,logAmplitudeCTA:c})=>{var u,s,d,h,f,p;return r.jsx(J,{autoClose:!1,placement:"bottom-right",noMaxHeight:!0,stretched:!0,noRules:!1,dense:!0,show:e,menuTrigger:r.jsxs(W,{size:"sm",color:"muted","data-testid":"permissions-dropdown-button",onClick:()=>{Rr(e,n)},children:[_r(t,l==null?void 0:l.roles),r.jsx(dt,{title:""})]}),children:r.jsx(J.Body,{padding:!0,children:r.jsx(I,{children:r.jsxs(I.Body,{children:[r.jsxs(I.Row,{children:[r.jsx(I.Cell,{verticalAlign:"middle",children:r.jsx(O,{children:r.jsx(ne,{"data-testid":"survey-permissions-design-label",weight:t===L.DESIGN||t===L.EDIT?"medium":"regular",children:g.t(te.SURVEY_PERMISSIONS)})})}),r.jsx(I.Cell,{verticalAlign:"middle",children:r.jsx(O,{ml:3,"data-testid":"survey-permissions-design-permission",children:je((u=l==null?void 0:l.roles)==null?void 0:u.design)})}),r.jsx(I.Cell,{verticalAlign:"middle",children:r.jsx(Ue,{surveyId:o,page:L.DESIGN.toUpperCase(),level:(s=l==null?void 0:l.roles)==null?void 0:s.design,pendingAccessRequest:a.design,amplitudeCTAName:"designSurveyRequestAccess",logAmplitudeCTA:c})})]}),r.jsxs(I.Row,{children:[r.jsx(I.Cell,{verticalAlign:"middle",children:r.jsx(O,{children:r.jsx(ne,{"data-testid":"survey-permissions-collect-label",weight:t===L.COLLECT?"medium":"regular",children:g.t(te.COLLECT_RESPONSES)})})}),r.jsx(I.Cell,{verticalAlign:"middle",children:r.jsx(O,{ml:3,"data-testid":"survey-permissions-collect-permission",children:je((d=l==null?void 0:l.roles)==null?void 0:d.collect)})}),r.jsx(I.Cell,{verticalAlign:"middle",children:r.jsx(Ue,{surveyId:o,page:L.COLLECT.toUpperCase(),level:(h=l==null?void 0:l.roles)==null?void 0:h.collect,pendingAccessRequest:a.collect,amplitudeCTAName:"collectResponsesRequestAccess",logAmplitudeCTA:c})})]}),r.jsxs(I.Row,{children:[r.jsx(I.Cell,{verticalAlign:"middle",children:r.jsx(O,{children:r.jsx(ne,{"data-testid":"survey-permissions-analyze-label",weight:t===L.ANALYZE?"medium":"regular",children:g.t(te.ANALYZE_RESULTS)})})}),r.jsx(I.Cell,{verticalAlign:"middle",children:r.jsx(O,{ml:3,"data-testid":"survey-permissions-analyze-permission",children:je((f=l==null?void 0:l.roles)==null?void 0:f.analyze)})}),r.jsx(I.Cell,{verticalAlign:"middle",children:r.jsx(Ue,{surveyId:o,page:L.ANALYZE.toUpperCase(),level:(p=l==null?void 0:l.roles)==null?void 0:p.analyze,pendingAccessRequest:a.analyze,refetchHeader:i,amplitudeCTAName:"analyzeResultsRequestAccess",logAmplitudeCTA:c})})]})]})})})})},ve=ct(o=>{const{radius:e,palette:n,type:t,spacing:a}=o,i=typeof e.small=="number"?e.small:parseFloat(e.small),l={color:n.text.light,padding:a[4],borderRadius:`${i*2}px ${i*2}px 0 0`},c={border:"1px solid",margin:`${a[4]}px auto 0`,content:'" "',display:"block",width:"85%"};return{planTable:{width:"100%",tableLayout:"fixed",borderCollapse:"collapse",borderSpacing:0,"& td":{paddingTop:a[4],fontSize:t.fontSize.bodySm},"& tbody tr:last-of-type":{"& :after":{borderWidth:0},"& td":{borderRadius:`0 0 ${e.small}px ${e.small}px`}}},teamPlansHeader:{backgroundColor:n.primary.main,extend:l},currentPlansHeader:{backgroundColor:n.secondary.main,extend:l},planHeader:{width:"180px",textAlign:"center",fontWeight:t.fontWeight.medium},benefitHeader:{textAlign:"left",fontWeight:t.fontWeight.medium,paddingTop:a[4]},benefit:{textAlign:"left",padding:`${a[4]}px 0 0 ${a[1]}px`,fontWeight:"normal"},teamBenefitCell:{backgroundColor:n.background.primary.light,textAlign:"center"},currentPlanBenefitCell:{backgroundColor:n.background.main,textAlign:"center"},teamBenefitDescription:{"&:after":{extend:c,borderColor:n.background.success.medium}},currentPlanBenefitDescription:{"&:after":{extend:c,borderColor:n.background.muted.medium}},featureDescription:{fontSize:t.fontSize.bodySm,"&:after":{extend:c,borderColor:n.background.muted.medium,width:`calc(100% - ${a[2]}px)`,marginLeft:0}},spacerCell:{width:a[2]},iconGap:{width:a[4]},badge:{backgroundColor:n.text.darkMuted,color:n.text.light,paddingLeft:a[2],paddingRight:a[2],paddingTop:a[1],paddingBottom:a[1]},activeBadge:{backgroundColor:n.primary.main,color:n.text.light,paddingLeft:a[2],paddingRight:a[2],paddingTop:a[1],paddingBottom:a[1]}}}),de=({icon:o,text:e})=>{const{featureDescription:n}=ve();return r.jsx("div",{className:n,children:r.jsxs(O,{display:"flex",flexAlign:"center",gap:3,children:[r.jsx(O,{pl:2,element:"span",display:"flex",children:o}),r.jsx("span",{children:e})]})})},D=g.defineMessages({MODAL_HEADER:{id:"TeamsUpsellCopy.ModalHeader",defaultMessage:"Add collaborators with a Team plan",description:"[Type: header][Vis: med] - Header for the teams upsell modal"},MODAL_SUBHEADER:{id:"TeamsUpsellCopy.ModalSubheader",defaultMessage:"Work together to send, create, and analyze surveys.",description:"[Type: header][Vis: med] - Subheader for the teams upsell modal"},MODAL_TABLE_COLUMN_1_HEADER:{id:"TeamsUpsellCopy.ModalTableColumn1Header",defaultMessage:"Benefits you get",description:"[Type: header][Vis: med] - First table column header for the teams upsell modal"},MODAL_TABLE_COLUMN_2_HEADER:{id:"TeamsUpsellCopy.ModalTableColumn2Header",defaultMessage:"Team plans",description:"[Type: header][Vis: med] - Second table column header for the teams upsell modal"},MODAL_TABLE_COLUMN_3_HEADER:{id:"TeamsUpsellCopy.ModalTableColumn3Header",defaultMessage:"Current plan",description:"[Type: header][Vis: med] - Third table column header for the teams upsell modal"},MODAL_TABLE_BENEFIT_1:{id:"TeamsUpsellCopy.ModalTableBenefit1",defaultMessage:"Survey editors",description:"[Type: header][Vis: med] - First table benefit for the teams upsell modal"},MODAL_TABLE_TEAM_PLANS_BENEFIT_1:{id:"TeamsUpsellCopy.ModalTableTeamPlansBenefit1",defaultMessage:"3+",description:"[Type: header][Vis: med] - First table team plans benefit for the teams upsell modal"},MODAL_TABLE_CURRENT_PLAN_BENEFIT_1:{id:"TeamsUpsellCopy.ModalTableCurrentPlanBenefit1",defaultMessage:"1",description:"[Type: header][Vis: med] - First table current plan benefit for the teams upsell modal"},MODAL_TABLE_TEAM_PLANS_BENEFIT_2:{id:"TeamsUpsellCopy.ModalTableTeamPlansBenefit2",defaultMessage:"Edit, comment, delete",description:"[Type: header][Vis: med] - Second table team plans benefit for the teams upsell modal"},MODAL_TABLE_CURRENT_PLAN_BENEFIT_2:{id:"TeamsUpsellCopy.ModalTableCurrentPlanBenefit2",defaultMessage:"Comment only",description:"[Type: header][Vis: med] - Second table current plan benefit for the teams upsell modal"},MODAL_TABLE_BENEFIT_2:{id:"TeamsUpsellCopy.ModalTableBenefit2",defaultMessage:"Collaborator permissions",description:"[Type: header][Vis: med] - Second table benefit for the teams upsell modal"},MODAL_TABLE_BENEFIT_3:{id:"TeamsUpsellCopy.ModalTableBenefit3",defaultMessage:"Create surveys as a team",description:"[Type: header][Vis: med] - Third table benefit for the teams upsell modal"},MODAL_TABLE_BENEFIT_4:{id:"TeamsUpsellCopy.ModalTableBenefit4",defaultMessage:"Export to share results",description:"[Type: header][Vis: med] - Fourth table benefit for the teams upsell modal"},MODAL_TABLE_BENEFIT_5:{id:"TeamsUpsellCopy.ModalTableBenefit5",defaultMessage:"Shared asset library",description:"[Type: header][Vis: med] - Fifth table benefit for the teams upsell modal"},MODAL_TABLE_BENEFIT_6:{id:"TeamsUpsellCopy.ModalTableBenefit6",defaultMessage:"and more...",description:"[Type: header][Vis: med] - Sixth table benefit for the teams upsell modal"},MODAL_ACTION:{id:"TeamsUpsellCopy.ModalAction",defaultMessage:"View more details",description:"[Type: link][Vis: high] - Opens the compare plans link"},MODAL_TRIGGER_ACTION:{id:"TeamsUpsellCopy.ModalTriggerAction",defaultMessage:"Add Collaborators",description:"[Type: link][Vis: high] - Opens the teams upsell modal"},MODAL_TRIGGER_ACTION_UNIFIED_NAV:{id:"TeamsUpsellCopy.ModalTriggerActionUnified",defaultMessage:"Add collaborators",description:"[Type: link][Vis: high] - Opens the teams upsell modal (sentence case)"}}),Br=()=>{const{benefit:o,teamBenefitCell:e,currentPlanBenefitDescription:n,teamBenefitDescription:t,currentPlanBenefitCell:a,iconGap:i}=ve(),l={editors:g.t(D.MODAL_TABLE_BENEFIT_1),collaborators:g.t(D.MODAL_TABLE_BENEFIT_2),teamSurveys:g.t(D.MODAL_TABLE_BENEFIT_3),export:g.t(D.MODAL_TABLE_BENEFIT_4),library:g.t(D.MODAL_TABLE_BENEFIT_5),more:g.t(D.MODAL_TABLE_BENEFIT_6)},u=[{key:l.editors.replace(" ","_"),featureDesc:r.jsx(de,{icon:r.jsx(Nt,{title:""}),text:l.editors}),teamPlan:r.jsx("strong",{children:g.t(D.MODAL_TABLE_TEAM_PLANS_BENEFIT_1)}),currentPlan:g.t(D.MODAL_TABLE_CURRENT_PLAN_BENEFIT_1)},{key:l.collaborators.replace(" ","_"),featureDesc:r.jsx(de,{icon:r.jsx(ut,{title:""}),text:l.collaborators}),teamPlan:r.jsx("strong",{children:g.t(D.MODAL_TABLE_TEAM_PLANS_BENEFIT_2)}),currentPlan:g.t(D.MODAL_TABLE_CURRENT_PLAN_BENEFIT_2)},{key:l.teamSurveys.replace(" ","_"),featureDesc:r.jsx(de,{icon:r.jsx(jt,{title:""}),text:l.teamSurveys}),teamPlan:r.jsx(ce,{title:"Included",color:"primary"}),currentPlan:r.jsx("br",{})},{key:l.export.replace(" ","_"),featureDesc:r.jsx(de,{icon:r.jsx(Mt,{title:""}),text:l.export}),teamPlan:r.jsx(ce,{title:"Included",color:"primary"}),currentPlan:r.jsx("br",{})},{key:l.library.replace(" ","_"),featureDesc:r.jsx(de,{icon:r.jsx(Rt,{title:""}),text:l.library}),teamPlan:r.jsx(ce,{title:"Included",color:"primary"}),currentPlan:r.jsx("br",{})},{key:l.more.replace(" ","_"),featureDesc:r.jsx(de,{icon:r.jsx("span",{className:i}),text:l.more}),teamPlan:r.jsx(ce,{title:"Included",color:"primary"}),currentPlan:r.jsx("br",{})}].map(({key:s,featureDesc:d,teamPlan:h,currentPlan:f})=>r.jsxs("tr",{children:[r.jsx("th",{scope:"row",className:o,children:d}),r.jsx("td",{className:e,children:r.jsx(O,{display:"flex",flexDirection:"column",className:t,children:h})}),r.jsx("td",{}),r.jsx("td",{className:a,children:r.jsx(O,{display:"flex",flexDirection:"column",className:n,children:f})})]},s));return r.jsx(r.Fragment,{children:u})},Dr=({showModal:o,handleClose:e,logAmplitudeCTA:n})=>{const{teamPlansHeader:t,currentPlansHeader:a,planHeader:i,planTable:l,benefitHeader:c,spacerCell:u,featureDescription:s}=ve(),d=()=>{n("add_collaborators_pricing_click")};return r.jsx(Ke,{show:o,onClose:e,size:"md","data-testid":"add-collaborators-modal-container",children:r.jsxs(Ke.Body,{children:[r.jsx(O,{mt:4,children:r.jsx(ne,{variant:"sectionTitleSm",component:"h4",weight:"medium",align:"center",children:g.t(D.MODAL_HEADER)})}),r.jsx(O,{mt:1,mb:5,children:r.jsx(ne,{variant:"body",component:"p",align:"center",children:g.t(D.MODAL_SUBHEADER)})}),r.jsxs("table",{className:l,children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:c,scope:"col",children:r.jsx(O,{className:s,children:g.t(D.MODAL_TABLE_COLUMN_1_HEADER)})}),r.jsx("th",{className:i,scope:"col",children:r.jsx(O,{className:t,children:g.t(D.MODAL_TABLE_COLUMN_2_HEADER)})}),r.jsx("th",{className:u}),r.jsx("th",{className:i,scope:"col",children:r.jsx(O,{className:a,children:g.t(D.MODAL_TABLE_COLUMN_3_HEADER)})})]})}),r.jsx("tbody",{children:r.jsx(Br,{})})]}),r.jsx(O,{mt:6,display:"flex",children:r.jsx(W,{stretched:!0,target:"_blank",href:"/pricing/?compare_plans=134,136&recommended_plan=134",size:"md",onClick:d,children:g.t(D.MODAL_ACTION)})})]})})},Hr=({logAmplitudeCTA:o})=>{const[e,n]=m.useState(!1),t=()=>{o("add collaborators button click"),n(!0)},a=()=>{n(!1)};return r.jsxs(O,{children:[r.jsxs(W,{color:"muted",size:"sm","data-testid":"upgrade-add-collaborators-button",onClick:t,tabIndex:0,children:[r.jsx(ht,{title:""}),r.jsx(ne,{component:"span",variant:"bodySm",color:"dark",weight:"medium",children:g.t(D.MODAL_TRIGGER_ACTION_UNIFIED_NAV)})]}),r.jsx(Dr,{showModal:e,handleClose:a,logAmplitudeCTA:o})]})},Pr={},zr=G`
  query surveyHeaderUser {
    user {
      id
      package {
        id
      }
      team {
        id
        name
      }
      features {
        surveyMagicLinksEnabled
      }
    }
  }
`;function Vr(o){const e={...Pr,...o};return ee(zr,e)}const Ur={},$r=G`
  query AnalysisSharedViews($surveyId: ID!) {
    analysisSharedViews(surveyId: $surveyId) {
      items {
        id
        name
        sharedViewKey
      }
    }
  }
`;function Fr(o){const e={...Ur,...o};return ee($r,e)}const Wr={},qr=G`
  query commentSummaryV3(
    $resourceId: ID!
    $resourceType: String!
    $targetType: String!
  ) {
    commentSummaryV3(
      resourceId: $resourceId
      resourceType: $resourceType
      targetType: $targetType
    ) {
      counts {
        commentCount
      }
    }
  }
`;function Gr(o){const e={...Wr,...o};return ee(qr,e)}g.defineMessages({COMMENT_BUTTON_TITLE:{id:"SharedViewCommentsButton.CommentButtonTitle",defaultMessage:"Survey Comments",description:"[Type: attribute][Vis: low] - title attribute for comment button"}});const Yr=({resourceId:o,addSharedViewCount:e})=>{var l,c,u;const{badge:n,activeBadge:t}=ve(),{data:a}=Gr({variables:{resourceId:o,resourceType:"shared_view",targetType:"question"}}),i=((u=(c=(l=a==null?void 0:a.commentSummaryV3)==null?void 0:l.counts)==null?void 0:c.map(({commentCount:s=0})=>s))==null?void 0:u.reduce((s,d)=>s+d,0))??0;return m.useEffect(()=>{e(i)},[i,a]),r.jsx(O,{pl:6,children:r.jsx("span",{className:i===0?n:t,children:i})})},Qr={},Zr=G`
  query CommentsV3(
    $resourceId: ID!
    $targetIds: [ID!]!
    $resourceType: String!
    $targetType: String!
  ) {
    commentsV3(
      resourceId: $resourceId
      targetIds: $targetIds
      resourceType: $resourceType
      targetType: $targetType
    ) {
      status
      message
      children {
        status
        message
      }
    }
  }
`;function bt(o){const e={...Qr,...o};return ee(Zr,e)}const Kr=g.defineMessages({COMMENT_BUTTON_TITLE:{id:"ShareSurveyAnalyzeButton.CommentButtonTitle",defaultMessage:"Survey Comments",description:"[Type: attribute][Vis: low] - title attribute for comment button"}}),Xr=({surveyId:o,logAmplitudeCTA:e,previewLink:n,questionIds:t})=>{var S;const{badge:a,activeBadge:i}=ve(),[l,c]=m.useState(0),{data:u,loading:s}=Fr({variables:{surveyId:o}}),{data:d,loading:h}=bt({variables:{resourceId:o,resourceType:"survey",targetType:"question",targetIds:t},skip:t.length===0});if(s||h||!(u!=null&&u.analysisSharedViews))return null;const f=()=>(d==null?void 0:d.commentsV3)&&pt(d==null?void 0:d.commentsV3)||0,p=T=>{c(l+T)};return r.jsx(J,{placement:"bottom-right",noRules:!0,alwaysRenderContent:!0,stopPropagation:!0,onChange:()=>e("comment"),"data-testid":"analyze-comment-button",menuTrigger:r.jsxs(W,{label:"Open My Team menu","data-testid":"my-team-dropdown-button",color:"muted",size:"sm",tabIndex:0,children:[r.jsx(Ye,{title:"Dropdown arrow"})," ",l+f()]}),children:r.jsxs(J.Body,{padding:!0,children:[r.jsx(J.Item,{navigationTarget:n,isNavigable:!0,onClick:()=>{e("surveyComments"),e("analyze clicked comment box")},target:"_blank",children:r.jsxs(O,{display:"flex",flexJustify:"space-between","data-testid":"analyze-comment-button-survey-comments",children:[g.t(Kr.COMMENT_BUTTON_TITLE),r.jsx(O,{pl:6,children:r.jsx("span",{className:f()>0?i:a,children:f()})})]})}),(S=u==null?void 0:u.analysisSharedViews)==null?void 0:S.items.map((T,k)=>r.jsx(J.Item,{isNavigable:!0,target:"_blank",navigationTarget:`/results/${T.sharedViewKey}`,onClick:()=>{e("sharedData"),e("analyze clicked shared view")},"data-testid":`analyze-comment-button-shared-views-${k}`,children:r.jsxs(O,{display:"flex",flexJustify:"space-between",children:[T.name,T.sharedViewKey&&r.jsx(Yr,{resourceId:T.sharedViewKey,addSharedViewCount:p})]})},T.id))]})})};var Jr=V(function(o){var e={wrenchLayout:{boxSizing:"border-box",display:"flex",flexDirection:function(n){var t=n.direction;return t==="vertical"?"column":"row"},columnGap:function(n){var t=n.horizontalGap;return t?"".concat(o.spacing[t],"px"):void 0},rowGap:function(n){var t=n.verticalGap;return t?"".concat(o.spacing[t],"px"):void 0},flexWrap:"wrap"}};return e}),en=_t(),tn=function(e){var n=e.children,t=e.direction,a=t===void 0?"horizontal":t,i=e.gap,l=e.horizontalGap,c=e.verticalGap,u=e.m,s=e.mx,d=e.my,h=e.mt,f=e.mb,p=e.ml,S=e.mr,T=e.p,k=e.px,w=e.py,N=e.pt,E=e.pb,C=e.pl,x=e.pr,y=en({m:u,mx:s,my:d,mt:h,mb:f,ml:p,mr:S,p:T,px:k,py:w,pt:N,pb:E,pl:C,pr:x}).wrenchSpacing,b=Jr({direction:a,horizontalGap:l??i,verticalGap:c??i}).wrenchLayout,v=It(b,y);return r.jsx("div",{className:v,children:n})};const rn=g.defineMessages({UPGRADE:{id:"ButtonUpgrade.upgradeButton",defaultMessage:"Upgrade",description:"[Type: Label][Vis.: high] - This is the upgrade addon button on the header."}}),nn=({logAmplitudeCTA:o,isBasicUser:e})=>{const n=Bt("/pricing/upgrade/",{ut_source:"create_header_upgrade",ut_source3:"header"}),[t,a]=m.useState(!0);return m.useEffect(()=>{const i="global-header",l="body",c=document.getElementById(i);if(!c){console.error(`Target element with id "${i}" not found.`);return}const u=document.querySelector(l);if(!u){console.error(`Parent element with selector "${l}" not found.`);return}const s=()=>{const f=window.getComputedStyle(c),p=f.visibility,S=parseFloat(f.opacity);a(p!=="hidden"&&S>0)},d=f=>{f.forEach(p=>{p.attributeName==="class"&&s()})},h=new MutationObserver(d);return h.observe(u,{attributes:!0,attributeFilter:["class"]}),s(),()=>{h.disconnect()}},[]),!e||t?null:r.jsx(W,{size:"sm",color:"upgrade","data-testid":"survey-header-upgrade-button",href:n,onClick:()=>o("upgrade"),tabIndex:0,children:g.t(rn.UPGRADE)})},Ne=g.defineMessages({COMMENT_BUTTON_TITLE:{id:"CreateColabButtons.CommentButtonTitle",defaultMessage:"Comment button",description:"[Type: attribute][Vis: low] - title attribute for comment button"},BUTTON_ARIA_LABEL:{id:"CreateColabButtons.ButtonAriaLabel",defaultMessage:"Opens comment modal in new tab",description:"[Type: label][Vis: low] - aria label for comment button"},ADD_COLLAB_BUTTON:{id:"CreateColabButtons.AddCollaboratorsTitle",defaultMessage:"Add collaborators",description:"[Type: attribute][Vis: low] - title attribute for add collaborators button"},SHARE_AND_PREVIEW_BUTTON:{id:"CreateColabButtons.SharePreviewTitle",defaultMessage:"Share preview",description:"[Type: attribute][Vis: low] - title attribute for share preview button"}}),on=({logAmplitudeCTA:o,surveyId:e,isBasicUser:n,questionIds:t,isSurveyOwner:a,hasMagicLinkShare:i=!1})=>{const{data:l,refetch:c}=bt({variables:{resourceId:e,resourceType:"survey",targetType:"question",targetIds:t},skip:t.length===0}),u=()=>(l==null?void 0:l.commentsV3)&&pt(l==null?void 0:l.commentsV3)||0,s=new CustomEvent("exfo-nav-survey-header-comment-button"),d=new CustomEvent("exfo-nav-survey-header-share-preview-button"),h=new CustomEvent("exfo-nav-survey-header-add-collab-button"),f=()=>{o("comment"),window.dispatchEvent(s)},p=()=>{o("sharePreview"),window.dispatchEvent(d)},S=()=>{o("addCollaborators"),window.dispatchEvent(h)};return m.useEffect(()=>{window.addEventListener("exfo-nav-survey-header-comment-change",()=>{c({resourceId:e,resourceType:"survey",targetType:"question"})})},[c]),r.jsxs(tn,{horizontalGap:3,children:[r.jsx(nn,{logAmplitudeCTA:o,isBasicUser:n}),r.jsxs(W,{"aria-label":g.t(Ne.BUTTON_ARIA_LABEL),onClick:f,color:"muted",size:"sm","data-testid":"comment-button",children:[r.jsx(Ye,{title:g.t(Ne.COMMENT_BUTTON_TITLE)}),u()>0&&r.jsxs("span",{children:[" ",u()]})]}),!n&&i&&a&&r.jsxs(W,{color:"muted",size:"sm",onClick:p,"data-testid":"share-and-preview-buttoj",children:[r.jsx(ut,{title:""})," ",g.t(Ne.SHARE_AND_PREVIEW_BUTTON)]}),!n&&(!i||!a)&&r.jsxs(W,{color:"muted",size:"sm",onClick:S,"data-testid":"add-collaborators-button",children:[r.jsx(ht,{title:""})," ",g.t(Ne.ADD_COLLAB_BUTTON)]})]})},an=ct({surveyTitle:{cursor:"pointer",display:"inline-block"},surveyHeaderTitle:{position:"relative","@media (max-width: 576px)":{fontSize:"24px"}},surveyHeaderAddon:{height:"100%"}}),sn=({surveyId:o,isOwner:e,title:n,previewLink:t,permissions:a,pendingAccessRequests:i,refetchHeader:l,activePage:c,logAmplitudeCTA:u,loading:s,questionIds:d})=>{var A,B,R;const{surveyTitle:h,surveyHeaderTitle:f,surveyHeaderAddon:p}=an(),{data:S}=Vr({fetchPolicy:"network-only",skip:!1}),[T,k]=m.useState(!1),w=L.ANALYZE===c,N=L.DESIGN===c||L.EDIT===c,E=!w&&!N&&L.COLLECT!==c&&L.SUMMARY!==c&&L.CONNECT!==c,C=((B=(A=S==null?void 0:S.user)==null?void 0:A.package)==null?void 0:B.id)==="1",x=C&&(L.COLLECT===c||L.SUMMARY===c)||C&&(L.EDIT===c||L.DESIGN===c),y=new CustomEvent("exfo-nav-survey-header-title-click"),b=()=>{window.dispatchEvent(y)},v=L.DESIGN===c||L.EDIT===c,j=v?h:"";return r.jsx(Qt,{title:s&&!n?r.jsx($e,{height:10,children:r.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 5C0 2.2386 2.23858 0 5 0H282C284.761 0 287 2.2386 287 5C287 7.7614 284.761 10 282 10H5C2.23858 10 0 7.7614 0 5Z"})}):r.jsx("span",{onClick:b,className:`${f} ${j}`,title:rr(n),"data-testid":"survey-header-title",tabIndex:v?0:void 0,onKeyDown:P=>{(P.key==="Enter"||P.key===" ")&&b()},children:r.jsx(tr,{numberOfLines:1,truncationPosition:"middle",children:n})}),addOn:r.jsxs(O,{className:p,display:"flex",alignItems:"center",gap:3,children:[s&&r.jsx($e,{height:10,children:r.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 5C0 2.2386 2.23858 0 5 0H282C284.761 0 287 2.2386 287 5C287 7.7614 284.761 10 282 10H5C2.23858 10 0 7.7614 0 5Z"})}),!s&&r.jsxs(r.Fragment,{children:[N&&t&&r.jsx(on,{previewLink:t,logAmplitudeCTA:u,surveyId:o,isSurveyOwner:e,activePage:c,isBasicUser:C,questionIds:d,hasMagicLinkShare:(R=S==null?void 0:S.user)==null?void 0:R.features.surveyMagicLinksEnabled}),x&&r.jsx(Hr,{activePage:c,logAmplitudeCTA:u}),E&&t&&r.jsx(nr,{previewLink:t,logAmplitudeCTA:u}),w&&t&&r.jsx(Xr,{previewLink:t,activePage:c,surveyId:o,logAmplitudeCTA:u,questionIds:d}),!e&&i&&r.jsx(Ir,{showRequestAccessMenu:T,setShowRequestAccessMenu:k,pendingAccessRequests:i,permissions:a,surveyId:o,activePage:c,refetchHeader:l,logAmplitudeCTA:u})]})]})})};var Q=function(){return Q=Object.assign||function(e){for(var n,t=1,a=arguments.length;t<a;t++){n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Q.apply(this,arguments)};function vt(o,e){var n={};for(var t in o)Object.prototype.hasOwnProperty.call(o,t)&&e.indexOf(t)<0&&(n[t]=o[t]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(o);a<t.length;a++)e.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(o,t[a])&&(n[t[a]]=o[t[a]]);return n}var ln=function(e){var n=e.children,t=e.disabled,a=t===void 0?!1:t,i=e.value;e.selectedValue;var l=vt(e,["children","disabled","value","selectedValue"]);return r.jsx("div",Q({"data-disabled":a,"data-value":i},F(l),{children:n}))},dn=V(function(o){var e=o.palette,n=o.border,t=o.shadow,a=o.spacing,i=o.radius,l=o.type,c={height:{sm:32,md:40,lg:48},borderRadius:i.small,iconColor:e.muted.contrast},u={wrenchSelectMenuContainer:{boxSizing:"border-box",position:"relative",display:"inline-block",cursor:"pointer",backgroundColor:e.background.light,border:function(s){var d=s.noBorder;return d?"none":[n.main]},borderColor:function(s){var d=s.color;return d?e[d].main:null},fontSize:function(s){var d=s.size;return d==="sm"?l.fontSize.bodySm:l.fontSize.body},color:e.text.dark,borderRadius:c.borderRadius,pointerEvents:function(s){var d=s.disabled;return d?"none":null},opacity:function(s){var d=s.disabled;return d?"0.4":null},width:function(s){var d=s.stretched;return d?"100%":null},maxWidth:"100%",height:function(s){var d=s.size;return d?c.height[d]:null},flexGrow:"1","&:hover":{borderColor:function(s){var d=s.color;return d?e[d].main:e.border.hover},boxShadow:t.sky,transition:["all","100ms"]},"&:focus, &:focus-within":{borderColor:function(s){var d=s.color;return d?e[d].main:e.border.active},transition:["border-color","100ms"],outline:"0"},"& > span":{position:"initial",flexGrow:"1",width:"100%",'& > div > [role="listbox"]':{maxWidth:function(s){var d=s.stretched;return d?"100%":"none"},marginTop:1}},'& div [role="listbox"] [role="option"] > span':{pointerEvents:"none","& > svg":{marginRight:a[1],marginBottom:a[1]/2}},'& > span > [role="listbox"] [role="option"] > div':{pointerEvents:"none"}},wrenchSelectMenu:Q(Q({},re),{display:"flex",alignItems:"center",width:"100%",height:function(s){var d=s.size;return d?c.height[d]:void 0},fontSize:function(s){var d=s.size;return d==="sm"?l.fontSize.bodySm:l.fontSize.body},cursor:"pointer",padding:[0,a[7],0,a[4]],paddingLeft:function(s){var d=s.addOn;return d?"".concat(a[6]+a[2],"px"):void 0}}),wrenchSelectMenuSelectedItem:function(){return{display:"flex",alignItems:"center",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis","& > svg":{marginRight:a[2]}}},wrenchSelectMenuNonSelectedItemLeft:function(){return{width:a[4],height:a[4]}},wrenchSelectMenuAffordance:function(){return{position:"absolute",display:"flex",alignItems:"center",right:a[4],pointerEvents:"none","& > svg":{fill:c.iconColor}}},wrenchSelectMenuAddOn:function(){return Q(Q({},re),{fontFamily:l.fontFamily.base,position:"absolute",top:"50%",transform:"translateY(-0.75em)",left:16,paddingRight:a[3],pointerEvents:"none"})}};return u}),cn=ue.memo(function(e){var n=e.child,t=e.hasSelectedValue,a=e.id,i=e.index,l=e.handleMenuClose,c=e.onClick,u=e.selected,s=e.selectedPlacement,d=e.wrenchSelectMenuNonSelectedItemLeft,h="select-child-".concat(i);if(m.isValidElement(n)){var f=n.props,p=f.children,S=f.icon,T=f.value;return r.jsxs(J.Item,{id:h,disabled:n.props.disabled,"data-value":T,handleMenuClose:l,onClick:c,addOn:u?r.jsx(O,{display:"flex",className:"select__checked",children:r.jsx(ce,{title:"Check mark icon",color:"success"})}):t&&s==="left"&&r.jsx("span",{className:d}),addOnPlacement:s,role:"option",children:[S,p]},a)}return r.jsx(r.Fragment,{children:null})}),un=function(e){var n=e.children,t=e.selectedValue;if(t)return r.jsx(r.Fragment,{children:t});if(m.isValidElement(n)&&n.props){var a=n.props.children;return r.jsx(r.Fragment,{children:a})}return r.jsx(r.Fragment,{children:n})},We=function(e){var n=e.children,t=e.id,a=e.label,i=e.placeholder,l=i===void 0?"Choose...":i,c=e.ariaLabel,u=e.disabled,s=u===void 0?!1:u,d=e.color,h=e.value,f=e.defaultValue,p=e.size,S=p===void 0?"md":p,T=e.stretched,k=T===void 0?!1:T,w=e.noBorder,N=w===void 0?!1:w;e.name;var E=e.onChange,C=e.addOn,x=e.selectedPlacement,y=x===void 0?"left":x,b=e.placement,v=b===void 0?"bottom-left":b,j=e.renderTo,A=e.elevation,B=e.alwaysRenderContent,R=B===void 0?!1:B,P=vt(e,["children","id","label","placeholder","ariaLabel","disabled","color","value","defaultValue","size","stretched","noBorder","name","onChange","addOn","selectedPlacement","placement","renderTo","elevation","alwaysRenderContent"]),M=m.useMemo(function(){return ue.Children.toArray(n)},[n]),_=m.useMemo(function(){return Ge("input")},[]),U=m.useMemo(function(){return t??_},[t,_]),$=m.useState(!1),ye=$[0],se=$[1],ie=m.useState(l),he=ie[0],_e=ie[1],ge=m.useState(h||f),Se=ge[0],Z=ge[1],K=dn({size:S,color:d,disabled:s,stretched:k,addOn:C,noBorder:N}),Ie=K.wrenchSelectMenuNonSelectedItemLeft,Be=K.wrenchSelectMenu,xe=K.wrenchSelectMenuSelectedItem,De=K.wrenchSelectMenuAffordance,Te=K.wrenchSelectMenuContainer,He=K.wrenchSelectMenuAddOn,fe=m.useCallback(function(){se(!1)},[]),le=m.useCallback(function(z){Z(z);var X=M.find(function(Pe){var ze;return m.isValidElement(Pe)&&z?Pe.props.value===((ze=z.toString())!==null&&ze!==void 0?ze:Pe):null});if(m.isValidElement(X)){var Ae=r.jsx(un,Q({},X.props));_e(Ae)}},[M]);m.useEffect(function(){h!==void 0&&le(h),f!==void 0&&le(f)},[h,f]);var Ce=m.useCallback(function(z){var X=z.currentTarget,Ae=X.dataset.value;z.persist(),h===void 0&&(le(Ae),fe()),E&&E(z,Ae)},[fe,E,le,h]),we=ue.Children.map(M,function(z,X){return m.isValidElement(z)?r.jsx(cn,{child:z,hasSelectedValue:!!Se,id:t,index:X,onClick:Ce,selected:Se===z.props.value,selectedPlacement:y,wrenchSelectMenuNonSelectedItemLeft:Ie}):null}),Ee=r.jsxs("div",{className:Be,children:[r.jsx("div",{className:xe,children:he}),r.jsx("div",{className:De,children:r.jsx(dt,{title:"Dropdown icon"})})]});return r.jsxs(r.Fragment,{children:[!!a&&r.jsx(Dt,{htmlFor:U,children:a}),r.jsxs("div",Q({id:U,className:Te,tabIndex:-1,role:"combobox","aria-haspopup":"listbox","aria-label":c??"Select Menu","aria-controls":_,"aria-expanded":ye},F(P),{children:[C&&r.jsx("div",{className:He,children:C}),r.jsx(J,{dense:!0,noRules:!0,id:_,menuTrigger:Ee,placement:v,show:ye,onChange:fe,role:"listbox",renderTo:j,elevation:A,stretched:k,alwaysRenderContent:R,children:we})]}))]})};We.Option=ln;const rt=g.defineMessages({PREVIEW_SURVEY:{id:"SurveyPreviewButton.PreviewSurvey",defaultMessage:"Preview survey",description:"[Type: Header][Vis: high] - Text for button that opens a survey preview"},PREVIEW_SURVEY_BUTTON_LABEL:{id:"SurveyPreviewButton.PreviewSurveyButtonLabel",defaultMessage:"See what respondents see. Come back here anytime.",description:"[Type: Label][Vis: low] - Title text for survey preview button link"}}),hn=({previewLink:o,questionCount:e,logAmplitudeCTA:n})=>r.jsx(W,{href:o,onClick:()=>n("previewSurvey"),target:"_blank",color:e?"primary":"muted",size:"sm",label:g.t(rt.PREVIEW_SURVEY_BUTTON_LABEL),"data-testid":"survey-header-preview-button",noWrap:!0,tabIndex:0,children:g.t(rt.PREVIEW_SURVEY)},"muted"),fn=V(o=>{const{spacing:e,radius:n,palette:t,type:a,breakpoints:i}=o,l={borderRadius:n.zero,indicatorHeight:3,indicatorColor:t.primary.main,typeColor:t.text.darkMuted,fontSize:a.fontSize.bodySm,fontWeight:a.fontWeight.medium,paddingY:e[3],paddingX:1};return{wrenchTabIcon:{display:"inline",paddingLeft:e[2]},wrenchTab:{boxSizing:"border-box",display:({align:u,showIcon:s})=>u==="center"&&!s?"inline-block":s?"flex":void 0,margin:0,backgroundColor:"transparent",grow:({align:u})=>u==="even"?1:void 0,overflow:({align:u})=>u==="even"?"hidden":void 0,textAlign:({align:u})=>u==="even"?"center":void 0,width:({align:u})=>u==="even"?"100%":void 0,padding:({align:u})=>{if(u==="left")return`0px 0px 0px ${e[4]}px`;if(u==="right")return`0px ${e[6]}px 0px 0px`;if(u==="center")return`0px ${e[3]}px`},"&:first-child":{paddingLeft:({align:u})=>u==="right"?e[6]:e[5]},"&:last-child":{paddingRight:({align:u})=>u==="left"?e[6]:void 0}},wrenchTabBtn:{display:"block",background:"transparent",border:"none",borderRadius:0,padding:`${l.paddingY}px ${l.paddingX}px`,fontSize:l.fontSize,fontWeight:l.fontWeight,fontFamily:a.fontFamily.base,"-webkit-font-smoothing":"antialiased",cursor:"pointer",width:"100%",lineHeight:1.5,whiteSpace:"nowrap",opacity:({disabled:u})=>u?.5:1,pointerEvents:({disabled:u})=>u?"none":"auto",textDecoration:"none",paddingRight:"0px",color:({color:u,selected:s})=>u==="dark"?t.text.light:s?l.indicatorColor:t.text.dark,borderBottom:({color:u,selected:s})=>{const d=u==="dark"?t.text.light:l.indicatorColor;return s?`${l.indicatorHeight}px solid ${d}`:"none"},"&:hover, &:focus":{textDecoration:"none"}},wrenchTabArrowIcon:{paddingLeft:e[4],paddingBottom:e[1],display:"none",[`@media (min-width: ${i.lg}px)`]:{display:"inline-flex",alignItems:"center"}}}}),mn=({indicator:o,wrenchTabIcon:e})=>r.jsx("div",{className:e,children:{success:r.jsx(ce,{title:"TabIndicator",color:"success"}),error:r.jsx(Pt,{title:"TabIndicator",color:"error"}),info:r.jsx(zt,{title:"TabIndicator",color:"info"}),warning:r.jsx(Vt,{title:"TabIndicator",color:"warning"})}[o]}),yt=m.forwardRef(({selected:o=!1,disabled:e=!1,id:n,align:t="left",color:a="light",indicator:i,value:l=0,onKeyDown:c,onClick:u,children:s,href:d,showIcon:h=!0,title:f,...p},S)=>{const{wrenchTab:T,wrenchTabBtn:k,wrenchTabIcon:w,wrenchTabArrowIcon:N}=fn({selected:o,disabled:e,align:t,color:a,showIcon:h}),E=!!d,C=v=>{u(v,v.target,l,n)},x=v=>{c&&c(v,n)},y={role:"tab","aria-selected":o,tabIndex:e?-1:0,className:k,id:n},b=i?r.jsx(mn,{indicator:i,wrenchTabIcon:w}):null;return r.jsx("li",{role:"presentation",className:T,...F(p),children:E?r.jsxs(r.Fragment,{children:[r.jsxs("a",{...y,href:d,onClick:C,children:[s,b]}),h&&r.jsxs("span",{className:N,"aria-hidden":"true",children:[" ",r.jsx(Ht,{title:"",color:"lightMuted"})," "]})]}):r.jsxs("button",{...y,type:"button",onKeyDown:x,"aria-disabled":e,disabled:e,value:l,onClick:C,ref:S,children:[s,b]})})}),pn=V(o=>{const{border:e,radius:n,palette:t}=o;return{wrenchTabs:{...re,display:({align:i})=>i==="center"?"block":"flex",flexDirection:"row",alignContent:"flex-start",justifyContent:({align:i})=>i==="left"?"flex-start":i==="right"?"flex-end":"center",whiteSpace:({align:i})=>i==="center"?"nowrap":void 0,textAlign:({align:i})=>i==="center"?"center":void 0,overflowX:"auto",background:({color:i})=>i==="light"?t.background.light:i==="dark"?t.background.dark:"transparent",borderBottom:({color:i})=>i==="transparent"?[e.main]:"none",borderRadius:n.zero,"&:focus":{outline:"2px solid #015fcc"}},wrenchTabPanes:{}}}),bn=({align:o="left",color:e="light",fullWidth:n=!1,selectionFollowsFocus:t=!0,onChange:a,children:i,...l})=>{const c=m.useCallback((y=-1)=>{let b=y;return m.Children.forEach(i,(v,j)=>{var A;(A=v==null?void 0:v.props)!=null&&A.selected&&!v.props.disabled&&(b=v.props.value??j)}),b},[i]),[u,s]=m.useState(c);m.useEffect(()=>{s(c)},[c]);const d=m.useMemo(()=>Ge("wds-tab-"),[]),h=m.useRef(null),f=m.useRef(null),p=m.useRef(null),{wrenchTabPanes:S,wrenchTabs:T}=pn({color:e,align:o}),k=(y,b,v,j,A)=>{b!==null&&((A||y.type==="click"||t)&&s(v),b.focus(),y.preventDefault(),a&&a(y,b,v,j))},w=(y,b)=>{const{key:v,target:j}=y,A=j;if(A.getAttribute("role")!=="tab"||!Object.values(q).includes(v))return;const R=[...h.current?[].slice.call(h.current.children):[]].map($=>$.firstChild).filter($=>!$.disabled),P=R.length-1,M=R.indexOf(A);let _=null,U=!1;switch(y.key){case q.TAB:p.current&&(p.current.focus(),y.preventDefault());return;case q.RIGHT:case q.DOWN:_=M<P?R[M+1]:R[0];break;case q.LEFT:case q.UP:_=M!==0?R[M-1]:R[P];break;case q.HOME:[_]=R;break;case q.END:_=R[P];break;case q.SPACE:case q.ENTER:_=A,U=!0;break}_!==null&&k(y,_,parseInt(_.value,10),b,U)},N=(y,b,v,j)=>{const{title:A,...B}=y.props;return m.createElement(yt,{...B,ref:v?f:void 0,key:b,id:j,selected:v,align:o,color:e,value:b,onKeyDown:w,onClick:B.onClick??k},A)},E=(y,b,v,j)=>{const A=n?{transparent:!0}:{padding:!0};return r.jsx("section",{ref:v?p:void 0,role:"tabpanel",tabIndex:0,"aria-labelledby":j,"aria-hidden":!v,children:r.jsx(Ut,{...A,hide:!v,children:y})},b)},C=[],x=[];return m.Children.forEach(i,(y,b)=>{if(!m.isValidElement(y))return;const v=y.props.id??`${d}-${b}`,j=y.props.value??b,A=j===u;C.push(N(y,j,A,v)),y.props.children&&x.push(E(y.props.children,j,A,v))}),r.jsxs("div",{children:[r.jsx("ul",{role:"tablist",ref:h,className:T,...F(l),children:C}),r.jsx("div",{className:S,children:x})]})},vn="survey_connect_tab",yn="survey_connect_tab_control",nt="survey_connect_tab_treatment",ot="survey_connect_tab_treatment_with_categories",gn="survey_connect_workflows",at="survey_connect_workflows_active",Sn="connect_zero_state",xn="connect_zero_state_control",st="connect_zero_state_treatment1",it="connect_zero_state_treatment2",me=g.defineMessages({SUMMARY:{id:"SurveyHeaderBreadcrumbs.SurveySummaryLink",defaultMessage:"SUMMARY",description:"[Type: Link][Vis.: high] - Nav link to survey summary - shared by all core pages."},DESIGN:{id:"SurveyHeaderBreadcrumbs.DesignSurveyLink",defaultMessage:"DESIGN SURVEY",description:"[Type: Link][Vis.: high] - Nav link to survey create - shared by all core pages."},CONNECT:{id:"SurveyHeaderBreadcrumbs.ConnectSurveyLink",defaultMessage:"CONNECT APPS",description:"[Type: Link][Vis.: high] - Nav link to survey connect - shared by all core pages."},COLLECT:{id:"SurveyHeaderBreadcrumbs.CollectSurveyLink",defaultMessage:"COLLECT RESPONSES",description:"[Type: Link][Vis.: high] - Nav link to survey collectors - shared by all core pages."},ANALYZE:{id:"SurveyHeaderBreadcrumbs.AnalyzeSurveyLink",defaultMessage:"ANALYZE RESULTS",description:"[Type: Link][Vis.: high] - Nav link to survey analysis - shared by all core pages."},PRESENT:{id:"SurveyHeaderBreadcrumbs.PresentSurveyLink",defaultMessage:"PRESENT RESULTS",description:"[Type: Link][Vis.: high] - Nav link to survey present - shared by all core pages."}}),Tn=[{label:me.SUMMARY,key:"summary_bc_anchor",link:"summary",page:"summary",mobileLink:"mobileSummary"},{label:me.DESIGN,key:"design_bc_anchor",link:"edit",page:"create",mobileLink:"mobileEdit"},{label:me.CONNECT,key:"connect_bc_anchor",link:"connect",page:"connect",condition:({showConnect:o})=>o},{label:me.COLLECT,key:"collect_bc_anchor",link:"collect",page:"collect",mobileLink:"mobileCollect"},{label:me.ANALYZE,key:"analyze_bc_anchor",link:"analyze",page:"analyze",mobileLink:"mobileAnalyze"}],qe=o=>{switch(o){case"summary":return"summary";case"create":return"designSurvey";case"design":return"designSurvey";case"edit":return"designSurvey";case"connect":return"connectApps";case"collect":return"collectResponses";case"analyze":return"analyzeResults";case"stories":return"analyzeResults";default:return"survey header clicked navigation"}},Cn=V(o=>({border:{borderBottom:`1px solid ${o.palette.background.accent}`,borderTop:`1px solid ${o.palette.background.accent}`,minHeight:48},surveyTabsSelectMenuContainer:{paddingTop:8,paddingBottom:8}})),wn=({links:o,activePage:e,questionCount:n,surveyId:t,isOwner:a,permissions:i,logAmplitudeCTA:l,title:c,loading:u})=>{const s=Ve({name:vn,treatmentNames:[nt,ot],controlName:yn}),d=Ve({name:Sn,treatmentNames:[st,it],controlName:xn}),h=Ve({name:gn,treatmentNames:[at]}),f=e===L.DESIGN||e===L.EDIT,p=!!(s!=null&&s.isTreatment(nt))||!!(s!=null&&s.isTreatment(ot))||!!(h!=null&&h.isTreatment(at))||!!(d!=null&&d.isControl())||!!(d!=null&&d.isTreatment(st))||!!(d!=null&&d.isTreatment(it)),S=Tn.filter(x=>{const{condition:y=()=>!0}=x;return y({showConnect:p})}),T=x=>{try{const y=["collect","analyze","design"].some(v=>e===v),b=i&&i.roles&&y&&e in i.roles?i.roles[e]:"null";Me.MetricsTracker.track({name:Me.USER_EVENTS.ELEMENT_INTERACTION,data:{amplitudeEvent:"survey header clicked navigation",pageName:e,surveyId:t,ctaName:x,isCollaborator:!a,guestId:"",accessLevel:b,surveyHeaderPageClick:qe(x),surveyHeaderCurrentPage:qe(e),surveyHeaderTitle:c,isSurveyHeaderNav:!0}})}catch{}},k=S.map((x,y)=>{const{link:b,label:v}=x;return r.jsx(yt,{title:g.t(v),href:(o==null?void 0:o[b])??"#",onClick:()=>{T(b)},selected:e===b,showIcon:y<S.length-1,"data-testid":`survey-tab-${b}`,id:`survey-tab-${b}`,onKeyDown:()=>({})},`${v}-${y}`)}),{border:w,surveyTabsSelectMenuContainer:N}=Cn({theme:Qe}),E=x=>{var A;const y=(A=x.currentTarget.dataset)==null?void 0:A.value,b=S.find(B=>B.link===y),v=(o==null?void 0:o[b==null?void 0:b.link])??"#",j=new URL(v,window.location.origin);T(b==null?void 0:b.link),window.location.assign(j.toString())},C=()=>r.jsx(O,{ml:5,mr:2,className:N,children:r.jsx(We,{size:"sm",value:e,onChange:E,alwaysRenderContent:!0,children:S.map((x,y)=>{const{link:b,label:v}=x;return r.jsx(We.Option,{value:b,children:g.t(v)},y)})})});return r.jsx(O,{className:w,children:r.jsxs(O,{display:"flex",justifyContent:"space-between",pr:5,children:[r.jsxs(O,{display:"flex",alignItems:"center",children:[r.jsx(Xe,{minWidth:"md",render:()=>r.jsx("nav",{children:r.jsx(bn,{color:"light",children:k})})}),r.jsx(Xe,{maxWidth:"md",render:()=>r.jsx(C,{})})]}),f&&(o==null?void 0:o.previewAndScore)&&!u&&r.jsx(O,{py:2,align:"right",children:r.jsx(hn,{previewLink:o==null?void 0:o.previewAndScore.replace("create","authoring"),questionCount:n,logAmplitudeCTA:l})})]})})},En=({obfuscatedId:o="",activePage:e,dashboardId:n="",collectorId:t="",crosstabReportId:a=""})=>{const{loading:i,data:l,refetch:c}=Cr({variables:{obfuscatedId:o},skip:!o}),{loading:u,data:s,refetch:d}=kr({variables:{dashboardId:n},skip:!n}),{loading:h,data:f,refetch:p}=Lr({variables:{collectorId:t},skip:!t}),{loading:S,data:T,refetch:k}=jr({variables:{crosstabReportId:a},skip:!a}),w=()=>{o?c({obfuscatedId:o}):n?d({dashboardId:n}):a?k({crosstabReportId:a}):p({collectorId:t})},N=()=>i||u||h||S,E=()=>{var M,_,U,$;return n&&s?((M=s.dashboard)==null?void 0:M.survey)||{}:t&&f?((U=(_=f.audienceProject)==null?void 0:_.project)==null?void 0:U.survey)||{}:a&&T?(($=T.crosstabReport)==null?void 0:$.survey)||{}:o&&l?l.surveyByObfuscatedId||{}:{}},{title:C="",nickname:x,isOwner:y=!1,links:b,permissions:v,pendingAccessRequests:j,id:A="",questionCount:B=0,questions:R={items:[]}}=E(),P=m.useCallback(M=>{try{const U=new Set(["collect","analyze","design"]).has(e)?v[e]:null;Me.MetricsTracker.track({name:Me.USER_EVENTS.ELEMENT_INTERACTION,data:{amplitudeEvent:"survey header clicked cta",pageName:e,surveyId:A,ctaName:M,isCollaborator:!y,guestId:"",accessLevel:U,surveyHeaderTitle:C,surveyHeaderCurrentPage:qe(e),surveyHeaderButton:M,surveyHeaderButtonMenu:M,isSurveyHeaderNav:!0}})}catch{}},[e,v,A,y,C]);return m.useEffect(()=>(window.addEventListener("exfo-nav-survey-header-title-change",w),window.addEventListener("exfo-nav-survey-header-question-change",w),()=>{window.removeEventListener("exfo-nav-survey-header-title-change",w),window.removeEventListener("exfo-nav-survey-header-question-change",w)}),[w]),r.jsx(ft,{theme:Qe,children:r.jsxs(r.Fragment,{children:[r.jsx(sn,{title:(x==null?void 0:x.trim().length)>1?x:C,isOwner:y,previewLink:b==null?void 0:b.preview,permissions:v,pendingAccessRequests:j,activePage:e,surveyId:A,refetchHeader:w,logAmplitudeCTA:P,loading:N(),questionIds:(R==null?void 0:R.items.map(M=>M.id))||[]}),r.jsx(wn,{activePage:e,links:b,questionCount:B,surveyId:A,isOwner:y,permissions:v,logAmplitudeCTA:P,title:C,loading:N()})]})})};function An(){const o=()=>{const c=window.location.href;return c.includes("summary")?"summary":c.includes("create")?"edit":c.includes("connect")?"connect":c.includes("collect")?"collect":c.includes("analyze")||c.includes("crosstabs")||c.includes("stories")?"analyze":null},e=c=>{const u=/(?:[?&]sm=|\/)([a-zA-Z0-9_]{20,})(?=[?&]|$)/,s=/\/stories\/(SM-[a-zA-Z0-9_]+)\/edit/,d=/\/collect\/audience\/(\d+)(?:\/[^?]*)?(?:\?.*)?/,h=/\/crosstabs\/(SM-[a-zA-Z0-9_]+)/,f=/[?&]sm=([a-zA-Z0-9_]+)/;let p=c.match(u);return p?{obfuscatedId:p[1]}:(p=c.match(s),p?{dashboardId:p[1]}:(p=c.match(d),p?{collectorId:p[1]}:(p=c.match(h),p?{crosstabReportId:p[1]}:(p=c.match(f),p?{obfuscatedId:p[1]}:{obfuscatedId:void 0,dashboardId:void 0,collectorId:void 0,crosstabReportId:void 0}))))},{obfuscatedId:n,dashboardId:t,collectorId:a,crosstabReportId:i}=e(window.location.href),l=o();return!n&&!t&&!a&&!i||!l?r.jsx(ft,{theme:Qe,children:r.jsx(qt,{})}):r.jsx(En,{activePage:l,obfuscatedId:n,dashboardId:t,collectorId:a,crosstabReportId:i})}const lt="0.42.0",kn=()=>(m.useEffect(()=>{window&&(window.SM=window.SM||{},window.SM.exfo=window.SM.exfo||{},window.SM.exfo.surveyHeaderVersion=lt)},[]),r.jsx($t,{appName:"SurveyHeader",version:lt,children:r.jsx(An,{})}));class gt extends HTMLElement{connectedCallback(){this.innerHTML=`
      <div id="global-survey-header"></div>
    `;const e=document.getElementById("global-survey-header");e&&Ft(e).render(ue.createElement(Wt,{localeBase:this.getAttribute("locale-base")??"en-US",languageCode:this.getAttribute("language-code")??"en",packageName:"survey-header",children:ue.createElement(kn)}))}}Ze(gt,"observedAttributes",[]);customElements.define("global-survey-header",gt);
