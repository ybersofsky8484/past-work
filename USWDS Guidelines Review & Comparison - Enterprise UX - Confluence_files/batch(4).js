WRMCB=function(e){var c=console;if(c&&c.log&&c.error){c.log('Error running batched script.');c.error(e);}}
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:util', location = 'js/util/is-boolean.js' */
define("confluence-browser-metrics/util/is-boolean",[],function(){return function(a){return"boolean"===typeof a}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:util', location = 'js/util/is-number.js' */
define("confluence-browser-metrics/util/is-number",[],function(){return function(a){return"number"===typeof a}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:util', location = 'js/util/is-string.js' */
define("confluence-browser-metrics/util/is-string",[],function(){return function(a){return"string"===typeof a}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:server-duration', location = '/js/reporters/server-duration-reporter.js' */
define("confluence-browser-metrics/reporters/server-duration-reporter",["internal/browser-metrics","jquery"],function(e,b){var c=b.Deferred();b(function(){try{var a=JSON.parse(b("#confluence-server-performance").html())}catch(d){console&&console.error(d),a=null}null!==a&&a.serverDuration?c.resolve(a):c.resolve({})});return function(a){return a.isInitial?c.promise():{}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:server-duration', location = '/js/marshallers/server-duration-marshaller.js' */
define("confluence-browser-metrics/marshallers/server-duration-marshaller",["confluence-browser-metrics/util/is-number"],function(b){return function(a){if(b(a.serverDuration))return{serverDuration:""+Math.floor(a.serverDuration)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:server-duration', location = '/js/marshallers/request-correlation-id-marshaller.js' */
define("confluence-browser-metrics/marshallers/request-correlation-id-marshaller",["confluence-browser-metrics/util/is-string"],function(b){return function(a){if(b(a.requestCorrelationId))return{requestCorrelationId:a.requestCorrelationId}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:bigpipe-reporter', location = '/js/reporters/bigpipe-reporter.js' */
define("confluence-browser-metrics/reporters/bigpipe-reporter",["jquery"],function(b){var a=b.Deferred();b(function(){"undefined"!==typeof AJS.BigPipe&&AJS.BigPipe.metrics?a.resolve(AJS.BigPipe.metrics):a.resolve({})});return function(c){return c.isInitial?a.promise():{}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:bigpipe-reporter', location = '/js/marshallers/bigpipe-marshaller.js' */
define("confluence-browser-metrics/marshallers/bigpipe-marshaller",["confluence-browser-metrics/util/is-boolean"],function(b){return function(a){if(b(a.isBigPipeEnabled))return{isBigPipeEnabled:""+a.isBigPipeEnabled}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:bigpipe-reporter', location = '/js/marshallers/page-end-marshaller.js' */
define("confluence-browser-metrics/marshallers/page-end-marshaller",["confluence-browser-metrics/util/is-number"],function(b){return function(a){if(b(a.pageEnd))return{pageEnd:""+Math.floor(a.pageEnd)}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:spa-transitions', location = '/js/reporters/spa-transitions-reporter.js' */
define("confluence-browser-metrics/reporters/spa-transitions-reporter",["jquery","ajs","confluence/storage-manager"],function(c,f,g){function h(a){var b=c(this).attr("href");if(a=b&&1===a.which&&!a.metaKey&&!a.ctrlKey&&!a.shiftKey)if(a=-1!==b.indexOf("/display/")||/spaces\/(.*)\/pages\/(.*)/.test(b)||-1!==b.indexOf("/viewpage.action"))(a=-1===b.indexOf("~"))||(a=-1!==b.indexOf("/",b.indexOf("~")+1)&&"/"!==b.slice(-1));a&&d.setItemQuietly(c("body").hasClass("dashboard")?"dashboard-page":"page-page",
!0,300);return!0}var e=c.Deferred(),d=g("confluence","spa-transition");f.toInit(function(){c(document).on("click","a",h);var a=null;d.doesContain("page-page")?a="page-page":d.doesContain("dashboard-page")&&(a="dashboard-page");a?(e.resolve({"confluence-spa-transition":a}),d.removeItem(a)):e.resolve({})});return function(a){return a.isInitial?e.promise():{}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:spa-transitions', location = '/js/marshallers/spa-transitions-marshaller.js' */
define("confluence-browser-metrics/marshallers/spa-transitions-marshaller",["confluence-browser-metrics/util/is-string"],function(b){return function(a){if(b(a["confluence-spa-transition"]))return{"confluence-spa-transition":a["confluence-spa-transition"]}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:defer-js', location = '/js/reporters/defer-js-reporter.js' */
define("confluence-browser-metrics/reporters/defer-js-reporter",["confluence/dark-features","jquery"],function(a,b){return function(c){return c.isInitial&&a.isEnabled("defer.js.enable")&&0===b("#doctheme-anchor").length?{deferJs:!0}:{}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:defer-js', location = '/js/marshallers/defer-js-marshaller.js' */
define("confluence-browser-metrics/marshallers/defer-js-marshaller",["confluence-browser-metrics/util/is-boolean"],function(b){return function(a){if(b(a.deferJs))return{deferJs:""+a.deferJs}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:spa-navigation', location = 'js/marshallers/spa-navigation-marshaller.js' */
define("confluence-browser-metrics/marshallers/spa-navigation-marshaller",["confluence-browser-metrics/util/is-string"],function(b){return function(a){if(b(a.transitionTo))return{transitionTo:a.transitionTo}}});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.confluence.plugins.confluence-browser-metrics:browser-metrics-reporters', location = '/js/register-reporters.js' */
window["browser-metrics-plugin"].install(function(c){require("internal/browser-metrics internal/browser-metrics-aa-beacon confluence-browser-metrics/reporters/spa-transitions-reporter confluence-browser-metrics/marshallers/spa-transitions-marshaller confluence-browser-metrics/reporters/defer-js-reporter confluence-browser-metrics/marshallers/defer-js-marshaller confluence-browser-metrics/reporters/server-duration-reporter confluence-browser-metrics/marshallers/server-duration-marshaller confluence-browser-metrics/marshallers/request-correlation-id-marshaller confluence-browser-metrics/reporters/bigpipe-reporter confluence-browser-metrics/marshallers/bigpipe-marshaller confluence-browser-metrics/marshallers/page-end-marshaller confluence-browser-metrics/marshallers/spa-navigation-marshaller".split(" "),
function(b,a,d,e,f,g,h,k,l,m,n,p,q){b.addReporter(d);b.addReporter(f);b.addReporter(h);b.addReporter(m);a.addReportMarshaller(e);a.addReportMarshaller(g);a.addReportMarshaller(k);a.addReportMarshaller(l);a.addReportMarshaller(n);a.addReportMarshaller(p);a.addReportMarshaller(q);c()})});
}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:impl', location = 'browser-metrics-aa-beacon/impl.js' */
!function(e,r){"use strict";const t=e=>"number"==typeof e;const n=e=>"string"==typeof e,a=e=>""+Math.floor(e);const o=(e,r)=>{Object.keys(e).forEach((t=>{r(t,e[t])}))};function s(e){return Object.keys(e).length}class i{constructor(){this.children={},this.values=[]}add(e,r){0==e.length?this.values.push(r):(this.children.hasOwnProperty(e[0])||(this.children[e[0]]=new i),this.children[e[0]].add(e.substr(1),r))}toTrieObject(){let e={};return o(this.children,((r,t)=>{e[r]=t.toTrieObject()})),0===this.values.length?e:0===s(this.children)?this.values:[e,this.values]}condensed(){let e=new i;return e.values=this.values.concat(),o(this.children,((r,t)=>{let n=t.condensed();0===n.values.length&&1===s(n.children)?o(n.children,((t,n)=>{e.children[r+t]=n})):e.children[r]=n})),e}}const d={other:0,img:1,link:2,script:3,css:4,xmlhttprequest:5};function u(e){return(e=Math.floor(e||0))>0?e.toString(36):""}let l="unloadEventStart,unloadEventEnd,redirectStart,redirectEnd,fetchStart,domainLookupStart,domainLookupEnd,connectStart,connectEnd,secureConnectionStart,requestStart,responseStart,responseEnd,domLoading,domInteractive,domContentLoadedEventStart,domContentLoadedEventEnd,domComplete,loadEventStart,loadEventEnd".split(",");r.addReportMarshaller((e=>{var r={};return Object.keys(e).forEach((a=>{var o=e[a];(t(o)||(e=>"boolean"==typeof e)(o)||n(o)||null===o)&&(r[a]=o)})),r})),r.addReportMarshaller((e=>({elementTimings:JSON.stringify(e.elementTimings)}))),r.addReportMarshaller((e=>{if(function(e){return t(e.apdex)}(e))return{apdex:""+e.apdex}})),r.addReportMarshaller((e=>{if(function(e){return t(e.firstPaint)}(e))return{firstPaint:a(e.firstPaint)}})),r.addReportMarshaller((e=>{if(function(e){return"boolean"==typeof e.isInitial}(e))return{isInitial:""+e.isInitial}})),r.addReportMarshaller((e=>{if(function(e){return n(e.journeyId)}(e))return{journeyId:e.journeyId}})),r.addReportMarshaller((e=>{if(function(e){return n(e.key)}(e))return{key:e.key}})),r.addReportMarshaller((e=>{if(function(e){return t(e.navigationType)}(e))return{navigationType:""+e.navigationType}})),r.addReportMarshaller((e=>{if(function(e){return t(e.readyForUser)}(e))return{readyForUser:a(e.readyForUser)}})),r.addReportMarshaller((e=>{if(function(e){return t(e.redirectCount)}(e))return{redirectCount:""+e.redirectCount}})),r.addReportMarshaller((e=>{if(function(e){return t(e.resourceLoadedEnd)}(e))return{resourceLoadedEnd:a(e.resourceLoadedEnd)}})),r.addReportMarshaller((e=>{if(function(e){return Array.isArray(e.resourceTiming)}(e)){let t=new i;return e.resourceTiming.forEach((e=>{let n=r.cleanUrl(e.name);t.add(n||"☠",function(e){return[d[e.initiatorType]||-1,u(e.startTime),u(e.responseEnd),u(e.responseStart),u(e.requestStart),u(e.connectEnd),u(e.secureConnectionStart),u(e.connectStart),u(e.domainLookupEnd),u(e.domainLookupStart),u(e.redirectEnd),u(e.redirectStart)].join(",").replace(/,+$/,"")}(e))})),{resourceTiming:JSON.stringify(t.condensed().toTrieObject())}}})),r.addReportMarshaller((e=>{if(function(e){return t(e.threshold)}(e))return{threshold:a(e.threshold)}})),r.addReportMarshaller((e=>{let r={};return l.forEach((n=>{t(e[n])&&(r[n]=a(e[n]))})),r})),r.addReportMarshaller((e=>{if(function(e){return n(e.userAgent)}(e))return{userAgent:e.userAgent}})),r.addReportMarshaller((e=>{if(function(e){return"object"==typeof e.marks}(e)){let r={},t={marks:{},measures:{}};return e.marks.forEach((e=>{t.marks[e.name]=t.marks[e.name]||[],t.marks[e.name].push(Math.floor(e.time))})),o(t.marks,((e,t)=>{r["mark."+e]=JSON.stringify(t)})),e.measures.forEach((e=>{t.measures[e.name]=t.measures[e.name]||[],t.measures[e.name].push([Math.floor(e.startTime),Math.floor(e.duration)])})),o(t.measures,((e,t)=>{r["measure."+e]=JSON.stringify(t)})),r.userTimingRaw=JSON.stringify({marks:t.marks,measures:t.measures}),r}}));e.subscribe((e=>{r.beacon(e.report)}))}(window["browser-metrics"],window["browser-metrics-aa-beacon"]);

}catch(e){WRMCB(e)};
;
try {
/* module-key = 'com.atlassian.plugins.browser.metrics.browser-metrics-plugin:impl', location = 'impl.js' */
!function(e,t){"use strict";let n=window;var r;try{r=n.require("jquery")}catch(e){r=n.jQuery}var i=r;const o=/^(?:https?:)?\/\/[^\.]+\.cloudfront\.net\/p\/([^\/]+)\/main\.js$/,a=/^(?:https?:)?\/\/aes-artifacts--cdn\.[^\.]+\.atlassian\.io\/hashed\/([^\/]+)\/.+\.js$/;const s=function(){let e=i.Deferred();return i((function(){let t=[];Array.prototype.slice.call(n.document.getElementsByTagName("script")||[]).forEach((e=>{let n=e.getAttribute("src"),r=n&&(n.match(a)||n.match(o));if(r&&r.length>1){let n=r[1];t.push({name:n,async:e.async})}})),e.resolve(t)})),e.promise()}().then((e=>({experiments:e})));let c=function(){return s};const u=e=>{if(function(e){return Array.isArray(e.experiments)}(e))return{experiments:JSON.stringify(e.experiments.map((e=>[e.name,e.async?1:0])))}},d=["android","applewebkit","baiduspider","bingbot","build","chrome","compatible","edge","electron","explorer","firefox","gecko","googlebot","iemobile","intel","ipad","iphone","khtml","konqueror","like","linux","mac","macintosh","maxthon","microsoft","mini","mobi","mobile","mozilla","msie","mwendo","nt","opera","opr","os","phone","playstation","presto","rv","safari","samsung","thunderbird","trident","ubuntu","ucbrowser","unix","version","vivo","win","win64","windows","wow64","x","x11","x64","x86","x86_64","xbox"];function f(e){const t=e.toLowerCase().replace(/[;,()+]/g,"");return function(e){return!!e.match(/^[0-9.,_%\-]+$/)}(t)||-1!==d.indexOf(t)?e:""}function l(e){const t=/[\s\/:]/g,n=e.match(t);return null===n?f(e):e.split(t).map(f).reduce(((e,t)=>e+n.shift()+t))}const m=e=>{if(e.userAgent)return{userAgent:l(e.userAgent)}};let p=/^(true|false|\d+)$/gi,v=/([&?][^&=]+)(=?)([^&#]*)/g,y=e=>e.replace(v,((e,t,n,r)=>t+n+((e=>!!e.match(p))(r)?r:"☠"))),g=/(\/s\/).+(\/_\/)/;const h=/^https:\/\/[^.]+\.cloudfront.net\/[^/]+(\/wiki)?\/s\//g,b=e=>e.match(h)?e=(e=>e.replace(g,((e,t,n)=>t+"☠"+n)))(e=y(e)):"",E=/^https:\/\/d2kryfvs3op226\.cloudfront\.net\/[a-f0-9]+\.[a-z]+$/g,w=e=>e.match(E)?e:"",x=/^https:\/\/[^\/]+\.atl-paas.net\//g,T=e=>e.match(x)?e:""
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */;function S(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function P(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{c(r.next(e))}catch(e){o(e)}}function s(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}var I=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},k=function(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)},L=function(e,t,n){var r;return function(i){t.value>=0&&(i||n)&&(t.delta=t.value-(r||0),(t.delta||void 0===r)&&(r=t.value,e(t)))}},O=-1,M=function(){return"hidden"===document.visibilityState?0:1/0},B=function(){var e,t,n;e=function(e){var t=e.timeStamp;O=t},t=!0,n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))},addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},C=function(){return O<0&&(O=M(),B(),k((function(){setTimeout((function(){O=M(),B()}),0)}))),{get firstHiddenTime(){return O}}};const j=(e,t,n,r=(()=>!1))=>{let i=null;return o=>(i=i||new Promise((e=>{t((t=>{e(t)}))})),r(o)?Promise.reject():i.then((t=>({[e]:n(t)}))))};function A(e){var t;return null===(t=null===PerformanceObserver||void 0===PerformanceObserver?void 0:PerformanceObserver.supportedEntryTypes)||void 0===t?void 0:t.includes(e)}const F=j("fcp",(function(e,t){var n,r=C(),i=I("FCP"),o=function(e){"first-contentful-paint"===e.name&&(s&&s.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=e.startTime,i.entries.push(e),n(!0)))},a=window.performance&&performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],s=a?null:function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return n.observe({type:e,buffered:!0}),n}}catch(e){}}("paint",o);(a||s)&&(n=L(e,i,t),a&&o(a),k((function(r){i=I("FCP"),n=L(e,i,t),requestAnimationFrame((function(){requestAnimationFrame((function(){i.value=performance.now()-r.timeStamp,n(!0)}))}))})))}),(e=>e.value),(e=>{const t=["hidden","mixed"].includes(e.observations.pageVisibility),n=!e.isInitial;return!A("paint")||t||n})),q=j("ttfb",(function(e){var t,n=I("TTFB");t=function(){try{var t=performance.getEntriesByType("navigation")[0]||function(){var e=performance.timing,t={entryType:"navigation",startTime:0};for(var n in e)"navigationStart"!==n&&"toJSON"!==n&&(t[n]=Math.max(e[n]-e.navigationStart,0));return t}();if(n.value=n.delta=t.responseStart,n.value<0||n.value>performance.now())return;n.entries=[t],e(n)}catch(e){}},"complete"===document.readyState?setTimeout(t,0):addEventListener("load",(function(){return setTimeout(t,0)}))}),(e=>e.value),(e=>!e.isInitial));function $(e){return{readyForUser:e.end-e.start}}function R(e,t){return new Promise((function(n){var r;function i(){var t=e();void 0!==t&&(clearInterval(r),n(t))}r=setInterval(i,t),i()}))}const V=()=>window;var U=window;const N=()=>V().performance;function D(){const e=N().getEntriesByType("paint");if(e.length){const t=e.find((e=>"first-paint"===e.name));return t?t.startTime:"not supported"}}var z="browser-metrics-journey";function _(){const e=V();return e.performance&&e.performance.navigation&&e.performance.timing&&void 0!==e.performance.timing.navigationStart}function H(e){return"function"==typeof e}function J(){}function Q(){const e=N();return e&&H(e.getEntriesByType)}var G=[];function K(){return N().getEntriesByType("resource").filter((function(e){return"img"!==e.initiatorType}))}function W(){return Q()?G.concat(K()):[]}!function(e){const t=N();var n=t.onresourcetimingbufferfull||J;H(t.addEventListener)?t.addEventListener("resourcetimingbufferfull",e):t.onresourcetimingbufferfull=function(){e(),n()}}((function(){const e=N();H(e.clearResourceTimings)&&(G=K(),e.clearResourceTimings())}));var X,Y="unloadEventStart,unloadEventEnd,redirectStart,redirectEnd,fetchStart,domainLookupStart,domainLookupEnd,connectStart,connectEnd,secureConnectionStart,requestStart,responseStart,responseEnd,domLoading,domInteractive,domContentLoadedEventStart,domContentLoadedEventEnd,domComplete,loadEventStart,loadEventEnd".split(",");function Z(){const e=N().timing;var t=e.loadEventEnd>0,n={};if(t)return Y.forEach((function(t){var r=e[t];r>0&&(n[t]=r-e.navigationStart)})),n}function ee(){return _()?(void 0===X&&(X=R(Z,250)),X):Promise.reject("The navigation timing API is required to produce a report for this transition.")}function te(){var e=U.document.querySelectorAll("script[src][async]");return Array.prototype.map.call(e,(function(e){return function(e){var t=U.document.createElement("a");return t.href=e,t.href}(e.src)}))}function ne(){var e=te();return ee().then((function(t){return W().filter((function(e){return"link"===e.initiatorType||"script"===e.initiatorType})).filter((function(e){return e.responseEnd<t.domContentLoadedEventStart})).filter((function(t){return"script"!==t.initiatorType||-1===e.indexOf(t.name)}))}))}var re="duration,initiatorType,name".split(","),ie="startTime,connectEnd,connectStart,domainLookupEnd,domainLookupStart,fetchStart,redirectEnd,redirectStart,requestStart,responseEnd,responseStart,secureConnectionStart".split(",");function oe(e,t,n){void 0!==n&&(e[t]=n)}const ae=[F,q,function({observations:e}){return void 0===e.pageVisibility?{}:{pageVisibility:e.pageVisibility}},function({entityId:e}){return e?{entityId:e}:{}},function(e){return{key:e.key}},function(e){return{isInitial:e.isInitial}},function(e){return{threshold:e.threshold}},function(e){const t={},n=function(e,t){try{if(A(e)){const n=new PerformanceObserver((e=>e.getEntries().map(t)));return n.observe({type:e,buffered:!0}),n}}catch(e){console.debug("[BM]","observePerformance",e)}}("element",(({startTime:n,identifier:r})=>{let i=n>=e.start&&n<=e.extendedEnd?n:void 0;t.hasOwnProperty(r)?t[r]<i&&(t[r]=i):i&&(t[r]=i)}));return new Promise((e=>{setTimeout((()=>{e({elementTimings:t}),null==n||n.disconnect()}),250)}))},function(){const{deviceMemory:e,hardwareConcurrency:t}=window.navigator,n={};return oe(n,"userDeviceMemory",e),oe(n,"userDeviceProcessors",t),n},function(e){var t=$(e),n=e.threshold,r=4*e.threshold;return{apdex:t.readyForUser<=n?1:t.readyForUser<=r?.5:0}},function(e){if(N())return e.isInitial?(V().top===V().self&&"PerformancePaintTiming"in V()?R(D,250):Promise.reject("The browser does not have PerformancePaintTiming metric")).then((function(e){return{firstPaint:e}}),(function(){return{}})):{}},function(){const e=V();return void 0===e.sessionStorage?Promise.reject("sessionStorage is required to produce a report for this transition."):(null===e.sessionStorage.getItem(z)&&e.sessionStorage.setItem(z,"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*V().Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))),Promise.resolve({journeyId:e.sessionStorage.getItem(z)}))},function(e){var t={};const n=V();return e.isInitial&&_()&&(t.navigationType=n.performance.navigation.type),t},$,function(e){var t={};const n=V();if(e.isInitial){if(!_())return Promise.reject("The navigation timing API is required to produce a report for this transition.");void 0!==n.performance.navigation.redirectCount&&(t.redirectCount=n.performance.navigation.redirectCount)}return Promise.resolve(t)},function(e){return e.isInitial?ne().then((function(e){return 0===e.length?{resourceLoadedEnd:null}:{resourceLoadedEnd:e.map((function(e){return e.responseEnd})).reduce((function(e,t){return Math.max(e,t)}))}})):{}},function(e){return e.isInitial?ne().then((function(e){if(0===e.length)return{resourceLoadedStart:null};var t=e.map((function(e){return e.startTime}));return{resourceLoadedStart:Math.min.apply(Math,t)}})):{}},function(e){return Q()?{resourceTiming:W().filter((function(t){var n=t.responseEnd;return n>=e.start&&n<=e.extendedEnd&&t.startTime>=e.start})).map((function(t){var n={};return re.forEach((function(e){n[e]=t[e]})),ie.forEach((function(r){n[r]=t[r]>0?t[r]-e.start:0})),n}))}:{}},function(e){return e.isInitial?ee():{}},function(){return{userAgent:V().navigator.userAgent}},function(e){const t=N();if(!t||!H(t.getEntriesByType))return{};var n=t.getEntriesByType("mark").filter((function(t){return t.startTime>=e.start&&t.startTime<=e.extendedEnd})),r=t.getEntriesByType("measure").filter((function(t){return t.startTime>=e.start&&t.startTime+t.duration<=e.extendedEnd}));return{marks:n.map((function(t){return{name:t.name,time:t.startTime-e.start}})),measures:r.map((function(t){return{name:t.name,startTime:t.startTime-e.start,duration:t.duration}}))}}];var se=Object.prototype.hasOwnProperty;function ce(){for(var e,t,n={},r=0,i=arguments.length;r<i;r++)for(t in e=arguments[r])se.call(e,t)&&(n[t]=e[t]);return n}function ue(e){return(t=e,Promise.all([t]).then((function(e){return e[0]}))).then(null,(function(){return{}}));var t}function de(e){var t=e.reporters,n=ae.concat().concat(t).map((function(t){var n;try{n=t(e)}catch(e){!function(e){const t=V();(t.console.error||t.console.log).call(t.console,e.stack||e)}(e),n={}}return ue(n)}));return Promise.all(n).then((function(e){return ce.apply(void 0,e)}))}const fe=()=>window.document,le=()=>{let e=fe().visibilityState;const t=(n=()=>{e="mixed"},document.addEventListener("visibilitychange",n),window.addEventListener("pagehide",n),()=>{document.removeEventListener("visibilitychange",n),window.removeEventListener("pagehide",n)});var n;return()=>(t(),e)};function me(e){return new Promise((t=>setTimeout((()=>t(null)),e)))}function pe(e,t,n){let r;const i=new Promise((n=>{const i=new Set;let o=0;r=new PerformanceObserver((function(r,a){r.getEntries().map((e=>({name:e.name,startTime:e.startTime}))).filter((n=>e.includes(n.name)&&n.startTime>=t.start)).forEach((e=>{o=Math.max(o,e.startTime),i.add(e.name)})),i.size===e.length&&n(o)})),r.observe({type:"mark",buffered:!0})}));return Promise.race([i,n]).then((()=>{r.disconnect()})),i}const ve=()=>{const e={};return{startTransition:(t,n)=>{if(void 0!==e[t])return console.log("[BM]",`Transition key: "${t}" is already in use.`),!1;console.debug("[BM]",t,"Collector.startTransition",n);const{isInitial:r=!1,threshold:i,reporters:o,timestamp:a,entityId:s,waitForMarks:c,timeout:u}=n,d={pageVisibility:le()};return e[t]={isInitial:r,start:a,key:t,threshold:i,reporters:o,entityId:s,observers:d,waitForMarks:c,timeout:u},!0},endTransition:(t,n)=>P(void 0,void 0,void 0,(function*(){var r;const i=e[t];if(void 0===i)throw new Error(`Transition with key: ${t} does not exist in the registry`);console.debug("[BM]",t,"Collector.endTransition",n),delete e[t];const{observers:o,waitForMarks:a,timeout:s}=i,c=S(i,["observers","waitForMarks","timeout"]),u=s-(n.timestamp-i.start);!function(e,t){e.entityId&&t.entityId&&console.debug("[BM]",`entityId "${e.entityId}" provided in start() was overridden by "${t.entityId}" provided in end()`)}(i,n);const d=Object.assign(Object.assign({},c),{observations:{pageVisibility:o.pageVisibility()},end:n.timestamp,extendedEnd:n.timestamp,entityId:null!==(r=n.entityId)&&void 0!==r?r:c.entityId});if(!a||a.length<=0||u<=0)return d;if(void 0===window.PerformanceObserverEntryList||void 0===window.PerformanceObserverEntryList.prototype.getEntries){const e=u/2;return me(e).then((()=>(d.extendedEnd=d.end+e,d)))}const f=me(u);return Promise.race([f,pe(a,i,f)]).then((e=>(d.extendedEnd=null!=e?e:d.end+u,d)))}))}};function ye(){const e=[],t=[],n=ve();function r(e){return t.push(e),console.debug("[BM]",e.key,"Report stored"),e}function i(t){return e.forEach((function(e){e({report:t})})),console.debug("[BM]",t.key,"Subscribers notified"),t}function o(e){!function(e){ae.push(e)}(e)}function a(n){!function(e){t.forEach((function(t){e({report:t})}))}(n),e.push(n)}return function(e){e.start?function(e){var{key:t}=e,r=S(e,["key"]);n.startTransition(t,r)}(e.start):e.end?function(e){var{key:t}=e,o=S(e,["key"]);n.endTransition(t,o).then(de).then(r).then(i).catch((e=>{console.log("[BM]",e.message)}))}(e.end):e.addReporter?o(e.addReporter):e.subscribe&&a(e.subscribe)}}var ge=U["browser-metrics"];function he(){if(N()){console.log("[BM]","Collector installed");const e=ye();ge.delegateTo(e)}}n.define&&n.define("internal/browser-metrics-plugin/collector",(()=>({install:he}))),n["browser-metrics-plugin"].install((function(n){e.addReporter(c),t.addReportMarshaller(u),t.addReportMarshaller(m),t.addUrlCleaner(b),t.addUrlCleaner(w),t.addUrlCleaner(T),n()}))}(window["browser-metrics"],window["browser-metrics-aa-beacon"]);

}catch(e){WRMCB(e)};